<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Made by Larry Hedrick (US Army CW3 352S/N Retired) Email: hedrick.larry@gmail.com. Thank you. -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LSCO OPORD Drafting Tool - Professional Edition</title>

    <!-- Security Headers for HTTPS/TLS 1.3 Enforcement -->
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains; preload">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
    <!-- HTML2Canvas for map image capture -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <!-- MGRS and Proj4js libraries - matching working version -->
    <script src="https://unpkg.com/mgrs@2.0.0/dist/mgrs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.8.0/proj4.js"></script>
    <!-- Geodesy library from Chris Veness GitHub -->
    <script src="https://cdn.jsdelivr.net/gh/chrisveness/geodesy@2.4.0/latlon-ellipsoidal.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/chrisveness/geodesy@2.4.0/utm.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/chrisveness/geodesy@2.4.0/dms.js"></script>
    <!-- Document generation libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/docx/7.8.2/docx.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
        }

        /* Enhanced Styling */
        .tab-btn.active {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .form-input {
            background-color: #374151;
            border: 1px solid #4b5563;
            color: white;
            transition: all 0.2s ease;
        }

        .form-input:focus {
            border-color: #3b82f6;
            outline: none;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            background-color: #4b5563;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.2);
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(59, 130, 246, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
            color: white;
            transition: all 0.2s ease;
        }

        .btn-secondary:hover {
            transform: translateY(-1px);
            background: linear-gradient(135deg, #4b5563 0%, #374151 100%);
        }

        .progress-bar {
            background-color: #374151;
            height: 10px;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .progress-fill {
            background: linear-gradient(90deg, #10b981 0%, #059669 100%);
            height: 100%;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(16, 185, 129, 0.3);
        }

        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slide-in {
            animation: slideIn 0.4s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .hidden { display: none !important; }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
            border: 1px solid #374151;
            color: white;
            padding: 16px 20px;
            border-radius: 12px;
            z-index: 1000;
            animation: slideInRight 0.4s ease-out;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            max-width: 400px;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .notification.success { border-color: #10b981; }
        .notification.error { border-color: #ef4444; }
        .notification.info { border-color: #3b82f6; }

        .modal-backdrop {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(4px);
        }

        .modal-content {
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
            border: 1px solid #374151;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
        }



        .glass-effect {
            background: rgba(31, 41, 55, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(75, 85, 99, 0.3);
        }

        .tooltip {
            position: relative;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #1f2937;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            border: 1px solid #374151;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        .section-card {
            background: linear-gradient(135deg, #374151 0%, #1f2937 100%);
            border: 1px solid #4b5563;
            transition: all 0.3s ease;
        }

        .section-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            border-color: #6b7280;
        }

        .time-display {
            background: linear-gradient(135deg, #374151 0%, #1f2937 100%);
            border: 1px solid #4b5563;
            font-family: 'Courier New', monospace;
        }



        .collapsible-header {
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .collapsible-header:hover {
            background-color: #4b5563;
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .collapsible-content.expanded {
            max-height: 2000px;
        }

        .collapsible-content.hidden {
            max-height: 0 !important;
            opacity: 0;
            padding-top: 0;
            padding-bottom: 0;
            margin-top: 0;
            margin-bottom: 0;
        }

        .collapsible-header {
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 8px;
            background: rgba(55, 65, 81, 0.5);
            border: 1px solid rgba(75, 85, 99, 0.3);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .collapsible-header:hover {
            background: rgba(75, 85, 99, 0.7);
        }

        .collapsible-header i.fa-chevron-right,
        .collapsible-header i.fa-chevron-down {
            transition: transform 0.2s ease;
        }

        /* Collapsible Sidebar Styles */
        .sidebar {
            transition: width 0.3s ease, transform 0.3s ease;
            width: 320px;
            position: relative;
            z-index: 50;
        }

        .sidebar.collapsed {
            width: 60px;
        }

        .sidebar.collapsed .sidebar-text {
            opacity: 0;
            pointer-events: none;
            width: 0;
            overflow: hidden;
        }

        .sidebar-text {
            transition: opacity 0.3s ease, width 0.3s ease;
            flex: 1;
        }

        .sidebar-content {
            transition: opacity 0.3s ease;
        }

        .sidebar-icon {
            min-width: 20px;
            width: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .sidebar.collapsed .sidebar-icon {
            margin-right: 0;
        }

        .sidebar.collapsed .tab-btn {
            justify-content: center;
            padding: 12px 8px;
        }

        .sidebar.collapsed .progress-section,
        .sidebar.collapsed .header-text {
            opacity: 0;
            pointer-events: none;
            height: 0;
            overflow: hidden;
            margin: 0;
            padding: 0;
        }

        .progress-section,
        .header-text {
            transition: opacity 0.3s ease, height 0.3s ease;
        }

        .sidebar-toggle {
            position: fixed;
            top: 50%;
            left: 305px; /* Position relative to sidebar width */
            transform: translateY(-50%);
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            border: 2px solid #1f2937;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 100; /* Higher z-index to stay above main content */
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }

        .sidebar.collapsed .sidebar-toggle {
            left: 45px; /* Position when sidebar is collapsed */
        }

        /* Desktop-specific toggle positioning */
        @media (min-width: 1025px) {
            .sidebar-toggle {
                left: 305px !important;
            }

            .sidebar.collapsed .sidebar-toggle {
                left: 45px !important;
            }
        }

        .sidebar-toggle:hover {
            background: linear-gradient(135deg, #1d4ed8 0%, #1e40af 100%);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }

        .sidebar-toggle i {
            color: white;
            font-size: 12px;
            transition: transform 0.3s ease;
        }

        .sidebar.collapsed .sidebar-toggle i {
            transform: rotate(180deg);
        }

        .main-content {
            transition: all 0.3s ease;
            flex: 1;
            min-width: 0; /* Allow content to shrink */
            overflow-x: hidden; /* Prevent horizontal scroll */
            width: 100%;
        }

        /* Mobile responsive adjustments */
        @media (max-width: 768px) {
            .flex.flex-1.min-h-0 {
                display: block !important;
            }

            .sidebar {
                position: fixed;
                left: 0;
                top: 0;
                height: 100vh;
                width: 280px !important; /* Fixed width for mobile */
                z-index: 60;
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }

            .sidebar.mobile-open {
                transform: translateX(0);
            }

            .sidebar.collapsed {
                transform: translateX(-100%);
            }

            /* Reset sidebar content for mobile */
            .sidebar.collapsed .sidebar-text,
            .sidebar.collapsed .progress-section,
            .sidebar.collapsed .header-text {
                opacity: 1 !important;
                pointer-events: auto !important;
                width: auto !important;
                height: auto !important;
                overflow: visible !important;
                margin: initial !important;
                padding: initial !important;
            }

            .sidebar.collapsed .tab-btn {
                justify-content: flex-start !important;
                padding: 12px 16px !important;
            }

            .main-content {
                margin-left: 0 !important;
                width: 100% !important;
            }

            .main-content.sidebar-collapsed {
                margin-left: 0 !important;
            }

            .sidebar-toggle {
                display: flex !important; /* Keep toggle visible on all screen sizes */
                position: fixed !important;
                z-index: 70 !important; /* Above mobile overlay */
                left: 15px !important; /* Position for mobile */
                top: 50% !important;
                transform: translateY(-50%) !important;
            }

            .mobile-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.6);
                z-index: 50;
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
                backdrop-filter: blur(2px);
            }

            .mobile-overlay.active {
                opacity: 1;
                visibility: visible;
            }

            /* Mobile menu button improvements */
            .mobile-menu-header {
                background: linear-gradient(135deg, #1f2937 0%, #111827 100%) !important;
                border-bottom: 1px solid #374151 !important;
                position: relative !important;
                z-index: 10 !important;
                display: block !important;
                width: 100% !important;
                visibility: visible !important;
                opacity: 1 !important;
            }

            .mobile-menu-btn {
                display: flex !important;
                align-items: center !important;
                padding: 16px !important;
                color: white !important;
                background: transparent !important;
                border: none !important;
                font-size: 16px !important;
                cursor: pointer !important;
                transition: background-color 0.2s ease !important;
                width: 100% !important;
                text-align: left !important;
                visibility: visible !important;
                opacity: 1 !important;
            }

            .mobile-menu-btn:hover {
                background-color: rgba(59, 130, 246, 0.1);
            }

            .mobile-menu-btn:active {
                background-color: rgba(59, 130, 246, 0.2);
            }

            /* Ensure content takes full width on mobile */
            #main-content-area {
                width: 100% !important;
                max-width: 100% !important;
                margin-left: 0 !important;
                margin-right: 0 !important;
                padding-left: 0 !important;
                padding-right: 0 !important;
                display: block !important;
                position: relative !important;
                min-height: calc(100vh - 120px) !important; /* Account for disclaimers */
                overflow-y: auto !important;
            }

            /* Fix content padding on mobile */
            #main-content-area > div {
                padding-left: 16px !important;
                padding-right: 16px !important;
                padding-top: 16px !important;
                padding-bottom: 16px !important;
                display: block !important;
                visibility: visible !important;
            }

            /* Ensure all content is visible on mobile */
            #main-content-area .section-card,
            #main-content-area #main-content,
            #main-content-area .time-display {
                display: block !important;
                visibility: visible !important;
                opacity: 1 !important;
            }

            /* Ensure mobile menu is always visible */
            .md\\:hidden {
                display: block !important;
            }

            /* Fix mobile layout structure */
            body {
                overflow-x: hidden !important;
            }

            .flex.flex-1.min-h-0 {
                display: block !important;
                width: 100% !important;
                min-height: calc(100vh - 120px) !important;
            }

            /* Force visibility of all mobile content */
            @media (max-width: 768px) {
                * {
                    visibility: visible !important;
                }

                .section-card {
                    background: rgba(31, 41, 55, 0.95) !important;
                    border: 1px solid rgba(75, 85, 99, 0.3) !important;
                    display: block !important;
                }

                .time-display {
                    background: rgba(55, 65, 81, 0.8) !important;
                    color: white !important;
                    display: block !important;
                }

                /* Ensure content is visible in portrait mode */
                body {
                    min-height: 100vh !important;
                    height: auto !important;
                }

                #main-content-area {
                    min-height: calc(100vh - 120px) !important;
                    height: auto !important;
                    display: block !important;
                }

                .flex.flex-1.min-h-0 {
                    min-height: calc(100vh - 120px) !important;
                    height: auto !important;
                }
            }
        }

        /* Small mobile devices (portrait phones) */
        @media (max-width: 480px) {
            #main-content-area {
                min-height: calc(100vh - 120px) !important;
                display: block !important;
                visibility: visible !important;
            }

            .section-card {
                display: block !important;
                visibility: visible !important;
                margin-bottom: 1rem !important;
            }

            .sidebar-toggle {
                left: 10px !important;
                width: 25px !important;
                height: 25px !important;
            }
        }

        /* Medium mobile devices (landscape phones) */
        @media (min-width: 481px) and (max-width: 768px) {
            #main-content-area {
                min-height: calc(100vh - 120px) !important;
                display: block !important;
                visibility: visible !important;
            }

            .sidebar-toggle {
                left: 15px !important;
            }
        }

        /* Tablet adjustments */
        @media (min-width: 769px) and (max-width: 1024px) {
            .sidebar {
                width: 280px;
            }

            .sidebar.collapsed {
                width: 50px;
            }

            .main-content.sidebar-collapsed {
                margin-left: -215px;
            }

            .sidebar-toggle {
                display: flex !important;
                left: 305px !important;
            }

            .sidebar.collapsed .sidebar-toggle {
                left: 45px !important;
            }
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1f2937;
        }

        ::-webkit-scrollbar-thumb {
            background: #4b5563;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }

        /* Generate OPORD Button Row Responsive Design */
        .generate-opord-horizontal {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        /* Ensure all Generate OPORD buttons match Map & Weather button size */
        .generate-opord-horizontal button {
            padding: 0.5rem 1rem; /* px-4 py-2 equivalent */
            border-radius: 0.5rem; /* rounded-lg equivalent */
            font-size: 0.875rem; /* text-sm equivalent */
            white-space: nowrap;
            min-height: 40px; /* Match Map & Weather button height */
        }

        @media (max-width: 1024px) {
            .generate-opord-horizontal {
                flex-wrap: wrap;
                gap: 0.25rem;
            }

            .generate-opord-horizontal button {
                padding: 0.375rem 0.75rem; /* Slightly smaller on tablets */
                font-size: 0.75rem; /* text-xs equivalent */
            }
        }

        @media (max-width: 768px) {
            /* Stack the entire header on mobile */
            .draft-header-container {
                flex-direction: column;
                align-items: stretch;
                gap: 1rem;
            }

            .generate-opord-horizontal {
                justify-content: center;
                order: 2; /* Place Generate OPORD buttons in middle */
            }

            .map-snippets-container {
                order: 3; /* Place Map & Weather / Snippets at bottom */
                justify-content: center;
            }

            .draft-title-container {
                order: 1; /* Keep title at top */
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            .generate-opord-horizontal {
                flex-direction: column;
                width: 100%;
            }

            .generate-opord-horizontal button {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body class="bg-gray-900 text-white h-screen flex flex-col overflow-hidden">

    <!-- Top Disclaimer -->
    <div class="bg-yellow-600 text-black text-center py-2 px-4 font-semibold text-sm">
        <i class="fas fa-exclamation-triangle mr-2"></i>
        <span data-translate="disclaimer_text">This product is a training aid and is not endorsed by the United States Army or the Department of Defense. Use at your own discretion. Do Not Input Classified Materials.</span>
    </div>

    <!-- Mobile Overlay -->
    <div id="mobile-overlay" class="mobile-overlay"></div>

    <div class="flex flex-1 min-h-0">
        <!-- Enhanced Collapsible Sidebar -->
        <aside id="sidebar" class="sidebar glass-effect border-r border-gray-700 flex flex-col overflow-hidden relative">
            <!-- Collapse Toggle Button -->
            <button id="sidebar-toggle" class="sidebar-toggle" title="Toggle Sidebar">
                <i class="fas fa-chevron-left"></i>
            </button>
            <!-- Sidebar Content Container -->
            <div class="sidebar-content flex flex-col h-full">
                <!-- Header -->
                <div class="p-6 border-b border-gray-700">
                <div class="flex items-center mb-3">
                    <i class="fas fa-shield-alt text-2xl text-blue-400 mr-3 sidebar-icon"></i>
                    <div class="sidebar-text">
                        <h1 class="text-xl font-bold text-white" data-translate="opord_tool">LSCO OPORD Tool</h1>
                        <p class="text-sm text-gray-400" data-translate="military_planning">Professional Edition v2.0</p>
                    </div>
                </div>
                <div class="flex items-center text-xs text-gray-400 header-text">
                    <div class="w-2 h-2 bg-green-400 rounded-full mr-2"></div>
                    <span>System Ready</span>
                </div>
            </div>

            <!-- Progress Indicator -->
            <div class="p-4 border-b border-gray-700 progress-section">
                <div class="flex justify-between text-xs text-gray-400 mb-2">
                    <span>OPORD Completion</span>
                    <span id="completion-percentage">0%</span>
                </div>
                <div class="progress-bar">
                    <div id="completion-progress" class="progress-fill" style="width: 0%"></div>
                </div>
                <div class="flex justify-between text-xs text-gray-500 mt-1">
                    <span>Draft</span>
                    <span>Complete</span>
                </div>
            </div>

            <!-- Navigation -->
            <nav class="flex-1 p-4 space-y-2 overflow-y-auto">
                <div class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 sidebar-text" data-translate="opord_sections">OPORD Sections</div>

                <button class="tab-btn w-full text-left px-4 py-3 text-gray-300 hover:bg-gray-700 hover:text-white rounded-lg flex items-center tooltip slide-in active" data-tab="situation">
                    <i class="fas fa-map fa-fw mr-3 w-5 text-center sidebar-icon"></i>
                    <div class="flex-1 sidebar-text">
                        <div class="font-medium" data-translate="situation">1. Situation</div>
                        <div class="text-xs text-gray-500" data-translate="sidebar_situation_desc">Enemy, Friendly, Environment</div>
                    </div>
                    <span class="tooltiptext">Overview of the operational environment, enemy and friendly forces</span>
                </button>

                <button class="tab-btn w-full text-left px-4 py-3 text-gray-300 hover:bg-gray-700 hover:text-white rounded-lg flex items-center tooltip slide-in" data-tab="mission">
                    <i class="fas fa-bullseye fa-fw mr-3 w-5 text-center sidebar-icon"></i>
                    <div class="flex-1 sidebar-text">
                        <div class="font-medium" data-translate="mission">2. Mission</div>
                        <div class="text-xs text-gray-500" data-translate="sidebar_mission_desc">Who, What, When, Where, Why</div>
                    </div>
                    <span class="tooltiptext">Define the unit's task and purpose using the 5 Ws</span>
                </button>

                <button class="tab-btn w-full text-left px-4 py-3 text-gray-300 hover:bg-gray-700 hover:text-white rounded-lg flex items-center tooltip slide-in" data-tab="execution">
                    <i class="fas fa-cogs fa-fw mr-3 w-5 text-center sidebar-icon"></i>
                    <div class="flex-1 sidebar-text">
                        <div class="font-medium" data-translate="execution">3. Execution</div>
                        <div class="text-xs text-gray-500" data-translate="sidebar_execution_desc">Intent, Concept, Tasks</div>
                    </div>
                    <span class="tooltiptext">How the unit will accomplish the mission</span>
                </button>

                <button class="tab-btn w-full text-left px-4 py-3 text-gray-300 hover:bg-gray-700 hover:text-white rounded-lg flex items-center tooltip slide-in" data-tab="sustainment">
                    <i class="fas fa-truck fa-fw mr-3 w-5 text-center sidebar-icon"></i>
                    <div class="flex-1 sidebar-text">
                        <div class="font-medium" data-translate="sustainment">4. Sustainment</div>
                        <div class="text-xs text-gray-500" data-translate="sidebar_sustainment_desc">Logistics, Personnel, Health</div>
                    </div>
                    <span class="tooltiptext">Support requirements for the operation</span>
                </button>

                <button class="tab-btn w-full text-left px-4 py-3 text-gray-300 hover:bg-gray-700 hover:text-white rounded-lg flex items-center tooltip slide-in" data-tab="command">
                    <i class="fas fa-headset fa-fw mr-3 w-5 text-center sidebar-icon"></i>
                    <div class="flex-1 sidebar-text">
                        <div class="font-medium" data-translate="command_signal">5. Command & Signal</div>
                        <div class="text-xs text-gray-500" data-translate="sidebar_command_desc">C2, Communications</div>
                    </div>
                    <span class="tooltiptext">Command relationships and communication procedures</span>
                </button>

                <div class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 mt-6 sidebar-text">Tools & Resources</div>

                <button class="tab-btn w-full text-left px-4 py-3 text-gray-300 hover:bg-gray-700 hover:text-white rounded-lg flex items-center tooltip slide-in" data-tab="annexes">
                    <i class="fas fa-folder-open fa-fw mr-3 w-5 text-center sidebar-icon"></i>
                    <div class="flex-1 sidebar-text">
                        <div class="font-medium" data-translate="manage_annexes">Manage Annexes</div>
                        <div class="text-xs text-gray-500" data-translate="sidebar_annexes_desc">A-H + Additional Annexes</div>
                    </div>
                    <span class="tooltiptext">Create and manage detailed OPORD annexes</span>
                </button>

                <button class="tab-btn w-full text-left px-4 py-3 text-gray-300 hover:bg-gray-700 hover:text-white rounded-lg flex items-center tooltip slide-in" data-tab="example">
                    <i class="fas fa-book fa-fw mr-3 w-5 text-center sidebar-icon"></i>
                    <div class="flex-1 sidebar-text">
                        <div class="font-medium" data-translate="example_opord">Example OPORD</div>
                        <div class="text-xs text-gray-500" data-translate="sidebar_example_desc">Complete Reference</div>
                    </div>
                    <span class="tooltiptext">View complete example OPORD for reference</span>
                </button>

                <button class="tab-btn w-full text-left px-4 py-3 text-gray-300 hover:bg-green-700 hover:text-white rounded-lg flex items-center tooltip slide-in" data-tab="draft">
                    <i class="fas fa-pen-alt fa-fw mr-3 w-5 text-center sidebar-icon"></i>
                    <div class="flex-1 sidebar-text">
                        <div class="font-medium" data-translate="draft_opord">Draft Your OPORD</div>
                        <div class="text-xs text-gray-500" data-translate="sidebar_draft_desc">Input & Generate</div>
                    </div>
                    <span class="tooltiptext">Main input area for creating your OPORD</span>
                </button>

                <hr class="border-gray-600 my-4">

                <button id="help-guide" class="w-full text-left px-4 py-3 text-gray-300 hover:bg-gray-700 hover:text-white rounded-lg flex items-center tooltip">
                    <i class="fas fa-question-circle fa-fw mr-3 w-5 text-center sidebar-icon"></i>
                    <div class="flex-1 sidebar-text">
                        <div class="font-medium" data-translate="help_guide">Help Guide</div>
                        <div class="text-xs text-gray-500" data-translate="user_manual">User Manual</div>
                    </div>
                    <span class="tooltiptext">Comprehensive user guide and tips</span>
                </button>

                <button id="clear-draft" class="w-full text-left px-4 py-3 text-gray-300 hover:bg-red-700 hover:text-white rounded-lg flex items-center tooltip">
                    <i class="fas fa-trash fa-fw mr-3 w-5 text-center sidebar-icon"></i>
                    <div class="flex-1 sidebar-text">
                        <div class="font-medium" data-translate="clear_draft">Clear Draft</div>
                        <div class="text-xs text-gray-500" data-translate="reset_all">Reset All</div>
                    </div>
                    <span class="tooltiptext">Clear all draft content (cannot be undone)</span>
                </button>

                <button id="donate-btn" class="w-full text-left px-4 py-3 text-gray-300 hover:bg-green-700 hover:text-white rounded-lg flex items-center tooltip">
                    <i class="fas fa-heart fa-fw mr-3 w-5 text-center sidebar-icon"></i>
                    <div class="flex-1 sidebar-text">
                        <div class="font-medium" data-translate="donate">Support Development</div>
                        <div class="text-xs text-gray-500" data-translate="donate_desc">Help Keep This Tool Free</div>
                    </div>
                    <span class="tooltiptext">Support the development of this free military planning tool</span>
                </button>
            </nav>
            </div> <!-- End sidebar-content -->
        </aside>

        <!-- Main Content Area -->
        <main id="main-content-area" class="main-content flex-1 overflow-y-auto">
            <!-- Mobile Menu Button -->
            <div class="md:hidden mobile-menu-header">
                <button id="mobile-menu-btn" class="mobile-menu-btn">
                    <i class="fas fa-bars text-xl mr-3 text-blue-400"></i>
                    <span data-translate="menu" class="font-medium">Menu</span>
                    <i class="fas fa-chevron-right ml-auto text-gray-400"></i>
                </button>
            </div>

            <div class="p-6">
                <!-- Enhanced Time Clocks -->
                <div class="section-card p-6 mb-6 rounded-xl">
                    <h4 class="text-lg font-semibold mb-4 text-white text-center flex items-center justify-center">
                        <i class="fas fa-clock mr-3 text-blue-400"></i><span data-translate="military_time_ref">Military Time Reference</span>
                    </h4>
                    <div class="flex flex-col lg:flex-row items-center justify-center lg:gap-x-8 gap-y-4">
                        <div class="flex flex-col items-center space-y-3">
                            <button id="copy-zulu-time" class="btn-primary px-6 py-3 rounded-lg text-sm flex items-center">
                                <i class="fas fa-copy mr-2"></i><span data-translate="copy_dtg">Copy Zulu DTG</span>
                            </button>
                            <div class="relative">
                                <select id="language-selector" class="bg-gray-700 text-white px-3 py-2 rounded-lg text-sm border border-gray-600 focus:border-blue-500 appearance-none pr-8">
                                    <option value="en" data-flag="🇺🇸">🇺🇸 English</option>
                                    <option value="es" data-flag="🇪🇸">🇪🇸 Español</option>
                                    <option value="fr" data-flag="🇫🇷">🇫🇷 Français</option>
                                    <option value="de" data-flag="🇩🇪">🇩🇪 Deutsch</option>
                                    <option value="ko" data-flag="🇰🇷">🇰🇷 한국어</option>
                                </select>
                                <i class="fas fa-chevron-down absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                            </div>
                        </div>
                        <div class="flex flex-row flex-wrap items-center justify-center gap-4">
                            <div class="text-center p-3 rounded-lg time-display">
                                <p class="font-semibold text-blue-400 mb-1" data-translate="zulu_utc">Zulu (UTC)</p>
                                <p class="text-lg font-mono"><span id="time-zulu">--:--:--</span> Z</p>
                                <p class="text-xs text-gray-400 mt-1" id="zulu-date">-- --- --</p>
                            </div>
                            <div class="text-center p-3 rounded-lg time-display">
                                <p class="font-semibold text-green-400 mb-1" data-translate="eastern_us">Eastern (ET)</p>
                                <p class="text-lg font-mono"><span id="time-eastern">--:--:--</span> ET</p>
                                <p class="text-xs text-gray-400 mt-1" id="eastern-date">-- --- --</p>
                            </div>
                            <div class="text-center p-3 rounded-lg time-display">
                                <p class="font-semibold text-red-400 mb-1" data-translate="beijing_china">Beijing (CST)</p>
                                <p class="text-lg font-mono"><span id="time-beijing">--:--:--</span></p>
                                <p class="text-xs text-gray-400 mt-1" id="beijing-date">-- --- --</p>
                            </div>
                            <div class="text-center p-3 rounded-lg time-display">
                                <p class="font-semibold text-purple-400 mb-1" data-translate="moscow_russia">Moscow (MSK)</p>
                                <p class="text-lg font-mono"><span id="time-moscow">--:--:--</span></p>
                                <p class="text-xs text-gray-400 mt-1" id="moscow-date">-- --- --</p>
                            </div>
                            <div class="text-center p-3 rounded-lg time-display">
                                <p class="font-semibold text-cyan-400 mb-1" data-translate="hawaii_usa">Hawaii (HST)</p>
                                <p class="text-lg font-mono"><span id="time-hawaii">--:--:--</span></p>
                                <p class="text-xs text-gray-400 mt-1" id="hawaii-date">-- --- --</p>
                            </div>
                            <div class="text-center p-3 rounded-lg time-display">
                                <p class="font-semibold text-orange-400 mb-1" data-translate="seoul_korea">Seoul (KST)</p>
                                <p class="text-lg font-mono"><span id="time-seoul">--:--:--</span></p>
                                <p class="text-xs text-gray-400 mt-1" id="seoul-date">-- --- --</p>
                            </div>
                            <div class="text-center p-3 rounded-lg time-display">
                                <p class="font-semibold text-yellow-400 mb-1" data-translate="local_time">Local System</p>
                                <p class="text-lg font-mono"><span id="time-local">--:--:--</span></p>
                                <p class="text-xs text-gray-400 mt-1" id="local-date">-- --- --</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab Content Container -->
                <div id="main-content" class="fade-in">
                    <!-- Content will be dynamically loaded here -->
                </div>
            </div>
        </main>
    </div>

    <!-- Bottom Disclaimer -->
    <div class="bg-yellow-600 text-black text-center py-2 px-4 font-semibold text-sm">
        <i class="fas fa-exclamation-triangle mr-2"></i>
        <span data-translate="disclaimer_text">This product is a training aid and is not endorsed by the United States Army or the Department of Defense. Use at your own discretion. Do Not Input Classified Materials.</span>
    </div>

    <script>
        // Professional coordinate utilities using Chris Veness geodesy library
        window.opordUtils = window.opordUtils || {};
        console.log('[Geodesy] Initializing coordinate utilities with Chris Veness geodesy library');

        /**
         * Enhanced coordinate validation based on Wikipedia MGRS/UTM specifications
         */
        window.opordUtils.validateCoordinateInput = function(input, type) {
            if (!input || !input.trim()) return false;
            input = input.trim();
            console.log(`[Geodesy] Validating "${input}" as ${type}`);

            // Special debug for user's coordinate
            if (input === '18T VK 80573 07528' && type === 'mgrs') {
                console.log(`[DEBUG] Processing user's specific coordinate: "${input}"`);
            }

            if (type === 'utm') {
                // UTM validation - simplified approach matching working version
                console.log(`[Coord Debug] UTM validation for: "${input}"`);

                // UTM: Zone (1-60) Hemisphere (C-X, excl I,O) Easting (4-7 digits, opt. decimal) Northing (4-7 digits, opt. decimal)
                // Example: "44N 227672.3 3011514.6" or "10S 12345 1234567.89"
                const isValid = /^(\d{1,2})\s*([C-HJ-NP-X])\s*(\d{4,7}(?:\.\d+)?)\s*(\d{4,7}(?:\.\d+)?)$/i.test(input.replace(/\s+/g, ' '));
                console.log(`[Coord Debug] UTM validation result: ${isValid}`);
                return isValid;

            } else if (type === 'mgrs') {
                // MGRS validation - simplified approach matching working version
                console.log(`[Coord Debug] MGRS validation for: "${input}"`);

                // Basic MGRS format check - very permissive like the working version
                // Allow various spacing and formats
                const mgrsPattern = /^(\d{1,2})\s*([C-HJ-NP-X])\s*([A-HJ-NP-Z]{2})\s*(\d{2,10})$/i;
                const spacedPattern = /^(\d{1,2})\s*([C-HJ-NP-X])\s*([A-HJ-NP-Z]{2})\s+(\d{1,5})\s+(\d{1,5})$/i;

                const isValid = mgrsPattern.test(input.replace(/\s+/g, '')) || spacedPattern.test(input);
                console.log(`[Coord Debug] MGRS validation result: ${isValid}`);
                return isValid;

            } else if (type === 'latlon') {
                // Lat/Lon: Latitude (-90 to +90) + Longitude (-180 to +180)
                const patterns = [
                    // Decimal degrees: "48.8584, 2.2945"
                    /^(-?\d{1,3}(?:\.\d+)?)\s*[,;\s]\s*(-?\d{1,3}(?:\.\d+)?)$/,
                    // With degree symbols: "48.8584°, 2.2945°"
                    /^(-?\d{1,3}(?:\.\d+)?)\s*[°º˚]\s*[,;\s]?\s*(-?\d{1,3}(?:\.\d+)?)\s*[°º˚]?$/,
                    // With directions: "48.8584°N, 2.2945°E"
                    /^(-?\d{1,3}(?:\.\d+)?)\s*[°º˚]?\s*([NnSs])\s*[,;\s]?\s*(-?\d{1,3}(?:\.\d+)?)\s*[°º˚]?\s*([EeWw])$/,
                    // Reversed: "N48.8584, E2.2945"
                    /^([NnSs])\s*(-?\d{1,3}(?:\.\d+)?)\s*[°º˚]?\s*[,;\s]?\s*([EeWw])\s*(-?\d{1,3}(?:\.\d+)?)\s*[°º˚]?$/,
                    // DMS format: "48°51'30.24\"N, 2°17'40.2\"E"
                    /^(-?\d{1,3})[°º˚]\s*(\d{1,2})['′]\s*(\d{1,2}(?:\.\d+)?)[\"″]?\s*([NnSs])?\s*[,;\s]?\s*(-?\d{1,3})[°º˚]\s*(\d{1,2})['′]\s*(\d{1,2}(?:\.\d+)?)[\"″]?\s*([EeWw])?$/,
                    // Space separated: "48.8584 2.2945"
                    /^(-?\d{1,3}(?:\.\d+)?)\s+(-?\d{1,3}(?:\.\d+)?)$/,
                    // With labels: "Lat: 48.8584, Lon: 2.2945"
                    /^\(?(?:lat:?\s*)?(-?\d{1,3}(?:\.\d+)?)\s*[,;\s]\s*(?:lon:?\s*)?(-?\d{1,3}(?:\.\d+)?)\)?$/i
                ];

                for (const pattern of patterns) {
                    const match = input.match(pattern);
                    if (match) {
                        let lat, lon;

                        // Extract lat/lon based on pattern
                        if (match[2] && match[4] && match[2].match(/[NnSs]/) && match[4].match(/[EeWw]/)) {
                            // Pattern with directions
                            lat = parseFloat(match[1]);
                            lon = parseFloat(match[3]);
                            if (match[2].toUpperCase() === 'S') lat = -Math.abs(lat);
                            if (match[4].toUpperCase() === 'W') lon = -Math.abs(lon);
                        } else if (match[1] && match[3] && match[1].match(/[NnSs]/) && match[3].match(/[EeWw]/)) {
                            // Reversed pattern
                            lat = parseFloat(match[2]);
                            lon = parseFloat(match[4]);
                            if (match[1].toUpperCase() === 'S') lat = -Math.abs(lat);
                            if (match[3].toUpperCase() === 'W') lon = -Math.abs(lon);
                        } else {
                            // Simple decimal
                            lat = parseFloat(match[1]);
                            lon = parseFloat(match[2]);
                        }

                        // Validate lat/lon ranges
                        if (!isNaN(lat) && !isNaN(lon) &&
                            lat >= -90 && lat <= 90 &&
                            lon >= -180 && lon <= 180) {
                            return true;
                        }
                    }
                }
                return false;
            }
            return false;
        };

        /**
         * Enhanced coordinate parsing with maximum flexibility
         */
        window.opordUtils.parseCoord = function(input, type) {
            input = input ? input.trim() : '';
            console.log(`[Geodesy] Parsing "${input}" as ${type}`);

            try {
                if (type === 'mgrs') {
                    // MGRS parsing using window.mgrs library (matching working version)
                    if (!window.mgrs || typeof window.mgrs.toPoint !== 'function') {
                        console.error("[Coord Debug] MGRS library issue: window.mgrs or window.mgrs.toPoint is not available.", window.mgrs);
                        return null;
                    }

                    try {
                        // Clean input by removing spaces and converting to uppercase
                        const cleanedMgrs = input.replace(/\s/g, '').toUpperCase();
                        console.log(`[Coord Debug] Attempting to convert MGRS: "${cleanedMgrs}" using mgrs.toPoint`);

                        // mgrs.toPoint returns [longitude, latitude]
                        const [lon, lat] = window.mgrs.toPoint(cleanedMgrs); // Note: LON, LAT order
                        console.log(`[Coord Debug] mgrs.toPoint returned Lon: ${lon}, Lat: ${lat}`);

                        if (isNaN(lat) || isNaN(lon) || lat < -90 || lat > 90 || lon < -180 || lon > 180) {
                            console.error(`[Coord Debug] MGRS conversion resulted in invalid Lat/Lon: Lat ${lat}, Lon ${lon}`);
                            return null;
                        }

                        // Return as { lat, lon } for consistency with Leaflet and internal use
                        return {
                            type: 'mgrs', // Original input type
                            lat: parseFloat(lat.toFixed(6)), // Latitude
                            lon: parseFloat(lon.toFixed(6)), // Longitude
                            originalMgrs: cleanedMgrs
                        };
                    } catch (e) {
                        console.error(`[Coord Debug] MGRS parsing failed for "${input}": ${e.message}`);
                        return null;
                    }

                } else if (type === 'utm') {
                    // UTM parsing using proj4js (matching working version)
                    if (!window.proj4) {
                        console.error("[Coord Debug] Proj4js library not loaded for UTM parsing.");
                        return null;
                    }

                    // Regex matches 4-7 digits for E/N, with optional decimals
                    const match = input.replace(/\s+/g, ' ').match(/^(\d{1,2})\s*([C-HJ-NP-X])\s*(\d{4,7}(?:\.\d+)?)\s*(\d{4,7}(?:\.\d+)?)$/i);
                    if (!match) {
                        console.error(`[Coord Debug] parseCoord: UTM regex match failed for input "${input}".`);
                        return null; // Should be caught by validateCoordinateInput already
                    }
                    const zoneNumber = parseInt(match[1], 10);
                    const zoneLetter = match[2].toUpperCase();
                    const easting = parseFloat(match[3]); // Use parseFloat for decimals
                    const northing = parseFloat(match[4]); // Use parseFloat for decimals

                    console.log(`[Coord Debug] Parsed UTM: Zone ${zoneNumber}${zoneLetter}, Easting ${easting}, Northing ${northing}`);

                    // Basic validation; proj4 will do the heavy lifting for actual geographic validity.
                    if (zoneNumber < 1 || zoneNumber > 60 || isNaN(easting) || isNaN(northing) ) {
                        console.error(`[Coord Debug] UTM values out of range: Zone ${zoneNumber}, Easting ${easting}, Northing ${northing}`);
                        return null;
                    }

                    // Convert UTM to Lat/Lon immediately to ensure consistent internal {lat, lon} structure
                    // proj4 expects [easting, northing] for UTM source
                    const isSouthern = zoneLetter < 'N';
                    const utmProj = `+proj=utm +zone=${zoneNumber} ${isSouthern ? '+south' : ''} +ellps=WGS84 +datum=WGS84 +units=m +no_defs`;
                    const wgs84Proj = `+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs`;
                    console.log(`[Coord Debug] Converting UTM to LatLon using proj4: ${utmProj} -> ${wgs84Proj} with [${easting}, ${northing}]`);

                    let latLonFromUtm = null;
                    try {
                        // proj4 returns [longitude, latitude] for Lat/Lon target
                        const [lon, lat] = proj4(utmProj, wgs84Proj, [easting, northing]); // Input: EASTING, NORTHING
                        console.log(`[Coord Debug] proj4 UTM->LatLon result: Lon ${lon}, Lat ${lat}`);
                        if (!isNaN(lat) && !isNaN(lon)) {
                            latLonFromUtm = { lat: parseFloat(lat.toFixed(6)), lon: parseFloat(lon.toFixed(6)) };
                        } else {
                            console.error(`[Coord Debug] proj4 UTM->LatLon returned NaN: Lon ${lon}, Lat ${lat}`);
                        }
                    } catch (e) {
                        console.error("[Coord Debug] proj4 UTM->LatLon conversion error:", e);
                    }

                    if (!latLonFromUtm) {
                        console.error(`[Coord Debug] Failed to convert UTM: Zone ${zoneNumber}${zoneLetter} E${easting} N${northing}`);
                        return null;
                    }

                    // Return the original UTM components along with the derived lat/lon
                    return {
                        type: 'utm', // Original input type
                        zoneNumber,
                        zoneLetter,
                        easting,
                        northing,
                        isSouthern,
                        lat: latLonFromUtm.lat, // Derived Latitude
                        lon: latLonFromUtm.lon  // Derived Longitude
                    };

                } else if (type === 'latlon') {
                    // Enhanced Lat/Lon parsing with maximum flexibility
                    if (typeof LatLon === 'undefined') {
                        console.error('[Geodesy] LatLon class not available');
                        return null;
                    }

                    let lat, lon;
                    let inputStr = input.trim();

                    // Remove common prefixes and clean up
                    inputStr = inputStr.replace(/^(lat:?|latitude:?|lon:?|longitude:?)/gi, '').trim();
                    inputStr = inputStr.replace(/[\(\)]/g, '').trim();

                    console.log(`[Geodesy] Cleaned input: "${inputStr}"`);

                    // Try DMS (Degrees Minutes Seconds) parsing first
                    if (typeof Dms !== 'undefined' && (inputStr.includes('°') || inputStr.includes("'") || inputStr.includes('"') || inputStr.match(/[NSEW]/i))) {
                        try {
                            // Split on common separators
                            const parts = inputStr.split(/[,;]\s*/);
                            if (parts.length >= 2) {
                                lat = Dms.parse(parts[0].trim());
                                lon = Dms.parse(parts[1].trim());
                                console.log(`[Geodesy] DMS parsed: Lat ${lat}, Lon ${lon}`);
                            }
                        } catch (e) {
                            console.log('[Geodesy] DMS parsing failed, trying other methods:', e.message);
                        }
                    }

                    // Try various decimal degree patterns
                    if (lat === undefined || lon === undefined) {
                        const patterns = [
                            // Standard decimal: "48.8584, 2.2945"
                            /^(-?\d{1,3}(?:\.\d+)?)\s*[,;\s]\s*(-?\d{1,3}(?:\.\d+)?)$/,
                            // Space separated: "48.8584 2.2945"
                            /^(-?\d{1,3}(?:\.\d+)?)\s+(-?\d{1,3}(?:\.\d+)?)$/,
                            // With degree symbols: "48.8584° 2.2945°"
                            /^(-?\d{1,3}(?:\.\d+)?)\s*[°º˚]\s*[,;\s]?\s*(-?\d{1,3}(?:\.\d+)?)\s*[°º˚]?$/,
                            // With directions: "48.8584°N, 2.2945°E"
                            /^(-?\d{1,3}(?:\.\d+)?)\s*[°º˚]?\s*([NnSs])\s*[,;\s]?\s*(-?\d{1,3}(?:\.\d+)?)\s*[°º˚]?\s*([EeWw])$/,
                            // Reversed directions: "N48.8584, E2.2945"
                            /^([NnSs])\s*(-?\d{1,3}(?:\.\d+)?)\s*[°º˚]?\s*[,;\s]?\s*([EeWw])\s*(-?\d{1,3}(?:\.\d+)?)\s*[°º˚]?$/,
                            // With labels: "Lat: 48.8584, Lon: 2.2945"
                            /^(?:lat:?\s*)?(-?\d{1,3}(?:\.\d+)?)\s*[,;\s]\s*(?:lon:?\s*)?(-?\d{1,3}(?:\.\d+)?)$/i,
                            // Latitude/Longitude: "Latitude: 48.8584, Longitude: 2.2945"
                            /^(?:latitude:?\s*)?(-?\d{1,3}(?:\.\d+)?)\s*[,;\s]\s*(?:longitude:?\s*)?(-?\d{1,3}(?:\.\d+)?)$/i
                        ];

                        for (const pattern of patterns) {
                            const match = inputStr.match(pattern);
                            if (match) {
                                if (match[2] && match[4] && match[2].match(/[NnSs]/) && match[4].match(/[EeWw]/)) {
                                    // Pattern with directions: "48.8584°N, 2.2945°E"
                                    lat = parseFloat(match[1]);
                                    lon = parseFloat(match[3]);
                                    if (match[2].toUpperCase() === 'S') lat = -Math.abs(lat);
                                    if (match[4].toUpperCase() === 'W') lon = -Math.abs(lon);
                                } else if (match[1] && match[3] && match[1].match(/[NnSs]/) && match[3].match(/[EeWw]/)) {
                                    // Reversed pattern: "N48.8584, E2.2945"
                                    lat = parseFloat(match[2]);
                                    lon = parseFloat(match[4]);
                                    if (match[1].toUpperCase() === 'S') lat = -Math.abs(lat);
                                    if (match[3].toUpperCase() === 'W') lon = -Math.abs(lon);
                                } else {
                                    // Simple decimal pattern
                                    lat = parseFloat(match[1]);
                                    lon = parseFloat(match[2]);
                                }
                                console.log(`[Geodesy] Pattern matched: Lat ${lat}, Lon ${lon}`);
                                break;
                            }
                        }
                    }

                    if (lat === undefined || lon === undefined || isNaN(lat) || isNaN(lon)) {
                        console.error(`[Geodesy] Could not parse lat/lon from: "${input}"`);
                        return null;
                    }

                    // Validate range
                    if (lat < -90 || lat > 90 || lon < -180 || lon > 180) {
                        console.error(`[Geodesy] Lat/Lon out of range: Lat ${lat}, Lon ${lon}`);
                        return null;
                    }

                    console.log(`[Geodesy] Successfully parsed Lat/Lon: ${lat}, ${lon}`);

                    return {
                        type: 'latlon',
                        lat: parseFloat(lat.toFixed(6)),
                        lon: parseFloat(lon.toFixed(6))
                    };
                }

            } catch (error) {
                console.error(`[Geodesy] Error parsing ${type} coordinate "${input}":`, error);
            }

            // Auto-detection fallback - try other coordinate types
            console.log(`[Geodesy] Auto-detecting coordinate type for: "${input}"`);

            const typesToTry = ['mgrs', 'utm', 'latlon'].filter(t => t !== type);

            for (const tryType of typesToTry) {
                if (window.opordUtils.validateCoordinateInput(input, tryType)) {
                    console.log(`[Geodesy] Auto-detected as ${tryType}, attempting parse...`);
                    const result = window.opordUtils.parseCoord(input, tryType);
                    if (result) {
                        console.log(`[Geodesy] Successfully auto-parsed as ${tryType}`);
                        return result;
                    }
                }
            }

            console.error(`[Geodesy] Failed to parse coordinate "${input}" as any known type`);
            return null;
        };

        /**
         * Convert coordinates between different systems using geodesy library
         */
        window.opordUtils.convertCoordinate = function(lat, lon, targetType) {
            try {
                if (typeof LatLon === 'undefined') {
                    console.error('[Geodesy] LatLon class not available for conversion');
                    return null;
                }

                const latlon = new LatLon(lat, lon);
                console.log(`[Geodesy] Converting Lat: ${lat}, Lon: ${lon} to ${targetType}`);

                if (targetType === 'utm') {
                    if (typeof Utm === 'undefined') {
                        console.error('[Geodesy] UTM class not available');
                        return null;
                    }
                    const utm = latlon.toUtm();
                    return {
                        zone: utm.zone,
                        hemisphere: utm.hemisphere,
                        easting: Math.round(utm.easting),
                        northing: Math.round(utm.northing),
                        formatted: `${utm.zone}${utm.hemisphere} ${Math.round(utm.easting)} ${Math.round(utm.northing)}`
                    };

                } else if (targetType === 'mgrs') {
                    if (typeof Mgrs === 'undefined') {
                        console.error('[Geodesy] MGRS class not available');
                        return null;
                    }
                    const utm = latlon.toUtm();
                    const mgrs = utm.toMgrs();
                    return {
                        mgrs: mgrs.toString(),
                        formatted: mgrs.toString()
                    };

                } else if (targetType === 'latlon') {
                    if (typeof Dms === 'undefined') {
                        return {
                            decimal: `${lat.toFixed(6)}, ${lon.toFixed(6)}`,
                            formatted: `${lat.toFixed(6)}, ${lon.toFixed(6)}`
                        };
                    }
                    return {
                        decimal: `${lat.toFixed(6)}, ${lon.toFixed(6)}`,
                        dms: `${Dms.toLat(lat, 'dms', 2)}, ${Dms.toLon(lon, 'dms', 2)}`,
                        formatted: `${lat.toFixed(6)}, ${lon.toFixed(6)}`
                    };
                }

            } catch (error) {
                console.error(`[Geodesy] Error converting to ${targetType}:`, error);
                return null;
            }

            return null;
        };

        /**
         * Calculate distance between two coordinates using geodesy library
         */
        window.opordUtils.calculateDistance = function(lat1, lon1, lat2, lon2) {
            try {
                if (typeof LatLon === 'undefined') {
                    console.error('[Geodesy] LatLon class not available for distance calculation');
                    return null;
                }

                const point1 = new LatLon(lat1, lon1);
                const point2 = new LatLon(lat2, lon2);

                const distanceM = point1.distanceTo(point2);
                const bearing = point1.bearingTo(point2);

                return {
                    meters: Math.round(distanceM),
                    kilometers: Math.round(distanceM / 1000 * 100) / 100,
                    miles: Math.round(distanceM * 0.000621371 * 100) / 100,
                    bearing: Math.round(bearing),
                    formatted: `${Math.round(distanceM / 1000 * 100) / 100} km (${Math.round(bearing)}°)`
                };

            } catch (error) {
                console.error('[Geodesy] Error calculating distance:', error);
                return null;
            }
        };

        // Translation system
        const translations = {
            en: {
                // Header and Navigation
                opord_tool: "OPORD Tool",
                military_planning: "Military Planning Assistant",
                copy_dtg: "Copy Zulu DTG",
                menu: "Menu",
                opord_sections: "OPORD Sections",

                // Tab Navigation
                help_guide: "Help Guide",
                example_opord: "Example OPORD",
                draft_opord: "Draft OPORD",
                draft_opord_description: "Create your OPORD with integrated mapping and weather tools. Use the Map & Weather tool to get coordinates and tactical data for your operation.",
                manage_annexes: "Manage Annexes",

                // Placeholder translations
                placeholder_unit_designation: "Unit designation",
                placeholder_tactical_task: "Tactical task",
                placeholder_nlt_dtg: "NLT DTG",
                placeholder_objective_location: "Objective/Location",
                placeholder_purpose: "Purpose",
                placeholder_mission_statement: "[Unit] [Task] [Objective] [NLT DTG] in order to [Purpose]",
                placeholder_situation: "Enter situation details...",
                placeholder_coordinates: "Enter key locations with coordinates (e.g., OBJ ALPHA: 18TWL8396007523, CP BRAVO: 44R 206915 3009291)",
                placeholder_execution: "Enter execution details...",
                placeholder_sustainment: "Enter sustainment details...",
                placeholder_command: "Enter command and signal details...",
                placeholder_task_organization: "Enter task organization...",
                placeholder_intelligence: "Enter intelligence requirements...",
                placeholder_operations: "Enter operations overlay details...",
                placeholder_fires: "Enter fire support plan...",
                placeholder_protection: "Enter protection measures...",
                placeholder_sustainment_plan: "Enter sustainment plan...",
                placeholder_engineer: "Enter engineer tasks...",
                placeholder_signal: "Enter signal plan...",
                placeholder_cema: "Enter cyber/electronic warfare operations plan...",
                placeholder_info_collection: "Enter information collection plan...",
                placeholder_misc_annexes: "Enter additional annexes as required (e.g., Annex P - Host Nation Support, Annex S - Special Technical Operations, etc.)...",

                // Section headers
                annexes_fm60_structure: "Annexes (FM 6-0 Structure)",

                // Snippets translations
                snippets_library: "OPORD Snippets Library",
                mission_statement_templates: "Mission Statement Templates",
                section3_execution_snippets: "Section 3: Execution Snippets",
                section4_sustainment_snippets: "Section 4: Sustainment Snippets",
                annexh_signal_snippets: "Annex H: Signal Snippets",
                annexa_task_organization_snippets: "Annex A: Task Organization",
                annexd_fires_snippets: "Annex D: Fires",
                custom_snippets: "Custom Snippets",
                manage_snippets: "Manage Snippets",
                clear_draft: "Clear Draft",
                donate: "Support Development",
                donate_desc: "Help Keep This Tool Free",
                donate_title: "Support Development",
                donate_subtitle: "Help Keep This Military Planning Tool Free",
                donate_description: "This OPORD tool is developed and maintained by military professionals for the military community. Your support helps us continue improving this free resource with new features, better accuracy, and enhanced functionality for military planning operations.",
                donate_development: "Continuous Development",
                donate_costs: "Server & API Costs",
                donate_community: "Community Support",
                donate_card_title: "Credit/Debit Card",
                donate_card_desc: "Secure payment processing via PayPal",
                donate_paypal: "PayPal Donation",
                donate_secure: "Secure SSL encrypted transactions",
                donate_crypto_title: "Cryptocurrency",
                donate_crypto_desc: "Direct crypto donations - no fees, maximum impact",
                donate_copy: "Copy",
                donate_btc_copied: "Bitcoin address copied!",
                donate_eth_copied: "Ethereum address copied!",
                donate_sol_copied: "Solana address copied!",
                donate_verify: "Always verify addresses before sending",
                donate_thanks_title: "Thank You for Your Support!",
                donate_thanks_desc: "Every donation, no matter the size, helps us maintain and improve this tool for the military community. Your support ensures we can continue providing accurate, up-to-date military planning resources completely free of charge.",
                donate_by_military: "Developed by military professionals, for military professionals",
                donate_contact_title: "Questions or Suggestions?",
                donate_contact_desc: "Have ideas for new features or found a bug? We'd love to hear from you!",
                donate_contact_btn: "Contact Development Team",
                feedback_name_label: "Name (Optional):",
                feedback_name_placeholder: "Your name",
                feedback_message_label: "Message:",
                feedback_message_placeholder: "Share your ideas, report bugs, or ask questions...",
                send_feedback: "Send Feedback",
                sending_feedback: "Sending...",
                feedback_alternative: "Or use our Google Form:",
                open_google_form: "Open Google Form",
                feedback_type_label: "Feedback Type:",
                feedback_improvements: "Improvements",
                feedback_sustains: "Sustains (What's working well)",
                feedback_bugs: "Bugs and Errors",
                feedback_contact_label: "Contact Info (Optional):",
                feedback_contact_placeholder: "Email or other contact info (optional)",
                feedback_form_description: "Share your feedback, suggestions, or report bugs using our Google Form.",
                feedback_categories_title: "Feedback Categories:",
                feedback_sustains_desc: "What did you like?",
                feedback_improvements_desc: "What did you not like?",
                feedback_bugs_desc: "Bug reports or feature requests",
                feedback_contact_desc: "Optional contact information",
                feedback_form_security: "Opens in a new tab • Completely secure • No login required",
                open_feedback_form: "Open Feedback Form",
                donate_qr_scan: "Or scan PayPal QR code:",
                donate_qr_mobile: "Scan with mobile device for quick donation",
                donate_qr_scan_crypto: "Scan to send",
                donate_paypal_btn: "Donate with PayPal",
                donate_paypal_secure: "Secure & Fast",
                donate_cards_accepted: "Accepted Payment Methods:",
                disclaimer_text: "This product is a training aid and is not endorsed by the United States Army or the Department of Defense. Use at your own discretion. Do Not Input Classified Materials.",
                user_manual: "User Manual",
                text_templates: "Text Templates",
                reset_all: "Reset All",

                // Time Display
                military_time_ref: "Military Time Reference",
                zulu_utc: "Zulu (UTC)",
                eastern_us: "Eastern US",
                beijing_china: "Beijing China",
                moscow_russia: "Moscow Russia",
                hawaii_usa: "Hawaii USA",
                seoul_korea: "Seoul Korea",
                local_time: "Local Time",

                // Section 1 - Situation
                situation: "1. Situation",
                situation_desc: "Provide a comprehensive overview of the operational environment for Large Scale Combat Operations (LSCO).",
                enemy_forces: "Enemy Forces",
                friendly_forces: "Friendly Forces",
                environment: "Environment",
                composition_disposition: "Composition & Disposition:",
                composition_desc: "Detail enemy unit structure, locations, and strength estimates",
                capabilities: "Capabilities:",
                capabilities_desc: "Include multi-domain threats (cyber, EW, air defense, artillery)",
                mlcoa: "Most Likely COA (MLCOA):",
                mlcoa_desc: "Primary enemy course of action",
                mdcoa: "Most Dangerous COA (MDCOA):",
                mdcoa_desc: "Worst-case enemy scenario",
                recent_activities: "Recent Activities:",
                recent_desc: "Intelligence updates and enemy patterns",
                higher_hq: "Higher HQ Mission:",
                higher_desc: "Two levels up mission and intent",
                adjacent_units: "Adjacent Units:",
                adjacent_desc: "Left, right, and supporting unit missions",
                supporting_elements: "Supporting Elements:",
                supporting_desc: "Artillery, air support, engineers, etc.",
                boundaries: "Boundaries:",
                boundaries_desc: "Unit area of operations and control measures",
                oakoc_analysis: "OAKOC Analysis:",
                observation_fires: "Observation & Fields of Fire:",
                observation_desc: "Visibility and engagement areas",
                avenues_approach: "Avenues of Approach:",
                avenues_desc: "Enemy and friendly mobility corridors",
                key_terrain: "Key Terrain:",
                key_terrain_desc: "Decisive terrain features",
                obstacles: "Obstacles:",
                obstacles_desc: "Natural and man-made barriers",
                cover_concealment: "Cover & Concealment:",
                cover_desc: "Protection from observation/fires",

                // Section 2 - Mission
                mission: "2. Mission",
                mission_desc: "State the unit essential task and purpose in a single, clear, concise sentence.",
                five_ws_framework: "The Five Ws Framework",
                who: "Who",
                who_desc: "Your unit designation",
                what: "What",
                what_desc: "Tactical task verb",
                when: "When",
                when_desc: "NLT Date-Time Group",
                where: "Where",
                where_desc: "Objective or location",
                why: "Why",
                why_desc: "Purpose linking to higher intent",
                mission_format: "Mission Format",
                mission_template: "[Unit] [Task] [Objective] [NLT DTG] in order to [Purpose]",

                // Section 3 - Execution
                execution: "3. EXECUTION",
                execution_desc: "Describe how the unit will accomplish the mission. This is the heart of the OPORD and provides subordinates with the essential information needed for successful execution.",

                // Execution Subsections
                commanders_intent: "a. Commander's Intent",
                commanders_intent_desc: "Describe the purpose of the operation, key tasks, and end state according to FM 6-0 standards.",
                concept_operations: "b. Concept of Operations",
                concept_operations_desc: "Describe how the unit will accomplish the mission, including sequence of actions and main effort.",
                tasks_subordinate_units: "c. Tasks to Subordinate Units",
                tasks_subordinate_desc: "Assign specific tasks to subordinate units (Corps to Platoon level). Format per FM 6-0 guidelines.",
                tasks_staff: "d. Tasks to Staff",
                tasks_staff_desc: "Specify staff-specific tasks and responsibilities during the operation.",

                // Placeholders
                placeholder_commanders_intent: "Purpose: [Why this operation is being conducted]\nKey Tasks: [Essential tasks that must be accomplished]\nEnd State: [Desired conditions when operation is complete]",
                placeholder_concept_operations: "Sequence of Actions: [How the operation will unfold]\nMain Effort: [Primary focus of the operation]\nSupporting Efforts: [How other elements support the main effort]",
                placeholder_tasks_subordinate: "1st PLT: \n2nd PLT: \n3rd PLT: \nWeapons Squad: \nSupport Elements: \n\n[Add additional units as required]",
                placeholder_tasks_staff: "S-1: [Personnel tasks]\nS-2: [Intelligence tasks]\nS-3: [Operations tasks]\nS-4: [Logistics tasks]\nS-6: [Communications tasks]",

                // Dynamic Unit Management
                add_unit_btn: "Add Unit",
                remove_unit_btn: "Remove",
                select_unit_placeholder: "Select Unit",
                custom_unit_option: "Custom...",
                custom_unit_placeholder: "Custom unit",
                unit_task_placeholder: "Enter task assignment...",

                // Military Unit Types
                unit_1st_div: "1st DIV",
                unit_2nd_div: "2nd DIV",
                unit_3rd_div: "3rd DIV",
                unit_4th_div: "4th DIV",
                unit_5th_div: "5th DIV",
                unit_1st_bde: "1st BDE",
                unit_2nd_bde: "2nd BDE",
                unit_3rd_bde: "3rd BDE",
                unit_4th_bde: "4th BDE",
                unit_5th_bde: "5th BDE",
                unit_alpha_company: "Alpha Company",
                unit_bravo_company: "Bravo Company",
                unit_charlie_company: "Charlie Company",
                unit_delta_company: "Delta Company",
                unit_1st_plt: "1st PLT",
                unit_2nd_plt: "2nd PLT",
                unit_3rd_plt: "3rd PLT",
                unit_4th_plt: "4th PLT",
                unit_weapons_squad: "Weapons Squad",
                unit_support_squad: "Support Squad",
                unit_hq_element: "HQ Element",
                unit_artillery: "Artillery",
                unit_engineers: "Engineers",
                unit_medical: "Medical",
                unit_supply: "Supply",
                unit_maintenance: "Maintenance",
                commander_intent: "Commander Intent",
                purpose: "Purpose:",
                purpose_desc: "Why the operation is being conducted",
                key_tasks: "Key Tasks:",
                key_tasks_desc: "Essential tasks that must be accomplished",
                end_state: "End State:",
                end_state_desc: "Desired conditions when operation concludes",
                concept_operations: "Concept of Operations",
                scheme_maneuver: "Scheme of Maneuver:",
                scheme_desc: "How forces will be arranged and employed",
                main_effort: "Main Effort:",
                main_effort_desc: "Unit or activity that commander prioritizes",
                supporting_effort: "Supporting Effort:",
                supporting_desc: "Units that assist the main effort",
                reserve: "Reserve:",
                reserve_desc: "Forces held back for contingencies",

                // Section 4 - Sustainment
                sustainment: "4. Sustainment",
                sustainment_desc: "Address logistics, personnel services, and health service support required for the operation.",
                logistics: "Logistics",
                personnel_services: "Personnel Services",
                health_service: "Health Service Support",
                supply: "Supply:",
                supply_desc: "Classes of supply and distribution methods",
                maintenance: "Maintenance:",
                maintenance_desc: "Equipment maintenance and recovery procedures",
                transportation: "Transportation:",
                transport_desc: "Movement of personnel, equipment, and supplies",
                field_services: "Field Services:",
                field_desc: "Mortuary affairs, legal support, financial management",

                // Section 5 - Command & Signal
                command_signal: "5. Command & Signal",
                command_signal_desc: "Establish command relationships and communication procedures for the operation.",
                command: "Command",
                signal: "Signal",
                command_relationships: "Command Relationships:",
                command_rel_desc: "Chain of command and succession",
                control_measures: "Control Measures:",
                control_desc: "Boundaries, checkpoints, and coordination measures",
                reports: "Reports:",
                reports_desc: "Required reports and reporting procedures",

                // Annexes Content
                annex_a: "Annex A: Task Organization",
                annex_a_desc: "Detailed unit structure, attachments, and task assignments for the operation.",
                annex_b: "Annex B: Intelligence",
                annex_b_desc: "Intelligence preparation of the battlefield, enemy analysis, and collection requirements.",
                annex_c: "Annex C: Operations",
                annex_c_desc: "Detailed tactical plan with graphics, overlays, and operational procedures.",
                annex_d: "Annex D: Fires",
                annex_d_desc: "Fire support plan, target lists, FSCMs, artillery tasks, and air support.",
                annex_e: "Annex E: Protection",
                annex_e_desc: "Air defense, survivability, OPSEC, personnel recovery, and ROE.",
                annex_f: "Annex F: Sustainment",
                annex_f_desc: "Comprehensive logistics, personnel, and health service support plans.",
                annex_g: "Annex G: Engineer",
                annex_g_desc: "Engineer tasks for mobility, countermobility, and survivability.",
                annex_h: "Annex H: Signal",
                annex_h_desc: "Detailed communications plan, frequencies, call signs, and PACE plans.",
                annex_k: "Annex K: CEMA",
                annex_k_desc: "Cyber/Electronic Warfare and Electromagnetic Activities operations plan.",
                annex_l: "Annex L: Information Collection",
                annex_l_desc: "Information collection plan linking PIRs to collection assets and tasks.",
                misc_annexes: "Miscellaneous Annexes",
                misc_desc: "Additional annexes as required for mission-specific needs.",

                // Buttons and Actions
                generate_opord: "Generate OPORD",
                save_draft: "Save Draft",
                map_weather: "Map & Weather",
                snippets: "Snippets",
                mission_builder: "Mission Statement Builder",
                complete_mission_statement: "Complete Mission Statement",
                auto_generate: "Auto-Generate from 5 Ws",

                // Draft OPORD Section
                generate_complete_opord: "Generate Your Complete OPORD",
                generate_opord_description: "Ready to create your professional military operation order? Choose your preferred format and generate a complete, formatted OPORD with all sections and annexes.",
                all_formats_include: "All formats include complete OPORD structure with annexes per FM 6-0 standards.",

                // Draft Form Placeholders
                placeholder_situation: "Enter situation details...",
                placeholder_mission: "Enter mission statement...",
                placeholder_execution: "Enter execution details...",
                placeholder_sustainment: "Enter sustainment details...",
                placeholder_command: "Enter command and signal details...",
                placeholder_coordinates: "Enter key locations with coordinates (e.g., OBJ ALPHA: 18TWL8396007523, CP BRAVO: 44R 206915 3009291)",
                placeholder_task_org: "Enter task organization...",
                placeholder_intelligence: "Enter intelligence requirements...",
                placeholder_operations: "Enter operations overlay details...",
                placeholder_fires: "Enter fire support plan...",
                placeholder_protection: "Enter protection measures...",
                placeholder_sustainment_annex: "Enter sustainment plan...",
                placeholder_engineer: "Enter engineer tasks...",
                placeholder_signal: "Enter signal plan...",
                placeholder_cema: "Enter cyber/electronic warfare operations plan...",
                placeholder_info_collection: "Enter information collection plan...",
                placeholder_misc_annexes: "Enter additional annexes as required (e.g., Annex P - Host Nation Support, Annex S - Special Technical Operations, etc.)...",

                // Draft Form Labels
                key_locations_coordinates: "Key Locations & Coordinates",

                // Mapping Interface
                enhanced_map_weather: "Enhanced Map & Weather Integration",
                enter_coordinates: "Enter Coordinates",
                coordinate_system: "Coordinate System",
                weather_units: "Weather Units",
                execute_search: "Execute Search",
                search_location: "Search Location",
                tactical_map_interface: "Tactical Map Interface",
                enter_coords_above: "Enter coordinates above and click \"Search Location\"",
                add_marker: "Add Marker",
                saved_locations: "Saved Locations",
                save_current: "Save Current",
                coordinate_tools: "Coordinate Tools",
                add_to_opord: "Add to OPORD",
                convert_format: "Convert Format",
                copy_to_clipboard: "Copy to Clipboard",
                clear_saved: "Clear Saved",
                no_saved_locations: "No saved locations yet. Use \"Save Current\" to add locations.",
                weather_information: "Weather Information",
                current_weather: "Current Weather",
                forecast_3day: "3-Day Forecast",
                imperial_units: "Imperial (°F)",
                metric_units: "Metric (°C)",

                // Mapping Buttons and Actions
                insert_current_location: "Insert Current Map Location",
                insert_saved_locations: "Insert Saved Locations",

                // Distance Calculator
                distance_calculator: "Distance Calculator",
                point_a_coordinates: "Point A Coordinates",
                point_b_coordinates: "Point B Coordinates",
                calculate_distance: "Calculate Distance",

                // Coordinate Placeholders
                coord_placeholder_mgrs: "e.g., 32S 0123456 1234567",
                coord_placeholder_utm: "e.g., 32N 123456 1234567",
                coord_placeholder_latlon: "e.g., 40.7128, -74.0060",

                // Weather and Tactical Data
                temperature: "Temperature",
                visibility: "Visibility",
                wind: "Wind",
                conditions: "Conditions",
                tactical_data: "Tactical Data",
                bmnt: "BMNT",
                eent: "EENT",
                moon_phase: "Moon Phase",
                sunrise: "Sunrise",
                forecast_today: "Today",
                forecast_tomorrow: "Tomorrow",
                forecast_day3: "Day 3",

                // Saved Location Names
                statue_of_liberty: "STATUE OF LIBERTY",
                sydney_opera_house: "SYDNEY OPERA HOUSE",
                eiffel_tower: "EIFFEL TOWER, FRANCE",
                taj_mahal: "TAJ MAHAL, INDIA",
                statue_of_liberty_usa: "STATUE OF LIBERTY, USA",
                taj_mahal_india: "TAJ MAHAL, INDIA",

                // Map Layer Names
                geoapify_street: "Geoapify Street",
                geoapify_carto: "Geoapify Carto",
                geoapify_liberty: "Geoapify Liberty",
                esri_satellite: "ESRI Satellite",

                // Example OPORD
                complete_example_opord: "Complete Example OPORD",
                classification: "[CLASSIFICATION]",
                operation_order: "OPERATION ORDER",
                battalion_ranger: "2ND BATTALION, 75TH RANGER REGIMENT",

                // Help Guide
                getting_started: "Getting Started",
                coordinate_systems: "Coordinate Systems",
                weather_integration: "Weather Integration",
                opord_structure: "OPORD Structure",
                welcome_msg: "Welcome to the Professional LSCO OPORD Tool",
                welcome_desc: "This comprehensive tool assists military planners in creating detailed Operation Orders for Large Scale Combat Operations.",
                key_features: "Key Features",
                feature_comprehensive: "Comprehensive OPORD structure following FM 6-0",
                feature_lsco: "LSCO-specific considerations and examples",
                feature_annexes: "Complete annex templates (A through L)",
                feature_export: "Multiple export formats (TXT, DOCX, PDF)",
                feature_mapping: "Integrated mapping and weather tools",
                coordinate_intro: "The tool supports multiple coordinate systems for precise military planning:",
                lat_lon_system: "Latitude/Longitude (Decimal Degrees)",
                lat_lon_desc: "Standard geographic coordinates using decimal degrees format",
                utm_system: "Universal Transverse Mercator (UTM)",
                utm_desc: "Military grid reference system with zone, easting, and northing",
                mgrs_system: "Military Grid Reference System (MGRS)",
                mgrs_desc: "NATO standard military coordinate system",
                weather_intro: "Real-time weather integration provides:",
                current_conditions: "Current weather conditions",
                forecast_3day: "3-day weather forecast",
                tactical_weather: "Tactical weather considerations",
                opord_intro: "The OPORD follows the standard 5-paragraph format:",

                // Common Terms
                includes: "Includes:",
                example_content: "Example Content",
                placeholder_enter: "Enter",
                details: "details",
                plan: "plan",
                requirements: "requirements",
                measures: "measures",
                tasks: "tasks",
                support: "support",
                example: "Example:",
                key_components: "Key Components",

                // Section 3 - Execution Additional
                tasks_subordinate: "Tasks to Subordinate Units",
                essential_tasks: "Essential Tasks:",
                essential_tasks_desc: "Specific tasks each subordinate unit must accomplish",
                task_organization: "Task Organization:",
                task_org_desc: "How units are organized for the operation",
                control_measures_exec: "Control Measures:",
                control_measures_exec_desc: "Boundaries, phase lines, checkpoints, objectives",
                coordinating_instructions: "Coordinating Instructions",
                fire_support_concept: "Fire Support Concept:",
                fire_support_desc: "Integration of fires with maneuver",
                phases_operation: "Phases of Operation:",
                phases_desc: "Logical sequence of activities",
                supporting_effort: "Supporting Effort:",
                supporting_effort_desc: "Units that assist the main effort",

                // Section 4 - Sustainment Additional
                human_resources: "Human Resources:",
                financial_mgmt: "Financial Management:",
                legal_religious: "Legal/Religious:",
                medical_treatment: "Medical Treatment:",
                medical_evacuation: "Medical Evacuation:",
                preventive_medicine: "Preventive Medicine:",
                lsco_sustainment: "LSCO Sustainment Considerations",
                high_consumption: "High Consumption Items:",
                sustainment_challenges: "Sustainment Challenges:",

                // Section 5 - Command & Signal Additional
                communication_systems: "Communication Systems:",
                network_operations: "Network Operations:",
                signal_operating: "Signal Operating Instructions:",
                lsco_c2: "LSCO C2 Considerations",
                communication_challenges: "Communication Challenges",

                // Examples
                example_execution: "Example: Execution Paragraph",
                example_sustainment: "Example: Sustainment Paragraph",
                example_command: "Example: Command and Signal Paragraph",

                // Example Content - Command and Signal
                example_cmd_header: "5. COMMAND AND SIGNAL.",
                example_cmd_command: "a. Command.",
                example_cmd_command_text: "Commander located with A Co during Phase 1, displaces to OBJ BRAVO during Phase 2. Succession of command: XO, S-3, A Co CDR. Main CP located vic grid AB567890, TAC CP displaces with main effort. Command relationships: A Co and B Co OPCON to 1-32 IN, C Co (3-7 CAV) TACON for reconnaissance missions. Decision points: DP 1 (H+2) - commit reserve if A Co cannot breach obstacles, DP 2 (H+6) - exploit success or consolidate positions.",
                example_cmd_signal: "b. Signal.",
                example_cmd_signal_text: "Primary frequencies: Command Net 54.000 MHz, Admin/Log Net 57.000 MHz, Fire Support Net 60.000 MHz. Alternate frequencies: Command Net 45.000 MHz. Call signs: STEEL 6 (CDR), STEEL 7 (XO), STEEL 3 (S-3), STEEL 1-6 (A Co CDR). Authentication: Challenge and password per current SOI. Communication windows: Hourly SITREP at 30 minutes past each hour. Emergency procedures: Any station may break radio silence for MEDEVAC or immediate threat.",

                // Example Content - Execution
                example_exec_header: "3. EXECUTION.",
                example_exec_intent: "a. Commander Intent.",
                example_exec_intent_text: "Purpose: Seize OBJ BRAVO to enable 2nd BCT passage of lines and continuation of division attack. Method: 1-32 IN conducts deliberate attack in two phases - Phase 1: Breach enemy obstacles and seize HILL 405, Phase 2: Exploit success and secure OBJ BRAVO. Main effort shifts from A Co (Phase 1) to B Co (Phase 2). End State: OBJ BRAVO secured, enemy destroyed or withdrawn, 2nd BCT passage lanes established and marked.",
                example_exec_concept: "b. Concept of Operations.",
                example_exec_concept_text: "1-32 IN attacks in zone from AA TIGER to OBJ BRAVO. Phase 1 (H-Hour to H+4): A Co (Main Effort) breaches MINEFIELD X and seizes HILL 405. B Co supports by fire from BP ALPHA. C Co (Reserve) prepared to exploit or reinforce. Phase 2 (H+4 to H+8): B Co (Main Effort) passes through A Co and seizes OBJ BRAVO. A Co consolidates on HILL 405 and provides overwatch.",
                example_exec_tasks: "c. Tasks to Subordinate Units.",
                example_exec_tasks_text: "A Co: Breach MINEFIELD X NLT H+2, seize and secure HILL 405 NLT H+4, be prepared to support B Co advance. B Co: Support A Co by fire from BP ALPHA until H+4, pass through A Co and seize OBJ BRAVO NLT H+8. C Co: Reserve, be prepared to reinforce A Co or exploit B Co success, maintain 30-minute readiness.",

                // Example Content - Sustainment
                example_sust_header: "4. SUSTAINMENT.",
                example_sust_logistics: "a. Logistics.",
                example_sust_logistics_text: "Supply: Class I and III resupply conducted daily at 1800Z at LOGPAC site vic grid AB345678. Class V resupply on order, emergency resupply available within 2 hours. Maintenance: A/3-7 FSB provides DS maintenance support. Unit maintenance teams co-located with maneuver companies. Recovery assets positioned at TAA CHARLIE. Transportation: MSR GOLD designated primary supply route, MSR SILVER alternate. Distribution points established at grid AB234567.",
                example_sust_personnel: "b. Personnel.",
                example_sust_personnel_text: "Human Resources: Casualty reporting IAW unit SOP, replacement personnel integrated at company level. S-1 maintains personnel accountability. Financial Management: Emergency pay available through S-1. Legal Support: 1st BCT SJA provides legal support as required. Religious Support: Chaplain available for religious services and counseling.",
                example_sust_medical: "c. Health Service Support.",
                example_sust_medical_text: "Medical Treatment: Company medics provide Role 1 care. B/3-7 FSB provides Role 2 care at BAS vic grid AB456789. Medical Evacuation: Ground MEDEVAC through 3-7 FSB, air MEDEVAC available with 15-minute response time. Preventive Medicine: Water testing conducted daily, combat stress control team available on request.",

                // Manage Annexes Content
                annexes_intro: "Learn about FM 6-0 annexes and their proper usage. Each annex provides specialized information to support the main OPORD. Use the \"Draft Your OPORD\" section to actually create your annexes.",
                fm60_structure: "FM 6-0 Annex Structure",
                fm60_structure_desc: "The following annexes follow current FM 6-0 doctrine. Not all annexes are required for every operation - include only those relevant to your mission.",
                purpose: "Purpose:",
                includes: "Includes:",
                example_content: "Example Content",
                key_components: "Key Components",
                how_to_use: "How to Use These Annexes",
                how_to_use_desc: "These descriptions and examples are for reference and learning. To actually create your annexes, use the \"Draft Your OPORD\" section where you can input your specific annex content and generate complete OPORD documents.",

                // Annex Descriptions
                annex_a_desc: "Detailed unit structure, attachments, and task assignments for the operation.",
                annex_b_desc: "Intelligence preparation of the battlefield, enemy analysis, and collection requirements.",
                annex_c_desc: "Detailed tactical plan with graphics, overlays, and operational procedures.",
                annex_d_desc: "Fire support plan, target lists, FSCMs, artillery tasks, and air support.",
                annex_e_desc: "Air defense, survivability, OPSEC, personnel recovery, and ROE.",
                annex_f_desc: "Comprehensive logistics, personnel, and health service support plans.",
                annex_g_desc: "Engineer tasks for mobility, countermobility, and survivability.",
                annex_h_desc: "Detailed communications plan, frequencies, call signs, and PACE plans.",
                annex_k_desc: "Cyber/Electronic Warfare and Electromagnetic Activities operations plan.",
                annex_l_desc: "Information collection plan linking PIRs to collection assets and tasks.",
                misc_annexes: "Miscellaneous Annexes",
                misc_desc: "Additional annexes as required for mission-specific needs.",

                // Annex Purpose and Includes Content
                annex_a_purpose: "Details the allocation of forces and command relationships for the operation.",
                annex_a_includes: "Unit task organization, attachments, detachments, and command relationships (OPCON, TACON, DS, etc.)",
                annex_b_purpose: "Provides detailed enemy analysis and intelligence collection plan.",
                annex_b_includes: "PIR, collection assets, enemy SITTEMP, intelligence products, and dissemination procedures",
                annex_c_purpose: "Contains the operations overlay and detailed scheme of maneuver.",
                annex_c_includes: "Graphic depiction of the plan, control measures, phase lines, objectives, and boundaries",
                annex_d_purpose: "Provides detailed fire support coordination and planning for the operation.",
                annex_d_includes: "Fire support coordination measures, target lists, artillery tasks, air support requests, and fire support execution matrix",
                annex_e_purpose: "Details protection measures to preserve combat power and ensure mission success.",
                annex_e_includes: "Air defense plan, survivability measures, OPSEC procedures, personnel recovery, ROE, and force protection measures",
                annex_f_purpose: "Provides detailed sustainment planning to maintain combat effectiveness throughout the operation.",
                annex_f_includes: "Logistics (classes of supply), personnel services, health service support, maintenance, and distribution plans",
                annex_g_purpose: "Details engineer support to enhance mobility, deny enemy mobility, and improve survivability.",
                annex_g_includes: "Mobility operations, countermobility measures, survivability construction, general engineering, and geospatial support",
                annex_h_purpose: "Provides comprehensive communications and information systems support for command and control.",
                annex_h_includes: "PACE plans, frequency assignments, call signs, EMCON procedures, and network operations",
                annex_k_purpose: "Details cyber operations, electronic warfare, and electromagnetic spectrum management for the operation.",
                annex_k_includes: "Cyber operations plan, EW targets, spectrum management, EMCON procedures, and defensive cyber measures",
                annex_l_purpose: "Details the information collection plan to support decision-making and situational awareness.",
                annex_l_includes: "Priority Intelligence Requirements (PIR), collection assets, information flow procedures, and reporting timelines",

                // Annex H Example Content
                signal_plan: "1. Signal Plan:",
                pace_plan_example: "a. PACE Plan: Primary (FM), Alternate (SATCOM), Contingency (HF), Emergency (Visual)",
                frequencies_example: "b. Frequencies: Command Net 54.000 MHz, Admin/Log 46.000 MHz",
                call_signs_example: "c. Call Signs: STEEL 6 (CDR), STEEL 7 (XO), STEEL 3 (S3)",
                emcon_example: "d. EMCON: Level III until H-Hour, then Level II",
                network_ops_example: "e. Network Operations: SIPR/NIPR connectivity, cyber defense",

                // Coordinating Instructions
                time_sequence: "Time and sequence of events",
                rules_engagement: "Rules of engagement (ROE)",
                risk_mitigation: "Risk mitigation measures",
                rehearsal_guidance: "Rehearsal guidance",
                contingency_plans: "Contingency plans",

                // Human Resources
                casualty_reporting: "Casualty reporting",
                replacement_ops: "Replacement operations",
                personnel_accountability: "Personnel accountability",

                // Financial Management
                pay_operations: "Pay operations",
                contracting_support: "Contracting support",
                resource_management: "Resource management",

                // Legal/Religious
                legal_support: "Legal support",
                religious_services: "Religious services",
                morale_support: "Morale support",

                // Medical Treatment
                role_1_unit: "Role 1 (Unit level)",
                role_2_forward: "Role 2 (Forward support)",
                triage_procedures: "Triage procedures",

                // Medical Evacuation
                medevac_procedures: "MEDEVAC procedures",
                casualty_collection: "Casualty collection",
                evacuation_routes: "Evacuation routes",

                // Preventive Medicine
                disease_prevention: "Disease prevention",
                environmental_health: "Environmental health",
                combat_stress_control: "Combat stress control",

                // Communication Systems
                primary_alternate_freq: "Primary and alternate frequencies",
                call_signs_auth: "Call signs and authentication",
                communication_windows: "Communication windows",

                // Network Operations
                digital_comm_systems: "Digital communication systems",
                network_security_protocols: "Network security protocols",
                cyber_defense_measures: "Cyber defense measures",

                // Signal Operating Instructions
                communication_procedures: "Communication procedures",
                emergency_procedures: "Emergency procedures",
                comsec_requirements: "COMSEC requirements",

                // LSCO C2 Considerations
                redundant_comm_systems: "Redundant communication systems",
                ew_countermeasures: "Electronic warfare countermeasures",
                distributed_command_posts: "Distributed command posts",
                mission_command_philosophy: "Mission command philosophy",
                rapid_decision_making: "Rapid decision-making processes",

                // Communication Challenges
                enemy_electronic_warfare: "Enemy electronic warfare",
                degraded_comm_environments: "Degraded communication environments",
                extended_comm_ranges: "Extended communication ranges",
                interoperability_requirements: "Interoperability requirements",
                cyber_threats_networks: "Cyber threats to networks",

                // Annex G (Engineer) Example Content
                engineer_tasks: "1. Engineer Tasks:",
                mobility_example: "a. Mobility: Clear MINEFIELD X by H+2, breach operations",
                countermobility_example: "b. Countermobility: Emplace obstacles on PL SILVER, deny routes",
                survivability_example: "c. Survivability: Construct fighting positions, protective positions",
                supporting_unit_example: "d. Supporting Unit: A Co, 3-7 EN (DS to TF)",
                general_engineering_example: "e. General Engineering: Route maintenance, utilities",

                // Annex A (Task Organization) Example Content
                task_organization_plan: "1. Task Organization:",
                main_effort_example: "a. Main Effort: A Co, 1-32 IN",
                supporting_effort_example: "b. Supporting Effort: B Co, 1-32 IN",
                reserve_example: "c. Reserve: C Co, 1-32 IN",
                attachments_example: "d. Attachments: 1st PLT, A Co, 3-7 CAV (OPCON)",

                // Annex B (Intelligence) Key Components
                pir_requirements: "Priority Intelligence Requirements (PIR)",
                collection_plan_assets: "Collection Plan and Assets",
                enemy_sittemp: "Enemy Situation Template (SITTEMP)",
                intel_products_dissem: "Intelligence Products and Dissemination",

                // Annex E (Protection) Example Content
                protection_measures: "1. Protection Measures:",
                air_defense_example: "a. Air Defense: Weapon Control Status WEAPONS TIGHT",
                opsec_example: "b. OPSEC: Emission control, camouflage discipline",
                personnel_recovery_example: "c. Personnel Recovery: CSAR procedures, isolated personnel",
                roe_example: "d. ROE: Rules of Engagement per current directive",
                survivability_example_detailed: "e. Survivability: Fighting positions, overhead cover",

                // Annex F (Sustainment) Example Content
                sustainment_plan: "1. Sustainment Plan:",
                class_resupply_example: "a. Class I/III resupply: Daily at 1800Z at LOG PAD",
                class_v_example: "b. Class V: On order, 2-hour emergency resupply",
                maintenance_example: "c. Maintenance: DS support from FSB, collection points",
                medical_example: "d. Medical: Role 1/2 care, MEDEVAC procedures, CCP locations",
                personnel_example: "e. Personnel: Replacement operations, casualty reporting",

                // Annex K (CEMA) Example Content
                cema_operations: "1. CEMA Operations:",
                cyber_ops_example: "a. Cyber Operations: Network defense, offensive cyber",
                electronic_warfare_example: "b. Electronic Warfare: Jamming, SIGINT, COMINT",
                spectrum_mgmt_example: "c. Spectrum Management: Frequency deconfliction",
                emcon_example_detailed: "d. EMCON: Emission control procedures",
                defensive_measures_example: "e. Defensive Measures: Network security, OPSEC",

                // Annex L (Information Collection) Example Content
                info_collection_plan: "1. Information Collection Plan:",
                pir_1_example: "a. PIR 1: Enemy reserve locations and movement",
                pir_2_example: "b. PIR 2: Civilian evacuation status in AO",
                collection_assets_example: "c. Collection Assets: UAV, HUMINT, SIGINT",
                reporting_example: "d. Reporting: SALUTE reports every 2 hours",
                info_flow_example: "e. Information Flow: Collectors → S2 → CDR",

                // Miscellaneous Annexes Content
                misc_purpose: "Provides flexibility for mission-specific annexes not covered by standard A-L structure.",
                misc_examples: "Examples: Annex P (Host Nation Support), Annex S (Special Technical Operations), Annex M (Assessment), custom annexes",
                common_additional_annexes: "Common Additional Annexes",
                annex_p_desc: "Annex P (Host Nation Support): Local support coordination",
                annex_s_desc: "Annex S (Special Technical Operations): Specialized capabilities",
                annex_m_desc: "Annex M (Assessment): Mission assessment criteria",
                annex_r_desc: "Annex R (Reports): Reporting requirements and procedures",
                custom_annexes_desc: "Custom Annexes: Mission-specific requirements",

                // Example OPORD Content
                example_opord_classification: "[CLASSIFICATION]",
                example_opord_title: "OPERATION ORDER 20241215120000Z",
                example_opord_unit: "2nd Battalion, 75th Ranger Regiment",

                // Situation Section
                enemy_forces_header: "a. Enemy Forces:",
                enemy_forces_content: "Enemy company-sized element (120-150 personnel) occupying defensive positions in OBJECTIVE ALPHA. Enemy forces consist of mechanized infantry with supporting mortars and anti-tank weapons. Enemy has established observation posts on high ground and prepared fighting positions with interlocking fields of fire. Enemy morale assessed as moderate with limited night vision capabilities.",

                friendly_forces_header: "b. Friendly Forces:",
                friendly_forces_content: "1st Brigade Combat Team conducting supporting attack to the north. 3rd Battalion, 75th Rangers providing overwatch and fire support from the east. Aviation assets include 2x AH-64 Apache helicopters and 1x AC-130 gunship on station. Artillery support from 1-319th AFAR with priority of fires.",

                environment_header: "c. Environment:",
                environment_content: "Terrain: Rolling hills with scattered vegetation, elevation 200-400m. Weather: Clear skies, temperature 68°F, wind 5-10 mph from northwest. Visibility unlimited during daylight, 2km at night. BMNT: 0630Z, EENT: 1830Z. Moon phase: 25% waning crescent.",

                attachments_header: "d. Attachments/Detachments:",
                attachments_content: "Attached: 1x Forward Observer team, 1x Combat Engineer squad, 1x Military Working Dog team. Detached: None.",

                key_locations_header: "KEY LOCATIONS:",
                key_locations_content: "OBJ ALPHA: 32S 0123456 1234567 (MGRS)\nTAA BRAVO: 32S 0120000 1230000 (MGRS)\nPL CHARLIE: 32S 0121000 1232000 (MGRS)\nCP DELTA: 32S 0119000 1229000 (MGRS)",

                // Mission Section
                mission_content: "2nd Battalion, 75th Ranger Regiment attacks to seize OBJECTIVE ALPHA NLT 151800Z DEC 24 in order to destroy enemy defensive positions and secure key terrain for follow-on operations.",

                // Execution Section
                commanders_intent_header: "a. Commander's Intent:",
                commanders_intent_purpose: "Purpose: Destroy enemy defensive capability and secure key terrain.",
                commanders_intent_key_tasks: "Key Tasks: (1) Breach enemy defensive line, (2) Neutralize enemy strongpoints, (3) Secure OBJ ALPHA.",
                commanders_intent_end_state: "End State: Enemy forces destroyed or withdrawn, OBJ ALPHA secured, unit prepared for follow-on operations.",

                concept_ops_header: "b. Concept of Operations:",
                concept_ops_phase1: "Phase 1 (Movement): Units move from TAA BRAVO to assault positions under cover of darkness.",
                concept_ops_phase2: "Phase 2 (Assault): Coordinated attack with supporting fires to breach enemy positions.",
                concept_ops_phase3: "Phase 3 (Consolidation): Secure objective and prepare defensive positions.",

                tasks_subordinate_header: "c. Tasks to Subordinate Units:",
                tasks_alpha_company: "Alpha Company: Main effort. Attack along AXIS EAGLE to seize northern portion of OBJ ALPHA.",
                tasks_bravo_company: "Bravo Company: Supporting effort. Attack along AXIS FALCON to seize southern portion of OBJ ALPHA.",
                tasks_charlie_company: "Charlie Company: Battalion reserve. Prepared to exploit success or reinforce main effort.",

                coordinating_instructions_header: "d. Coordinating Instructions:",
                coordinating_h_hour: "• H-Hour: 151600Z DEC 24",
                coordinating_roe: "• ROE: Positive identification required before engagement",
                coordinating_ccir: "• CCIR: Enemy reinforcements, civilian presence, obstacle locations",
                coordinating_rehearsal: "• Rehearsal: 141400Z at TAA BRAVO",

                // Sustainment Section
                logistics_header: "a. Logistics:",
                logistics_content: "Class I: 3 days on hand. Class III: Fuel point at TAA BRAVO. Class V: Basic load plus 50% additional. Resupply via ground convoy at PL CHARLIE.",

                personnel_services_header: "b. Personnel Services:",
                personnel_services_content: "Replacement operations through S-1. EPW collection point at CP DELTA. Morale support via chaplain services.",

                health_service_header: "c. Health Service Support:",
                health_service_content: "Battalion Aid Station at CP DELTA. MEDEVAC LZ at TAA BRAVO. Priority: Urgent, Priority, Routine. 9-line procedures in effect.",

                // Command & Signal Section
                command_header: "a. Command:",
                command_content: "CP location: CP DELTA (32S 0119000 1229000). Succession of command: CO, XO, S-3, Alpha Company Commander.",

                control_header: "b. Control:",
                control_content: "Reports: SITREP every 30 minutes. SPOTREP as required. Checkpoints: Alpha, Bravo, Charlie established.",

                signal_header: "c. Signal:",
                signal_content: "Primary: FM radio net. Alternate: Satellite communications. Contingency: Visual signals. Emergency: Pyrotechnics. Frequencies: Command Net 45.000, Admin Net 46.000.",

                // Annexes Section
                annexes_header: "ANNEXES:",
                annex_a_desc_example: "Annex A (Task Organization): Detailed unit assignments and attachments",
                annex_b_desc_example: "Annex B (Intelligence): Enemy situation, terrain analysis, weather data",
                annex_c_desc_example: "Annex C (Operations): Detailed tactical plan and graphics overlay",
                annex_d_desc_example: "Annex D (Fires): Artillery and close air support plan",
                annex_e_desc_example: "Annex E (Protection): Force protection and CBRN measures",
                annex_f_desc_example: "Annex F (Sustainment): Detailed logistics and medical support plan",
                annex_g_desc_example: "Annex G (Engineer): Obstacle reduction and mobility support",
                annex_h_desc_example: "Annex H (Signal): Communications plan and frequencies",

                // Example OPORD Notes
                example_opord_notes_header: "Example OPORD Notes",
                example_notes_purpose: "Purpose: This example demonstrates a complete OPORD structure following FM 6-0 standards.",
                example_notes_key_elements: "Key Elements: Notice the detailed enemy situation, clear mission statement, comprehensive execution plan, and complete sustainment considerations.",
                example_notes_coordinates: "Coordinates: All tactical graphics use MGRS coordinates for precision and standardization.",
                example_notes_classification: "Classification: Replace [CLASSIFICATION] with appropriate security markings for your network.",
                example_notes_customization: "Customization: Adapt this format and level of detail for your specific operational requirements.",

                // Annex C (Operations) Key Components
                operations_overlay: "Operations Overlay (Graphic)",
                scheme_maneuver_details: "Scheme of Maneuver Details",
                control_measures_boundaries: "Control Measures and Boundaries",
                phase_lines_objectives: "Phase Lines and Objectives",

                // Annex D (Fires) Example Content
                fire_support_coordination: "1. Fire Support Coordination:",
                supporting_units_example: "a. Supporting Units: 1-77 FA (DS), 2-8 FA (GSR)",
                priority_fires_example: "b. Priority of Fires: A Co (Main Effort)",
                fscl_example: "c. Fire Support Coordination Line (FSCL): PL BLUE",
                nfa_example: "d. No Fire Areas (NFA): Village KILO (AB234678)",
                target_list_example: "e. Target List: TGT AA1001 (Enemy CP), TGT AA1002 (Mortar Position)",

                // Help Guide Content
                help_navigation: "Navigation:",
                help_navigation_desc: "Use the sidebar tabs to access different sections",
                help_time_clocks: "Time Clocks:",
                help_time_desc: "Live Zulu, Eastern, Beijing, Moscow, Hawaii, Seoul, and Local time displays",
                help_copy_dtg: "Copy DTG:",
                help_copy_desc: "Click \"Copy Zulu DTG\" for military time format",
                help_shortcuts: "Keyboard Shortcuts:",
                help_shortcuts_desc: "Ctrl+S (save), Ctrl+H (help), Ctrl+M (map)",

                help_main_sections: "Main Sections:",
                help_situation_desc: "Enemy, friendly, environment (OAKOC), civil considerations",
                help_mission_desc: "Use 5 Ws framework (Who, What, When, Where, Why)",
                help_execution_desc: "Commander's intent, concept of operations, tasks",
                help_sustainment_desc: "Logistics, personnel, health service support",
                help_command_desc: "C2 relationships, communications",

                // Sidebar Navigation Descriptions
                sidebar_situation_desc: "Enemy, Friendly, Environment",
                sidebar_mission_desc: "Who, What, When, Where, Why",
                sidebar_execution_desc: "Intent, Concept, Tasks",
                sidebar_sustainment_desc: "Logistics, Personnel, Health",
                sidebar_command_desc: "C2, Communications",
                sidebar_annexes_desc: "A-H + Additional Annexes",
                sidebar_example_desc: "Complete Reference",
                sidebar_draft_desc: "Input & Generate",

                help_fm_annexes: "FM 6-0 Annexes:",
                help_annex_a_short: "Task Organization",
                help_annex_b_short: "Intelligence",
                help_annex_c_short: "Operations",
                help_annex_d_short: "Fires",
                help_annex_e_short: "Protection",
                help_annex_f_short: "Sustainment",
                help_annex_g_short: "Engineer",
                help_annex_h_short: "Signal",

                help_draft_system: "Using the Draft System",
                help_mission_builder: "Mission Builder:",
                help_mission_builder_desc: "Fill in the 5 Ws, then click \"Auto-Generate\" for proper format",
                help_section_input: "Section Input:",
                help_section_input_desc: "Use text areas for each OPORD section",
                help_annexes_desc: "Complete all 8 FM 6-0 annexes as needed",
                help_save_draft: "Save Draft:",
                help_save_draft_desc: "Automatically saves to local storage",
                help_export: "Export:",
                help_export_desc: "Downloads complete OPORD with all annexes",

                help_coordinate_input: "Coordinate Input:",
                help_coordinate_desc: "Enter MGRS, UTM, or Lat/Long coordinates",
                help_search_location: "Search Location:",
                help_search_desc: "Find and display location with weather data",
                help_add_markers: "Add Markers:",
                help_markers_desc: "Place tactical markers on objectives",
                help_convert_coords: "Convert Coordinates:",
                help_convert_desc: "Switch between coordinate systems",
                help_saved_locations: "Saved Locations:",
                help_saved_desc: "Save and manage custom locations",

                help_ref_coords: "Reference Coordinate Test Points:",
                help_taj_mahal: "Taj Mahal, India (UTM):",
                help_statue_liberty: "Statue of Liberty, NY (UTM):",
                help_eiffel_tower: "Eiffel Tower, France (MGRS):",
                help_sydney_opera: "Sydney Opera House, Australia (Lat/Long):",
                help_coords_note: "These coordinates are verified reference points for testing coordinate conversion accuracy.",

                help_lsco_considerations: "LSCO Considerations",
                help_multi_domain: "Multi-Domain Operations:",
                help_multi_domain_desc: "Consider cyber, EW, space threats",
                help_high_consumption: "High Consumption:",
                help_consumption_desc: "Plan for increased ammunition and fuel usage",
                help_contested_env: "Contested Environment:",
                help_contested_desc: "Assume degraded communications",
                help_mass_casualties: "Mass Casualties:",
                help_casualties_desc: "Plan for significant medical requirements",
                help_extended_ops: "Extended Operations:",
                help_extended_desc: "Consider sustainment over time",

                help_tips_success: "Tips for Success",
                help_start_mission: "Start with Mission:",
                help_start_desc: "Clear mission statement drives everything else",
                help_use_examples: "Use Examples:",
                help_examples_desc: "Click \"Example Content\" for guidance",
                help_be_specific: "Be Specific:",
                help_specific_desc: "Include grid coordinates, times, and unit designations",
                help_check_doctrine: "Check Doctrine:",
                help_doctrine_desc: "All content based on FM 6-0 standards",
                help_save_often: "Save Often:",
                help_save_often_desc: "Use Ctrl+S or click save buttons regularly",

                // LSCO Content - High Consumption Items
                ammo_precision: "Ammunition (especially precision munitions)",
                fuel_extended: "Fuel for extended operations",
                medical_mass_cas: "Medical supplies for mass casualties",
                repair_parts: "Repair parts for equipment degradation",

                // LSCO Content - Sustainment Challenges
                extended_supply: "Extended supply lines under threat",
                contested_logistics: "Contested logistics operations",
                increased_maintenance: "Increased maintenance requirements",
                mass_casualty_scenarios: "Mass casualty scenarios"
            },

            es: {
                // Header and Navigation
                opord_tool: "Herramienta OPORD",
                military_planning: "Asistente de Planificación Militar",
                copy_dtg: "Copiar DTG Zulu",
                menu: "Menú",
                opord_sections: "Secciones OPORD",

                // Tab Navigation
                help_guide: "Guía de Ayuda",
                example_opord: "Ejemplo OPORD",
                draft_opord: "Borrador OPORD",
                draft_opord_description: "Cree su OPORD con herramientas integradas de mapeo y clima. Use la herramienta de Mapa y Clima para obtener coordenadas y datos tácticos para su operación.",
                manage_annexes: "Gestionar Anexos",

                // Placeholder translations
                placeholder_unit_designation: "Designación de unidad",
                placeholder_tactical_task: "Tarea táctica",
                placeholder_nlt_dtg: "NLT DTG",
                placeholder_objective_location: "Objetivo/Ubicación",
                placeholder_purpose: "Propósito",
                placeholder_mission_statement: "[Unidad] [Tarea] [Objetivo] [NLT DTG] para [Propósito]",
                placeholder_situation: "Ingrese detalles de la situación...",
                placeholder_coordinates: "Ingrese ubicaciones clave con coordenadas (ej., OBJ ALPHA: 18TWL8396007523, CP BRAVO: 44R 206915 3009291)",
                placeholder_execution: "Ingrese detalles de ejecución...",
                placeholder_sustainment: "Ingrese detalles de sostenimiento...",
                placeholder_command: "Ingrese detalles de comando y señal...",
                placeholder_task_organization: "Ingrese organización de tareas...",
                placeholder_intelligence: "Ingrese requisitos de inteligencia...",
                placeholder_operations: "Ingrese detalles de superposición de operaciones...",
                placeholder_fires: "Ingrese plan de apoyo de fuego...",
                placeholder_protection: "Ingrese medidas de protección...",
                placeholder_sustainment_plan: "Ingrese plan de sostenimiento...",
                placeholder_engineer: "Ingrese tareas de ingenieros...",
                placeholder_signal: "Ingrese plan de señal...",
                placeholder_cema: "Ingrese plan de operaciones de guerra cibernética/electrónica...",
                placeholder_info_collection: "Ingrese plan de recolección de información...",
                placeholder_misc_annexes: "Ingrese anexos adicionales según se requiera (ej., Anexo P - Apoyo de Nación Anfitriona, Anexo S - Operaciones Técnicas Especiales, etc.)...",

                // Section headers
                annexes_fm60_structure: "Anexos (Estructura FM 6-0)",

                // Snippets translations
                snippets_library: "Biblioteca de Fragmentos OPORD",
                mission_statement_templates: "Plantillas de Declaración de Misión",
                section3_execution_snippets: "Sección 3: Fragmentos de Ejecución",
                section4_sustainment_snippets: "Sección 4: Fragmentos de Sostenimiento",
                annexh_signal_snippets: "Anexo H: Fragmentos de Señal",
                annexa_task_organization_snippets: "Anexo A: Organización de Tareas",
                annexd_fires_snippets: "Anexo D: Fuegos",
                custom_snippets: "Fragmentos Personalizados",
                manage_snippets: "Gestionar Fragmentos",
                clear_draft: "Limpiar Borrador",
                donate: "Apoyar Desarrollo",
                donate_desc: "Mantener Esta Herramienta Gratuita",
                donate_title: "Apoyar Desarrollo",
                donate_subtitle: "Ayudar a Mantener Esta Herramienta de Planificación Militar Gratuita",
                donate_description: "Esta herramienta OPORD es desarrollada y mantenida por profesionales militares para la comunidad militar. Su apoyo nos ayuda a continuar mejorando este recurso gratuito con nuevas características, mejor precisión y funcionalidad mejorada para operaciones de planificación militar.",
                donate_development: "Desarrollo Continuo",
                donate_costs: "Costos de Servidor y API",
                donate_community: "Apoyo Comunitario",
                donate_card_title: "Tarjeta de Crédito/Débito",
                donate_card_desc: "Procesamiento de pagos seguro vía PayPal",
                donate_paypal: "Donación PayPal",
                donate_secure: "Transacciones SSL encriptadas seguras",
                donate_crypto_title: "Criptomoneda",
                donate_crypto_desc: "Donaciones cripto directas - sin comisiones, máximo impacto",
                donate_copy: "Copiar",
                donate_btc_copied: "¡Dirección Bitcoin copiada!",
                donate_eth_copied: "¡Dirección Ethereum copiada!",
                donate_sol_copied: "¡Dirección Solana copiada!",
                donate_verify: "Siempre verificar direcciones antes de enviar",
                donate_thanks_title: "¡Gracias por Su Apoyo!",
                donate_thanks_desc: "Cada donación, sin importar el tamaño, nos ayuda a mantener y mejorar esta herramienta para la comunidad militar. Su apoyo asegura que podamos continuar proporcionando recursos de planificación militar precisos y actualizados completamente gratis.",
                donate_by_military: "Desarrollado por profesionales militares, para profesionales militares",
                donate_contact_title: "¿Preguntas o Sugerencias?",
                donate_contact_desc: "¿Tiene ideas para nuevas características o encontró un error? ¡Nos encantaría escuchar de usted!",
                donate_contact_btn: "Contactar Equipo de Desarrollo",
                feedback_name_label: "Nombre (Opcional):",
                feedback_name_placeholder: "Su nombre",
                feedback_message_label: "Mensaje:",
                feedback_message_placeholder: "Comparta sus ideas, reporte errores o haga preguntas...",
                send_feedback: "Enviar Comentarios",
                sending_feedback: "Enviando...",
                feedback_alternative: "O use nuestro formulario de Google:",
                open_google_form: "Abrir Formulario de Google",
                feedback_type_label: "Tipo de Comentario:",
                feedback_improvements: "Mejoras",
                feedback_sustains: "Mantener (Lo que funciona bien)",
                feedback_bugs: "Errores y Fallos",
                feedback_contact_label: "Información de Contacto (Opcional):",
                feedback_contact_placeholder: "Email u otra información de contacto (opcional)",
                feedback_form_description: "Comparta sus comentarios, sugerencias o reporte errores usando nuestro formulario de Google.",
                feedback_categories_title: "Categorías de Comentarios:",
                feedback_sustains_desc: "¿Qué le gustó?",
                feedback_improvements_desc: "¿Qué no le gustó?",
                feedback_bugs_desc: "Reportes de errores o solicitudes de características",
                feedback_contact_desc: "Información de contacto opcional",
                feedback_form_security: "Se abre en una nueva pestaña • Completamente seguro • No requiere inicio de sesión",
                open_feedback_form: "Abrir Formulario de Comentarios",
                donate_qr_scan: "O escanear código QR de PayPal:",
                donate_qr_mobile: "Escanear con dispositivo móvil para donación rápida",
                donate_qr_scan_crypto: "Escanear para enviar",
                donate_paypal_btn: "Donar con PayPal",
                donate_paypal_secure: "Seguro y Rápido",
                donate_cards_accepted: "Métodos de Pago Aceptados:",
                disclaimer_text: "Este producto es una ayuda de entrenamiento y no está respaldado por el Ejército de los Estados Unidos o el Departamento de Defensa. Úselo bajo su propia discreción. No Ingrese Materiales Clasificados.",
                user_manual: "Manual de Usuario",
                text_templates: "Plantillas de Texto",
                reset_all: "Restablecer Todo",

                // Time Display
                military_time_ref: "Referencia de Tiempo Militar",
                zulu_utc: "Zulu (UTC)",
                eastern_us: "Este de EE.UU.",
                beijing_china: "Beijing China",
                moscow_russia: "Moscú Rusia",
                hawaii_usa: "Hawái EE.UU.",
                seoul_korea: "Seúl Corea",
                local_time: "Hora Local",

                // Section 1 - Situation
                situation: "1. Situación",
                situation_desc: "Proporcionar una visión integral del entorno operacional para Operaciones de Combate a Gran Escala (LSCO).",
                enemy_forces: "Fuerzas Enemigas",
                friendly_forces: "Fuerzas Amigas",
                environment: "Entorno",
                composition_disposition: "Composición y Disposición:",
                composition_desc: "Detallar estructura, ubicaciones y estimaciones de fuerza enemiga",
                capabilities: "Capacidades:",
                capabilities_desc: "Incluir amenazas multidominio (cibernético, GE, defensa aérea, artillería)",
                mlcoa: "COA Más Probable (MLCOA):",
                mlcoa_desc: "Curso de acción enemigo principal",
                mdcoa: "COA Más Peligroso (MDCOA):",
                mdcoa_desc: "Escenario enemigo del peor caso",
                recent_activities: "Actividades Recientes:",
                recent_desc: "Actualizaciones de inteligencia y patrones enemigos",
                higher_hq: "Misión del Cuartel Superior:",
                higher_desc: "Misión e intención dos niveles arriba",
                adjacent_units: "Unidades Adyacentes:",
                adjacent_desc: "Misiones de unidades izquierda, derecha y de apoyo",
                supporting_elements: "Elementos de Apoyo:",
                supporting_desc: "Artillería, apoyo aéreo, ingenieros, etc.",
                boundaries: "Límites:",
                boundaries_desc: "Área de operaciones y medidas de control de la unidad",
                oakoc_analysis: "Análisis OAKOC:",
                observation_fires: "Observación y Campos de Tiro:",
                observation_desc: "Visibilidad y áreas de enfrentamiento",
                avenues_approach: "Avenidas de Aproximación:",
                avenues_desc: "Corredores de movilidad enemiga y amiga",
                key_terrain: "Terreno Clave:",
                key_terrain_desc: "Características decisivas del terreno",
                obstacles: "Obstáculos:",
                obstacles_desc: "Barreras naturales y artificiales",
                cover_concealment: "Cobertura y Ocultación:",
                cover_desc: "Protección contra observación/fuegos",

                // Section 2 - Mission
                mission: "2. Misión",
                mission_desc: "Declarar la tarea esencial y propósito de la unidad en una oración clara, concisa y única.",
                five_ws_framework: "Marco de las Cinco Preguntas",
                who: "Quién",
                who_desc: "Designación de su unidad",
                what: "Qué",
                what_desc: "Verbo de tarea táctica",
                when: "Cuándo",
                when_desc: "NLT Grupo de Fecha-Hora",
                where: "Dónde",
                where_desc: "Objetivo o ubicación",
                why: "Por qué",
                why_desc: "Propósito vinculado a la intención superior",
                mission_format: "Formato de Misión",
                mission_template: "[Unidad] [Tarea] [Objetivo] [NLT DTG] para [Propósito]",

                // Section 3 - Execution
                execution: "3. EJECUCIÓN",
                execution_desc: "Describir cómo la unidad cumplirá la misión. Este es el corazón del OPORD y proporciona a los subordinados la información esencial necesaria para una ejecución exitosa.",

                // Execution Subsections
                commanders_intent: "a. Intención del Comandante",
                commanders_intent_desc: "Describe el propósito de la operación, tareas clave y estado final según los estándares FM 6-0.",
                concept_operations: "b. Concepto de Operaciones",
                concept_operations_desc: "Describe cómo la unidad cumplirá la misión, incluyendo secuencia de acciones y esfuerzo principal.",
                tasks_subordinate_units: "c. Tareas a Unidades Subordinadas",
                tasks_subordinate_desc: "Asignar tareas específicas a unidades subordinadas (Cuerpo a nivel Pelotón). Formato según directrices FM 6-0.",
                tasks_staff: "d. Tareas al Estado Mayor",
                tasks_staff_desc: "Especificar tareas y responsabilidades específicas del estado mayor durante la operación.",

                // Placeholders
                placeholder_commanders_intent: "Propósito: [Por qué se está realizando esta operación]\nTareas Clave: [Tareas esenciales que deben cumplirse]\nEstado Final: [Condiciones deseadas cuando se complete la operación]",
                placeholder_concept_operations: "Secuencia de Acciones: [Cómo se desarrollará la operación]\nEsfuerzo Principal: [Enfoque principal de la operación]\nEsfuerzos de Apoyo: [Cómo otros elementos apoyan el esfuerzo principal]",
                placeholder_tasks_subordinate: "1er PLT: \n2do PLT: \n3er PLT: \nEscuadrón de Armas: \nElementos de Apoyo: \n\n[Agregar unidades adicionales según sea necesario]",
                placeholder_tasks_staff: "S-1: [Tareas de personal]\nS-2: [Tareas de inteligencia]\nS-3: [Tareas de operaciones]\nS-4: [Tareas de logística]\nS-6: [Tareas de comunicaciones]",

                // Dynamic Unit Management
                add_unit_btn: "Agregar Unidad",
                remove_unit_btn: "Eliminar",
                select_unit_placeholder: "Seleccionar Unidad",
                custom_unit_option: "Personalizado...",
                custom_unit_placeholder: "Unidad personalizada",
                unit_task_placeholder: "Ingrese asignación de tarea...",

                // Military Unit Types
                unit_1st_div: "1ra DIV",
                unit_2nd_div: "2da DIV",
                unit_3rd_div: "3ra DIV",
                unit_4th_div: "4ta DIV",
                unit_5th_div: "5ta DIV",
                unit_1st_bde: "1ra BDE",
                unit_2nd_bde: "2da BDE",
                unit_3rd_bde: "3ra BDE",
                unit_4th_bde: "4ta BDE",
                unit_5th_bde: "5ta BDE",
                unit_alpha_company: "Compañía Alpha",
                unit_bravo_company: "Compañía Bravo",
                unit_charlie_company: "Compañía Charlie",
                unit_delta_company: "Compañía Delta",
                unit_1st_plt: "1er PLT",
                unit_2nd_plt: "2do PLT",
                unit_3rd_plt: "3er PLT",
                unit_4th_plt: "4to PLT",
                unit_weapons_squad: "Escuadrón de Armas",
                unit_support_squad: "Escuadrón de Apoyo",
                unit_hq_element: "Elemento de Comando",
                unit_artillery: "Artillería",
                unit_engineers: "Ingenieros",
                unit_medical: "Médico",
                unit_supply: "Suministros",
                unit_maintenance: "Mantenimiento",
                commander_intent: "Intención del Comandante",
                purpose: "Propósito:",
                purpose_desc: "Por qué se está realizando la operación",
                key_tasks: "Tareas Clave:",
                key_tasks_desc: "Tareas esenciales que deben cumplirse",
                end_state: "Estado Final:",
                end_state_desc: "Condiciones deseadas cuando concluya la operación",
                concept_operations: "Concepto de Operaciones",
                scheme_maneuver: "Esquema de Maniobra:",
                scheme_desc: "Cómo se organizarán y emplearán las fuerzas",
                main_effort: "Esfuerzo Principal:",
                main_effort_desc: "Unidad o actividad que el comandante prioriza",
                supporting_effort: "Esfuerzo de Apoyo:",
                supporting_desc: "Unidades que asisten al esfuerzo principal",
                reserve: "Reserva:",
                reserve_desc: "Fuerzas mantenidas para contingencias",

                // Section 4 - Sustainment
                sustainment: "4. Sostenimiento",
                sustainment_desc: "Abordar logística, servicios de personal y apoyo de servicios de salud requeridos para la operación.",
                logistics: "Logística",
                personnel_services: "Servicios de Personal",
                health_service: "Apoyo de Servicios de Salud",
                supply: "Suministro:",
                supply_desc: "Clases de suministro y métodos de distribución",
                maintenance: "Mantenimiento:",
                maintenance_desc: "Procedimientos de mantenimiento y recuperación de equipo",
                transportation: "Transporte:",
                transport_desc: "Movimiento de personal, equipo y suministros",
                field_services: "Servicios de Campo:",
                field_desc: "Asuntos mortuorios, apoyo legal, gestión financiera",

                // Section 5 - Command & Signal
                command_signal: "5. Comando y Señal",
                command_signal_desc: "Establecer relaciones de comando y procedimientos de comunicación para la operación.",
                command: "Comando",
                signal: "Señal",
                command_relationships: "Relaciones de Comando:",
                command_rel_desc: "Cadena de mando y sucesión",
                control_measures: "Medidas de Control:",
                control_desc: "Límites, puntos de control y medidas de coordinación",
                reports: "Reportes:",
                reports_desc: "Reportes requeridos y procedimientos de reporte",

                // Annexes Content
                annex_a: "Organización de Tareas",
                annex_a_desc: "Estructura detallada de unidad, agregaciones y asignaciones de tareas para la operación.",
                annex_b: "Inteligencia",
                annex_b_desc: "Preparación de inteligencia del campo de batalla, análisis enemigo y requisitos de recolección.",
                annex_c: "Operaciones",
                annex_c_desc: "Plan táctico detallado con gráficos, superposiciones y procedimientos operacionales.",
                annex_d: "Fuegos",
                annex_d_desc: "Plan de apoyo de fuego, listas de objetivos, FSCM, tareas de artillería y apoyo aéreo.",
                annex_e: "Protección",
                annex_e_desc: "Defensa aérea, supervivencia, OPSEC, recuperación de personal y ROE.",
                annex_f: "Sostenimiento",
                annex_f_desc: "Planes integrales de logística, personal y apoyo de servicios de salud.",
                annex_g: "Ingenieros",
                annex_g_desc: "Tareas de ingenieros para movilidad, contramovilidad y supervivencia.",
                annex_h: "Señal",
                annex_h_desc: "Plan detallado de comunicaciones, frecuencias, indicativos y planes PACE.",
                annex_k: "CEMA",
                annex_k_desc: "Plan de operaciones de Guerra Cibernética/Electrónica y Actividades Electromagnéticas.",
                annex_l: "Recolección de Información",
                annex_l_desc: "Plan de recolección de información vinculando PIR a activos y tareas de recolección.",
                misc_annexes: "Anexos Varios",
                misc_desc: "Anexos adicionales según se requiera para necesidades específicas de la misión.",

                // Buttons and Actions
                generate_opord: "Generar OPORD",
                save_draft: "Guardar Borrador",
                map_weather: "Mapa y Clima",
                snippets: "Fragmentos",
                mission_builder: "Constructor de Declaración de Misión",
                complete_mission_statement: "Declaración de Misión Completa",
                auto_generate: "Auto-Generar desde 5 Preguntas",

                // Draft OPORD Section
                generate_complete_opord: "Genere Su OPORD Completo",
                generate_opord_description: "¿Listo para crear su orden de operaciones militar profesional? Elija su formato preferido y genere un OPORD completo y formateado con todas las secciones y anexos.",
                all_formats_include: "Todos los formatos incluyen estructura OPORD completa con anexos según estándares FM 6-0.",

                // Draft Form Placeholders
                placeholder_situation: "Ingrese detalles de la situación...",
                placeholder_mission: "Ingrese declaración de misión...",
                placeholder_execution: "Ingrese detalles de ejecución...",
                placeholder_sustainment: "Ingrese detalles de sostenimiento...",
                placeholder_command: "Ingrese detalles de comando y señal...",
                placeholder_coordinates: "Ingrese ubicaciones clave con coordenadas (ej., OBJ ALPHA: 18TWL8396007523, CP BRAVO: 44R 206915 3009291)",
                placeholder_task_org: "Ingrese organización de tareas...",
                placeholder_intelligence: "Ingrese requisitos de inteligencia...",
                placeholder_operations: "Ingrese detalles de superposición de operaciones...",
                placeholder_fires: "Ingrese plan de apoyo de fuego...",
                placeholder_protection: "Ingrese medidas de protección...",
                placeholder_sustainment_annex: "Ingrese plan de sostenimiento...",
                placeholder_engineer: "Ingrese tareas de ingenieros...",
                placeholder_signal: "Ingrese plan de señal...",
                placeholder_cema: "Ingrese plan de operaciones de guerra cibernética/electrónica...",
                placeholder_info_collection: "Ingrese plan de recolección de información...",
                placeholder_misc_annexes: "Ingrese anexos adicionales según se requiera (ej., Anexo P - Apoyo de Nación Anfitriona, Anexo S - Operaciones Técnicas Especiales, etc.)...",

                // Draft Form Labels
                key_locations_coordinates: "Ubicaciones Clave y Coordenadas",

                // Mapping Interface
                enhanced_map_weather: "Integración Mejorada de Mapa y Clima",
                enter_coordinates: "Ingresar Coordenadas",
                coordinate_system: "Sistema de Coordenadas",
                weather_units: "Unidades Meteorológicas",
                execute_search: "Ejecutar Búsqueda",
                search_location: "Buscar Ubicación",
                tactical_map_interface: "Interfaz de Mapa Táctico",
                enter_coords_above: "Ingrese coordenadas arriba y haga clic en \"Buscar Ubicación\"",
                add_marker: "Agregar Marcador",
                saved_locations: "Ubicaciones Guardadas",
                save_current: "Guardar Actual",
                coordinate_tools: "Herramientas de Coordenadas",
                add_to_opord: "Agregar a OPORD",
                convert_format: "Convertir Formato",
                copy_to_clipboard: "Copiar al Portapapeles",
                clear_saved: "Limpiar Guardadas",
                no_saved_locations: "Aún no hay ubicaciones guardadas. Use \"Guardar Actual\" para agregar ubicaciones.",
                weather_information: "Información Meteorológica",
                current_weather: "Clima Actual",
                forecast_3day: "Pronóstico de 3 Días",
                imperial_units: "Imperial (°F)",
                metric_units: "Métrico (°C)",

                // Mapping Buttons and Actions
                insert_current_location: "Insertar Ubicación Actual del Mapa",
                insert_saved_locations: "Insertar Ubicaciones Guardadas",

                // Distance Calculator
                distance_calculator: "Calculadora de Distancia",
                point_a_coordinates: "Coordenadas del Punto A",
                point_b_coordinates: "Coordenadas del Punto B",
                calculate_distance: "Calcular Distancia",

                // Coordinate Placeholders
                coord_placeholder_mgrs: "ej., 32S 0123456 1234567",
                coord_placeholder_utm: "ej., 32N 123456 1234567",
                coord_placeholder_latlon: "ej., 40.7128, -74.0060",

                // Weather and Tactical Data
                temperature: "Temperatura",
                visibility: "Visibilidad",
                wind: "Viento",
                conditions: "Condiciones",
                tactical_data: "Datos Tácticos",
                bmnt: "BMNT",
                eent: "EENT",
                moon_phase: "Fase Lunar",
                sunrise: "Amanecer",
                forecast_today: "Hoy",
                forecast_tomorrow: "Mañana",
                forecast_day3: "Día 3",

                // Saved Location Names
                statue_of_liberty: "ESTATUA DE LA LIBERTAD",
                sydney_opera_house: "ÓPERA DE SÍDNEY",
                eiffel_tower: "TORRE EIFFEL, FRANCIA",
                taj_mahal: "TAJ MAHAL, INDIA",
                statue_of_liberty_usa: "ESTATUA DE LA LIBERTAD, EE.UU.",
                taj_mahal_india: "TAJ MAHAL, INDIA",

                // Map Layer Names
                geoapify_street: "Geoapify Calles",
                geoapify_carto: "Geoapify Carto",
                geoapify_liberty: "Geoapify Liberty",
                esri_satellite: "ESRI Satélite",

                // Example OPORD
                complete_example_opord: "Ejemplo Completo de OPORD",
                classification: "[CLASIFICACIÓN]",
                operation_order: "ORDEN DE OPERACIONES",
                battalion_ranger: "2DO BATALLÓN, 75TO REGIMIENTO RANGER",

                // Help Guide
                getting_started: "Comenzando",
                coordinate_systems: "Sistemas de Coordenadas",
                weather_integration: "Integración Meteorológica",
                opord_structure: "Estructura OPORD",
                welcome_msg: "Bienvenido a la Herramienta Profesional OPORD LSCO",
                welcome_desc: "Esta herramienta integral asiste a planificadores militares en crear Órdenes de Operación detalladas para Operaciones de Combate a Gran Escala.",
                key_features: "Características Clave",
                feature_comprehensive: "Estructura OPORD integral siguiendo FM 6-0",
                feature_lsco: "Consideraciones y ejemplos específicos de LSCO",
                feature_annexes: "Plantillas completas de anexos (A hasta L)",
                feature_export: "Múltiples formatos de exportación (TXT, DOCX, PDF)",
                feature_mapping: "Herramientas integradas de mapeo y clima",
                coordinate_intro: "La herramienta soporta múltiples sistemas de coordenadas para planificación militar precisa:",
                lat_lon_system: "Latitud/Longitud (Grados Decimales)",
                lat_lon_desc: "Coordenadas geográficas estándar usando formato de grados decimales",
                utm_system: "Mercator Transversal Universal (UTM)",
                utm_desc: "Sistema de referencia de cuadrícula militar con zona, este y norte",
                mgrs_system: "Sistema de Referencia de Cuadrícula Militar (MGRS)",
                mgrs_desc: "Sistema de coordenadas militares estándar de la OTAN",
                weather_intro: "La integración meteorológica en tiempo real proporciona:",
                current_conditions: "Condiciones meteorológicas actuales",
                forecast_3day: "Pronóstico meteorológico de 3 días",
                tactical_weather: "Consideraciones meteorológicas tácticas",
                opord_intro: "El OPORD sigue el formato estándar de 5 párrafos:",

                // Common Terms
                includes: "Incluye:",
                example_content: "Contenido de Ejemplo",
                placeholder_enter: "Ingresar",
                details: "detalles",
                plan: "plan",
                requirements: "requisitos",
                measures: "medidas",
                tasks: "tareas",
                support: "apoyo",
                example: "Ejemplo:",
                key_components: "Componentes Clave",

                // Section 3 - Execution Additional
                tasks_subordinate: "Tareas a Unidades Subordinadas",
                essential_tasks: "Tareas Esenciales:",
                essential_tasks_desc: "Tareas específicas que cada unidad subordinada debe cumplir",
                task_organization: "Organización de Tareas:",
                task_org_desc: "Cómo se organizan las unidades para la operación",
                control_measures_exec: "Medidas de Control:",
                control_measures_exec_desc: "Límites, líneas de fase, puntos de control, objetivos",
                coordinating_instructions: "Instrucciones de Coordinación",
                fire_support_concept: "Concepto de Apoyo de Fuego:",
                fire_support_desc: "Integración de fuegos con maniobra",
                phases_operation: "Fases de Operación:",
                phases_desc: "Secuencia lógica de actividades",
                supporting_effort: "Esfuerzo de Apoyo:",
                supporting_effort_desc: "Unidades que asisten al esfuerzo principal",

                // Section 4 - Sustainment Additional
                human_resources: "Recursos Humanos:",
                financial_mgmt: "Gestión Financiera:",
                legal_religious: "Legal/Religioso:",
                medical_treatment: "Tratamiento Médico:",
                medical_evacuation: "Evacuación Médica:",
                preventive_medicine: "Medicina Preventiva:",
                lsco_sustainment: "Consideraciones de Sostenimiento LSCO",
                high_consumption: "Artículos de Alto Consumo:",
                sustainment_challenges: "Desafíos de Sostenimiento:",

                // Section 5 - Command & Signal Additional
                communication_systems: "Sistemas de Comunicación:",
                network_operations: "Operaciones de Red:",
                signal_operating: "Instrucciones de Operación de Señal:",
                lsco_c2: "Consideraciones C2 LSCO",
                communication_challenges: "Desafíos de Comunicación",

                // Examples
                example_execution: "Ejemplo: Párrafo de Ejecución",
                example_sustainment: "Ejemplo: Párrafo de Sostenimiento",
                example_command: "Ejemplo: Párrafo de Comando y Señal",

                // Example Content - Command and Signal
                example_cmd_header: "5. COMANDO Y SEÑAL.",
                example_cmd_command: "a. Comando.",
                example_cmd_command_text: "Comandante ubicado con Cía A durante Fase 1, se desplaza a OBJ BRAVO durante Fase 2. Sucesión de comando: XO, S-3, CDR Cía A. PC principal ubicado vic cuadrícula AB567890, PC táctico se desplaza con esfuerzo principal. Relaciones de comando: Cía A y Cía B OPCON a 1-32 IN, Cía C (3-7 CAV) TACON para misiones de reconocimiento. Puntos de decisión: PD 1 (H+2) - comprometer reserva si Cía A no puede abrir brechas en obstáculos, PD 2 (H+6) - explotar éxito o consolidar posiciones.",
                example_cmd_signal: "b. Señal.",
                example_cmd_signal_text: "Frecuencias primarias: Red de Comando 54.000 MHz, Red Admin/Log 57.000 MHz, Red de Apoyo de Fuego 60.000 MHz. Frecuencias alternas: Red de Comando 45.000 MHz. Indicativos: STEEL 6 (CDR), STEEL 7 (XO), STEEL 3 (S-3), STEEL 1-6 (CDR Cía A). Autenticación: Desafío y contraseña según SOI actual. Ventanas de comunicación: SITREP cada hora a los 30 minutos de cada hora. Procedimientos de emergencia: Cualquier estación puede romper silencio de radio para MEDEVAC o amenaza inmediata.",

                // Example Content - Execution
                example_exec_header: "3. EJECUCIÓN.",
                example_exec_intent: "a. Intención del Comandante.",
                example_exec_intent_text: "Propósito: Tomar OBJ BRAVO para permitir el paso de líneas del 2do BCT y continuación del ataque de división. Método: 1-32 IN conduce ataque deliberado en dos fases - Fase 1: Abrir brecha en obstáculos enemigos y tomar COLINA 405, Fase 2: Explotar éxito y asegurar OBJ BRAVO. Esfuerzo principal cambia de Cía A (Fase 1) a Cía B (Fase 2). Estado final: OBJ BRAVO asegurado, enemigo destruido o retirado, carriles de paso del 2do BCT establecidos y marcados.",
                example_exec_concept: "b. Concepto de Operaciones.",
                example_exec_concept_text: "1-32 IN ataca en zona desde AA TIGER hasta OBJ BRAVO. Fase 1 (Hora-H a H+4): Cía A (Esfuerzo Principal) abre brecha en CAMPO MINADO X y toma COLINA 405. Cía B apoya con fuego desde PF ALPHA. Cía C (Reserva) preparada para explotar o reforzar. Fase 2 (H+4 a H+8): Cía B (Esfuerzo Principal) pasa a través de Cía A y toma OBJ BRAVO. Cía A consolida en COLINA 405 y proporciona vigilancia.",
                example_exec_tasks: "c. Tareas a Unidades Subordinadas.",
                example_exec_tasks_text: "Cía A: Abrir brecha en CAMPO MINADO X NMT H+2, tomar y asegurar COLINA 405 NMT H+4, estar preparada para apoyar avance de Cía B. Cía B: Apoyar Cía A con fuego desde PF ALPHA hasta H+4, pasar a través de Cía A y tomar OBJ BRAVO NMT H+8. Cía C: Reserva, estar preparada para reforzar Cía A o explotar éxito de Cía B, mantener preparación de 30 minutos.",

                // Example Content - Sustainment
                example_sust_header: "4. SOSTENIMIENTO.",
                example_sust_logistics: "a. Logística.",
                example_sust_logistics_text: "Suministro: Reabastecimiento Clase I y III realizado diariamente a las 1800Z en sitio LOGPAC vic cuadrícula AB345678. Reabastecimiento Clase V bajo pedido, reabastecimiento de emergencia disponible en 2 horas. Mantenimiento: A/3-7 FSB proporciona apoyo de mantenimiento DS. Equipos de mantenimiento de unidad co-ubicados con compañías de maniobra. Activos de recuperación posicionados en TAA CHARLIE. Transporte: MSR GOLD designada ruta de suministro primaria, MSR SILVER alterna. Puntos de distribución establecidos en cuadrícula AB234567.",
                example_sust_personnel: "b. Personal.",
                example_sust_personnel_text: "Recursos Humanos: Reporte de bajas según SOP de unidad, personal de reemplazo integrado a nivel de compañía. S-1 mantiene responsabilidad de personal. Gestión Financiera: Pago de emergencia disponible a través de S-1. Apoyo Legal: 1er BCT SJA proporciona apoyo legal según requerido. Apoyo Religioso: Capellán disponible para servicios religiosos y consejería.",
                example_sust_medical: "c. Apoyo de Servicios de Salud.",
                example_sust_medical_text: "Tratamiento Médico: Médicos de compañía proporcionan atención Rol 1. B/3-7 FSB proporciona atención Rol 2 en BAS vic cuadrícula AB456789. Evacuación Médica: MEDEVAC terrestre a través de 3-7 FSB, MEDEVAC aéreo disponible con tiempo de respuesta de 15 minutos. Medicina Preventiva: Pruebas de agua realizadas diariamente, equipo de control de estrés de combate disponible bajo solicitud.",

                // Help Guide Content
                help_navigation: "Navegación:",
                help_navigation_desc: "Use las pestañas de la barra lateral para acceder a diferentes secciones",
                help_time_clocks: "Relojes de Tiempo:",
                help_time_desc: "Pantallas de tiempo en vivo: Zulu, Este, Beijing, Moscú, Hawaii, Seúl y Local",
                help_copy_dtg: "Copiar DTG:",
                help_copy_desc: "Haga clic en \"Copiar DTG Zulu\" para formato de tiempo militar",
                help_shortcuts: "Atajos de Teclado:",
                help_shortcuts_desc: "Ctrl+S (guardar), Ctrl+H (ayuda), Ctrl+M (mapa)",

                help_main_sections: "Secciones Principales:",
                help_situation_desc: "Enemigo, amigo, ambiente (OAKOC), consideraciones civiles",
                help_mission_desc: "Use el marco de las 5 Ws (Quién, Qué, Cuándo, Dónde, Por qué)",
                help_execution_desc: "Intención del comandante, concepto de operaciones, tareas",
                help_sustainment_desc: "Logística, personal, apoyo de servicios de salud",
                help_command_desc: "Relaciones C2, comunicaciones",

                // Sidebar Navigation Descriptions
                sidebar_situation_desc: "Enemigo, Amigo, Ambiente",
                sidebar_mission_desc: "Quién, Qué, Cuándo, Dónde, Por qué",
                sidebar_execution_desc: "Intención, Concepto, Tareas",
                sidebar_sustainment_desc: "Logística, Personal, Salud",
                sidebar_command_desc: "C2, Comunicaciones",
                sidebar_annexes_desc: "A-H + Anexos Adicionales",
                sidebar_example_desc: "Referencia Completa",
                sidebar_draft_desc: "Entrada y Generación",

                help_fm_annexes: "Anexos FM 6-0:",
                help_annex_a_short: "Organización de Tareas",
                help_annex_b_short: "Inteligencia",
                help_annex_c_short: "Operaciones",
                help_annex_d_short: "Fuegos",
                help_annex_e_short: "Protección",
                help_annex_f_short: "Sostenimiento",
                help_annex_g_short: "Ingenieros",
                help_annex_h_short: "Señal",

                help_draft_system: "Uso del Sistema de Borrador",
                help_mission_builder: "Constructor de Misión:",
                help_mission_builder_desc: "Complete las 5 Ws, luego haga clic en \"Auto-Generar\" para el formato adecuado",
                help_section_input: "Entrada de Sección:",
                help_section_input_desc: "Use áreas de texto para cada sección OPORD",
                help_annexes_desc: "Complete todos los 8 anexos FM 6-0 según sea necesario",
                help_save_draft: "Guardar Borrador:",
                help_save_draft_desc: "Se guarda automáticamente en almacenamiento local",
                help_export: "Exportar:",
                help_export_desc: "Descarga OPORD completo con todos los anexos",

                help_coordinate_input: "Entrada de Coordenadas:",
                help_coordinate_desc: "Ingrese coordenadas MGRS, UTM o Lat/Long",
                help_search_location: "Buscar Ubicación:",
                help_search_desc: "Encuentre y muestre ubicación con datos meteorológicos",
                help_add_markers: "Agregar Marcadores:",
                help_markers_desc: "Coloque marcadores tácticos en objetivos",
                help_convert_coords: "Convertir Coordenadas:",
                help_convert_desc: "Cambiar entre sistemas de coordenadas",
                help_saved_locations: "Ubicaciones Guardadas:",
                help_saved_desc: "Guardar y gestionar ubicaciones personalizadas",

                help_ref_coords: "Puntos de Prueba de Coordenadas de Referencia:",
                help_taj_mahal: "Taj Mahal, India (UTM):",
                help_statue_liberty: "Estatua de la Libertad, NY (UTM):",
                help_eiffel_tower: "Torre Eiffel, Francia (MGRS):",
                help_sydney_opera: "Ópera de Sídney, Australia (Lat/Long):",
                help_coords_note: "Estas coordenadas son puntos de referencia verificados para probar la precisión de conversión de coordenadas.",

                help_lsco_considerations: "Consideraciones LSCO",
                help_multi_domain: "Operaciones Multi-Dominio:",
                help_multi_domain_desc: "Considere amenazas cibernéticas, EW, espaciales",
                help_high_consumption: "Alto Consumo:",
                help_consumption_desc: "Planifique para mayor uso de municiones y combustible",
                help_contested_env: "Ambiente Disputado:",
                help_contested_desc: "Asuma comunicaciones degradadas",
                help_mass_casualties: "Bajas Masivas:",
                help_casualties_desc: "Planifique para requisitos médicos significativos",
                help_extended_ops: "Operaciones Extendidas:",
                help_extended_desc: "Considere sostenimiento a lo largo del tiempo",

                help_tips_success: "Consejos para el Éxito",
                help_start_mission: "Comience con la Misión:",
                help_start_desc: "Una declaración de misión clara impulsa todo lo demás",
                help_use_examples: "Use Ejemplos:",
                help_examples_desc: "Haga clic en \"Contenido de Ejemplo\" para orientación",
                help_be_specific: "Sea Específico:",
                help_specific_desc: "Incluya coordenadas de cuadrícula, tiempos y designaciones de unidad",
                help_check_doctrine: "Verifique la Doctrina:",
                help_doctrine_desc: "Todo el contenido basado en estándares FM 6-0",
                help_save_often: "Guarde Frecuentemente:",
                help_save_often_desc: "Use Ctrl+S o haga clic en botones de guardar regularmente",

                // LSCO Content - High Consumption Items
                ammo_precision: "Municiones (especialmente municiones de precisión)",
                fuel_extended: "Combustible para operaciones extendidas",
                medical_mass_cas: "Suministros médicos para bajas masivas",
                repair_parts: "Repuestos para degradación de equipo",

                // LSCO Content - Sustainment Challenges
                extended_supply: "Líneas de suministro extendidas bajo amenaza",
                contested_logistics: "Operaciones logísticas disputadas",
                increased_maintenance: "Requisitos de mantenimiento aumentados",
                mass_casualty_scenarios: "Escenarios de bajas masivas",

                // Example Content - Sustainment
                example_sust_header: "4. SOSTENIMIENTO.",
                example_sust_logistics: "a. Logística.",
                example_sust_logistics_text: "Suministro: Reabastecimiento Clase I y III realizado diariamente a las 1800Z en sitio LOGPAC vic cuadrícula AB345678. Reabastecimiento Clase V bajo pedido, reabastecimiento de emergencia disponible en 2 horas. Mantenimiento: A/3-7 FSB proporciona apoyo de mantenimiento DS. Equipos de mantenimiento de unidad co-ubicados con compañías de maniobra. Activos de recuperación posicionados en TAA CHARLIE. Transporte: MSR GOLD designada ruta de suministro primaria, MSR SILVER alterna. Puntos de distribución establecidos en cuadrícula AB234567.",
                example_sust_personnel: "b. Personal.",
                example_sust_personnel_text: "Recursos Humanos: Reporte de bajas según SOP de unidad, personal de reemplazo integrado a nivel de compañía. S-1 mantiene responsabilidad de personal. Gestión Financiera: Pago de emergencia disponible a través de S-1. Apoyo Legal: 1er BCT SJA proporciona apoyo legal según requerido. Apoyo Religioso: Capellán disponible para servicios religiosos y consejería.",
                example_sust_medical: "c. Apoyo de Servicios de Salud.",
                example_sust_medical_text: "Tratamiento Médico: Médicos de compañía proporcionan atención Rol 1. B/3-7 FSB proporciona atención Rol 2 en BAS vic cuadrícula AB456789. Evacuación Médica: MEDEVAC terrestre a través de 3-7 FSB, MEDEVAC aéreo disponible con tiempo de respuesta de 15 minutos. Medicina Preventiva: Pruebas de agua realizadas diariamente, equipo de control de estrés de combate disponible bajo solicitud.",

                // Manage Annexes Content
                annexes_intro: "Aprenda sobre los anexos FM 6-0 y su uso apropiado. Cada anexo proporciona información especializada para apoyar la OPORD principal. Use la sección \"Borrador de su OPORD\" para crear realmente sus anexos.",
                fm60_structure: "Estructura de Anexos FM 6-0",
                fm60_structure_desc: "Los siguientes anexos siguen la doctrina FM 6-0 actual. No todos los anexos son requeridos para cada operación - incluya solo aquellos relevantes a su misión.",
                purpose: "Propósito:",
                includes: "Incluye:",
                example_content: "Contenido de Ejemplo",
                key_components: "Componentes Clave",
                how_to_use: "Cómo Usar Estos Anexos",
                how_to_use_desc: "Estas descripciones y ejemplos son para referencia y aprendizaje. Para crear realmente sus anexos, use la sección \"Borrador de su OPORD\" donde puede ingresar su contenido específico de anexo y generar documentos OPORD completos.",

                // Annex Descriptions
                annex_a_desc: "Estructura detallada de unidades, agregaciones y asignaciones de tareas para la operación.",
                annex_b_desc: "Preparación de inteligencia del campo de batalla, análisis enemigo y requisitos de recolección.",
                annex_c_desc: "Plan táctico detallado con gráficos, superposiciones y procedimientos operacionales.",
                annex_d_desc: "Plan de apoyo de fuego, listas de objetivos, FSCM, tareas de artillería y apoyo aéreo.",
                annex_e_desc: "Defensa aérea, supervivencia, OPSEC, recuperación de personal y ROE.",
                annex_f_desc: "Planes integrales de logística, personal y apoyo de servicios de salud.",
                annex_g_desc: "Tareas de ingenieros para movilidad, contramovilidad y supervivencia.",
                annex_h_desc: "Plan detallado de comunicaciones, frecuencias, indicativos y planes PACE.",
                annex_k_desc: "Plan de operaciones de Guerra Cibernética/Electrónica y Actividades Electromagnéticas.",
                annex_l_desc: "Plan de recolección de información vinculando PIR a activos y tareas de recolección.",
                misc_annexes: "Anexos Misceláneos",
                misc_desc: "Anexos adicionales según se requiera para necesidades específicas de la misión.",

                // Annex Purpose and Includes Content
                annex_a_purpose: "Detalla la asignación de fuerzas y relaciones de comando para la operación.",
                annex_a_includes: "Organización de tareas de unidad, agregaciones, separaciones y relaciones de comando (OPCON, TACON, DS, etc.)",
                annex_b_purpose: "Proporciona análisis detallado del enemigo y plan de recolección de inteligencia.",
                annex_b_includes: "PIR, activos de recolección, SITTEMP enemigo, productos de inteligencia y procedimientos de diseminación",
                annex_c_purpose: "Contiene la superposición de operaciones y esquema detallado de maniobra.",
                annex_c_includes: "Representación gráfica del plan, medidas de control, líneas de fase, objetivos y límites",
                annex_d_purpose: "Proporciona coordinación detallada de apoyo de fuego y planificación para la operación.",
                annex_d_includes: "Medidas de coordinación de apoyo de fuego, listas de objetivos, tareas de artillería, solicitudes de apoyo aéreo y matriz de ejecución de apoyo de fuego",
                annex_e_purpose: "Detalla medidas de protección para preservar el poder de combate y asegurar el éxito de la misión.",
                annex_e_includes: "Plan de defensa aérea, medidas de supervivencia, procedimientos OPSEC, recuperación de personal, ROE y medidas de protección de fuerza",
                annex_f_purpose: "Proporciona planificación detallada de sostenimiento para mantener efectividad de combate durante la operación.",
                annex_f_includes: "Logística (clases de suministro), servicios de personal, apoyo de servicios de salud, mantenimiento y planes de distribución",
                annex_g_purpose: "Detalla apoyo de ingenieros para mejorar movilidad, negar movilidad enemiga y mejorar supervivencia.",
                annex_g_includes: "Operaciones de movilidad, medidas de contramovilidad, construcción de supervivencia, ingeniería general y apoyo geoespacial",
                annex_h_purpose: "Proporciona apoyo integral de comunicaciones y sistemas de información para comando y control.",
                annex_h_includes: "Planes PACE, asignaciones de frecuencia, indicativos, procedimientos EMCON y operaciones de red",
                annex_k_purpose: "Detalla operaciones cibernéticas, guerra electrónica y gestión del espectro electromagnético para la operación.",
                annex_k_includes: "Plan de operaciones cibernéticas, objetivos EW, gestión de espectro, procedimientos EMCON y medidas cibernéticas defensivas",
                annex_l_purpose: "Detalla el plan de recolección de información para apoyar toma de decisiones y conciencia situacional.",
                annex_l_includes: "Requisitos de Inteligencia Prioritaria (PIR), activos de recolección, procedimientos de flujo de información y cronogramas de reporte",

                // Annex H Example Content
                signal_plan: "1. Plan de Señal:",
                pace_plan_example: "a. Plan PACE: Primario (FM), Alterno (SATCOM), Contingencia (HF), Emergencia (Visual)",
                frequencies_example: "b. Frecuencias: Red de Comando 54.000 MHz, Red Admin/Log 46.000 MHz",
                call_signs_example: "c. Indicativos: STEEL 6 (CDR), STEEL 7 (XO), STEEL 3 (S3)",
                emcon_example: "d. EMCON: Nivel III hasta Hora-H, luego Nivel II",
                network_ops_example: "e. Operaciones de Red: conectividad SIPR/NIPR, defensa cibernética",

                // Coordinating Instructions
                time_sequence: "Tiempo y secuencia de eventos",
                rules_engagement: "Reglas de enfrentamiento (ROE)",
                risk_mitigation: "Medidas de mitigación de riesgos",
                rehearsal_guidance: "Guía de ensayo",
                contingency_plans: "Planes de contingencia",

                // Human Resources
                casualty_reporting: "Reporte de bajas",
                replacement_ops: "Operaciones de reemplazo",
                personnel_accountability: "Responsabilidad de personal",

                // Financial Management
                pay_operations: "Operaciones de pago",
                contracting_support: "Apoyo de contratación",
                resource_management: "Gestión de recursos",

                // Legal/Religious
                legal_support: "Apoyo legal",
                religious_services: "Servicios religiosos",
                morale_support: "Apoyo moral",

                // Medical Treatment
                role_1_unit: "Rol 1 (Nivel de unidad)",
                role_2_forward: "Rol 2 (Apoyo adelantado)",
                triage_procedures: "Procedimientos de triaje",

                // Medical Evacuation
                medevac_procedures: "Procedimientos MEDEVAC",
                casualty_collection: "Recolección de bajas",
                evacuation_routes: "Rutas de evacuación",

                // Preventive Medicine
                disease_prevention: "Prevención de enfermedades",
                environmental_health: "Salud ambiental",
                combat_stress_control: "Control de estrés de combate",

                // Communication Systems
                primary_alternate_freq: "Frecuencias primarias y alternas",
                call_signs_auth: "Indicativos y autenticación",
                communication_windows: "Ventanas de comunicación",

                // Network Operations
                digital_comm_systems: "Sistemas de comunicación digital",
                network_security_protocols: "Protocolos de seguridad de red",
                cyber_defense_measures: "Medidas de defensa cibernética",

                // Signal Operating Instructions
                communication_procedures: "Procedimientos de comunicación",
                emergency_procedures: "Procedimientos de emergencia",
                comsec_requirements: "Requisitos COMSEC",

                // LSCO C2 Considerations
                redundant_comm_systems: "Sistemas de comunicación redundantes",
                ew_countermeasures: "Contramedidas de guerra electrónica",
                distributed_command_posts: "Puestos de comando distribuidos",
                mission_command_philosophy: "Filosofía de comando de misión",
                rapid_decision_making: "Procesos de toma de decisiones rápidas",

                // Communication Challenges
                enemy_electronic_warfare: "Guerra electrónica enemiga",
                degraded_comm_environments: "Ambientes de comunicación degradados",
                extended_comm_ranges: "Rangos de comunicación extendidos",
                interoperability_requirements: "Requisitos de interoperabilidad",
                cyber_threats_networks: "Amenazas cibernéticas a redes",

                // Annex G (Engineer) Example Content
                engineer_tasks: "1. Tareas de Ingenieros:",
                mobility_example: "a. Movilidad: Limpiar CAMPO MINADO X para H+2, operaciones de brecha",
                countermobility_example: "b. Contramovilidad: Colocar obstáculos en PL SILVER, negar rutas",
                survivability_example: "c. Supervivencia: Construir posiciones de combate, posiciones protectoras",
                supporting_unit_example: "d. Unidad de Apoyo: Cía A, 3-7 ING (DS a TF)",
                general_engineering_example: "e. Ingeniería General: Mantenimiento de rutas, servicios públicos",

                // Annex A (Task Organization) Example Content
                task_organization_plan: "1. Organización de Tareas:",
                main_effort_example: "a. Esfuerzo Principal: Cía A, 1-32 IN",
                supporting_effort_example: "b. Esfuerzo de Apoyo: Cía B, 1-32 IN",
                reserve_example: "c. Reserva: Cía C, 1-32 IN",
                attachments_example: "d. Agregaciones: 1er PLT, Cía A, 3-7 CAV (OPCON)",

                // Annex B (Intelligence) Key Components
                pir_requirements: "Requisitos de Inteligencia Prioritaria (PIR)",
                collection_plan_assets: "Plan de Recolección y Activos",
                enemy_sittemp: "Plantilla de Situación Enemiga (SITTEMP)",
                intel_products_dissem: "Productos de Inteligencia y Diseminación",

                // Annex E (Protection) Example Content
                protection_measures: "1. Medidas de Protección:",
                air_defense_example: "a. Defensa Aérea: Estado de Control de Armas WEAPONS TIGHT",
                opsec_example: "b. OPSEC: Control de emisiones, disciplina de camuflaje",
                personnel_recovery_example: "c. Recuperación de Personal: Procedimientos CSAR, personal aislado",
                roe_example: "d. ROE: Reglas de Enfrentamiento según directiva actual",
                survivability_example_detailed: "e. Supervivencia: Posiciones de combate, cubierta superior",

                // Annex F (Sustainment) Example Content
                sustainment_plan: "1. Plan de Sostenimiento:",
                class_resupply_example: "a. Reabastecimiento Clase I/III: Diario a 1800Z en LOG PAD",
                class_v_example: "b. Clase V: Bajo pedido, reabastecimiento de emergencia 2 horas",
                maintenance_example: "c. Mantenimiento: Apoyo DS de FSB, puntos de recolección",
                medical_example: "d. Médico: Atención Rol 1/2, procedimientos MEDEVAC, ubicaciones CCP",
                personnel_example: "e. Personal: Operaciones de reemplazo, reporte de bajas",

                // Annex K (CEMA) Example Content
                cema_operations: "1. Operaciones CEMA:",
                cyber_ops_example: "a. Operaciones Cibernéticas: Defensa de red, cibernético ofensivo",
                electronic_warfare_example: "b. Guerra Electrónica: Interferencia, SIGINT, COMINT",
                spectrum_mgmt_example: "c. Gestión de Espectro: Desconflicto de frecuencia",
                emcon_example_detailed: "d. EMCON: Procedimientos de control de emisiones",
                defensive_measures_example: "e. Medidas Defensivas: Seguridad de red, OPSEC",

                // Annex L (Information Collection) Example Content
                info_collection_plan: "1. Plan de Recolección de Información:",
                pir_1_example: "a. PIR 1: Ubicaciones y movimiento de reservas enemigas",
                pir_2_example: "b. PIR 2: Estado de evacuación civil en AO",
                collection_assets_example: "c. Activos de Recolección: UAV, HUMINT, SIGINT",
                reporting_example: "d. Reportes: Informes SALUTE cada 2 horas",
                info_flow_example: "e. Flujo de Información: Recolectores → S2 → CDR",

                // Miscellaneous Annexes Content
                misc_purpose: "Proporciona flexibilidad para anexos específicos de misión no cubiertos por estructura estándar A-L.",
                misc_examples: "Ejemplos: Anexo P (Apoyo de Nación Anfitriona), Anexo S (Operaciones Técnicas Especiales), Anexo M (Evaluación), anexos personalizados",
                common_additional_annexes: "Anexos Adicionales Comunes",
                annex_p_desc: "Anexo P (Apoyo de Nación Anfitriona): Coordinación de apoyo local",
                annex_s_desc: "Anexo S (Operaciones Técnicas Especiales): Capacidades especializadas",
                annex_m_desc: "Anexo M (Evaluación): Criterios de evaluación de misión",
                annex_r_desc: "Anexo R (Reportes): Requisitos y procedimientos de reporte",
                custom_annexes_desc: "Anexos Personalizados: Requisitos específicos de misión",

                // Annex C (Operations) Key Components
                operations_overlay: "Superposición de Operaciones (Gráfico)",
                scheme_maneuver_details: "Detalles del Esquema de Maniobra",
                control_measures_boundaries: "Medidas de Control y Límites",
                phase_lines_objectives: "Líneas de Fase y Objetivos",

                // Annex D (Fires) Example Content
                fire_support_coordination: "1. Coordinación de Apoyo de Fuego:",
                supporting_units_example: "a. Unidades de Apoyo: 1-77 FA (DS), 2-8 FA (GSR)",
                priority_fires_example: "b. Prioridad de Fuegos: Cía A (Esfuerzo Principal)",
                fscl_example: "c. Línea de Coordinación de Apoyo de Fuego (FSCL): PL BLUE",
                nfa_example: "d. Áreas de No Fuego (NFA): Pueblo KILO (AB234678)",
                target_list_example: "e. Lista de Objetivos: TGT AA1001 (CP Enemigo), TGT AA1002 (Posición de Mortero)",

                // Example OPORD Content
                example_opord_classification: "[CLASIFICACIÓN]",
                example_opord_title: "ORDEN DE OPERACIONES 20241215120000Z",
                example_opord_unit: "2do Batallón, 75to Regimiento Ranger",

                // Situation Section
                enemy_forces_header: "a. Fuerzas Enemigas:",
                enemy_forces_content: "Elemento enemigo del tamaño de compañía (120-150 personal) ocupando posiciones defensivas en OBJETIVO ALPHA. Las fuerzas enemigas consisten en infantería mecanizada con morteros de apoyo y armas antitanque. El enemigo ha establecido puestos de observación en terreno elevado y preparado posiciones de combate con campos de fuego entrelazados. Moral enemiga evaluada como moderada con capacidades limitadas de visión nocturna.",

                friendly_forces_header: "b. Fuerzas Amigas:",
                friendly_forces_content: "1er Equipo de Combate de Brigada realizando ataque de apoyo al norte. 3er Batallón, 75to Rangers proporcionando vigilancia y apoyo de fuego desde el este. Activos de aviación incluyen 2x helicópteros AH-64 Apache y 1x cañonero AC-130 en estación. Apoyo de artillería del 1-319 AFAR con prioridad de fuegos.",

                environment_header: "c. Ambiente:",
                environment_content: "Terreno: Colinas onduladas con vegetación dispersa, elevación 200-400m. Clima: Cielos despejados, temperatura 20°C, viento 5-10 mph del noroeste. Visibilidad ilimitada durante el día, 2km por la noche. BMNT: 0630Z, EENT: 1830Z. Fase lunar: 25% menguante creciente.",

                attachments_header: "d. Agregaciones/Destacamentos:",
                attachments_content: "Agregados: 1x equipo Observador Avanzado, 1x escuadra Ingeniero de Combate, 1x equipo Perro Militar de Trabajo. Destacados: Ninguno.",

                key_locations_header: "UBICACIONES CLAVE:",
                key_locations_content: "OBJ ALPHA: 32S 0123456 1234567 (MGRS)\nTAA BRAVO: 32S 0120000 1230000 (MGRS)\nPL CHARLIE: 32S 0121000 1232000 (MGRS)\nCP DELTA: 32S 0119000 1229000 (MGRS)",

                // Mission Section
                mission_content: "2do Batallón, 75to Regimiento Ranger ataca para apoderarse del OBJETIVO ALPHA NMT 151800Z DIC 24 con el fin de destruir las posiciones defensivas enemigas y asegurar terreno clave para operaciones de seguimiento.",

                // Execution Section
                commanders_intent_header: "a. Intención del Comandante:",
                commanders_intent_purpose: "Propósito: Destruir la capacidad defensiva enemiga y asegurar terreno clave.",
                commanders_intent_key_tasks: "Tareas Clave: (1) Romper la línea defensiva enemiga, (2) Neutralizar puntos fuertes enemigos, (3) Asegurar OBJ ALPHA.",
                commanders_intent_end_state: "Estado Final: Fuerzas enemigas destruidas o retiradas, OBJ ALPHA asegurado, unidad preparada para operaciones de seguimiento.",

                concept_ops_header: "b. Concepto de Operaciones:",
                concept_ops_phase1: "Fase 1 (Movimiento): Las unidades se mueven de TAA BRAVO a posiciones de asalto bajo cobertura de oscuridad.",
                concept_ops_phase2: "Fase 2 (Asalto): Ataque coordinado con fuegos de apoyo para romper posiciones enemigas.",
                concept_ops_phase3: "Fase 3 (Consolidación): Asegurar objetivo y preparar posiciones defensivas.",

                tasks_subordinate_header: "c. Tareas a Unidades Subordinadas:",
                tasks_alpha_company: "Compañía Alpha: Esfuerzo principal. Atacar a lo largo del EJE EAGLE para apoderarse de la porción norte del OBJ ALPHA.",
                tasks_bravo_company: "Compañía Bravo: Esfuerzo de apoyo. Atacar a lo largo del EJE FALCON para apoderarse de la porción sur del OBJ ALPHA.",
                tasks_charlie_company: "Compañía Charlie: Reserva del batallón. Preparada para explotar el éxito o reforzar el esfuerzo principal.",

                coordinating_instructions_header: "d. Instrucciones de Coordinación:",
                coordinating_h_hour: "• Hora-H: 151600Z DIC 24",
                coordinating_roe: "• ROE: Identificación positiva requerida antes del enfrentamiento",
                coordinating_ccir: "• CCIR: Refuerzos enemigos, presencia civil, ubicaciones de obstáculos",
                coordinating_rehearsal: "• Ensayo: 141400Z en TAA BRAVO",

                // Sustainment Section
                logistics_header: "a. Logística:",
                logistics_content: "Clase I: 3 días disponibles. Clase III: Punto de combustible en TAA BRAVO. Clase V: Carga básica más 50% adicional. Reabastecimiento vía convoy terrestre en PL CHARLIE.",

                personnel_services_header: "b. Servicios de Personal:",
                personnel_services_content: "Operaciones de reemplazo a través de S-1. Punto de recolección EPW en CP DELTA. Apoyo moral vía servicios de capellán.",

                health_service_header: "c. Apoyo de Servicios de Salud:",
                health_service_content: "Puesto de Auxilio del Batallón en CP DELTA. LZ MEDEVAC en TAA BRAVO. Prioridad: Urgente, Prioridad, Rutina. Procedimientos de 9 líneas en efecto.",

                // Command & Signal Section
                command_header: "a. Comando:",
                command_content: "Ubicación CP: CP DELTA (32S 0119000 1229000). Sucesión de comando: CDO, SUB, S-3, Comandante Compañía Alpha.",

                control_header: "b. Control:",
                control_content: "Reportes: SITREP cada 30 minutos. SPOTREP según se requiera. Puntos de control: Alpha, Bravo, Charlie establecidos.",

                signal_header: "c. Señal:",
                signal_content: "Primario: Red de radio FM. Alterno: Comunicaciones satelitales. Contingencia: Señales visuales. Emergencia: Pirotecnia. Frecuencias: Red Comando 45.000, Red Admin 46.000.",

                // Annexes Section
                annexes_header: "ANEXOS:",
                annex_a_desc_example: "Anexo A (Organización de Tareas): Asignaciones detalladas de unidades y agregaciones",
                annex_b_desc_example: "Anexo B (Inteligencia): Situación enemiga, análisis de terreno, datos meteorológicos",
                annex_c_desc_example: "Anexo C (Operaciones): Plan táctico detallado y superposición gráfica",
                annex_d_desc_example: "Anexo D (Fuegos): Plan de artillería y apoyo aéreo cercano",
                annex_e_desc_example: "Anexo E (Protección): Protección de fuerzas y medidas QBRN",
                annex_f_desc_example: "Anexo F (Sostenimiento): Plan detallado de logística y apoyo médico",
                annex_g_desc_example: "Anexo G (Ingenieros): Reducción de obstáculos y apoyo de movilidad",
                annex_h_desc_example: "Anexo H (Señal): Plan de comunicaciones y frecuencias",

                // Example OPORD Notes
                example_opord_notes_header: "Notas del Ejemplo OPORD",
                example_notes_purpose: "Propósito: Este ejemplo demuestra una estructura OPORD completa siguiendo los estándares FM 6-0.",
                example_notes_key_elements: "Elementos Clave: Note la situación enemiga detallada, declaración de misión clara, plan de ejecución integral y consideraciones de sostenimiento completas.",
                example_notes_coordinates: "Coordenadas: Todos los gráficos tácticos usan coordenadas MGRS para precisión y estandarización.",
                example_notes_classification: "Clasificación: Reemplace [CLASIFICACIÓN] con marcas de seguridad apropiadas para su red.",
                example_notes_customization: "Personalización: Adapte este formato y nivel de detalle a sus requisitos operacionales específicos."
            },

            fr: {
                // Header and Navigation
                opord_tool: "Outil OPORD",
                military_planning: "Assistant de Planification Militaire",
                copy_dtg: "Copier DTG Zulu",
                menu: "Menu",
                opord_sections: "Sections OPORD",

                // Tab Navigation
                help_guide: "Guide d'Aide",
                example_opord: "Exemple OPORD",
                draft_opord: "Brouillon OPORD",
                draft_opord_description: "Créez votre OPORD avec des outils de cartographie et météo intégrés. Utilisez l'outil Carte et Météo pour obtenir des coordonnées et des données tactiques pour votre opération.",
                manage_annexes: "Gérer les Annexes",

                // Placeholder translations
                placeholder_unit_designation: "Désignation d'unité",
                placeholder_tactical_task: "Tâche tactique",
                placeholder_nlt_dtg: "NLT DTG",
                placeholder_objective_location: "Objectif/Emplacement",
                placeholder_purpose: "But",
                placeholder_mission_statement: "[Unité] [Tâche] [Objectif] [NLT DTG] afin de [But]",
                placeholder_situation: "Entrez les détails de la situation...",
                placeholder_coordinates: "Entrez les emplacements clés avec coordonnées (ex., OBJ ALPHA: 18TWL8396007523, CP BRAVO: 44R 206915 3009291)",
                placeholder_execution: "Entrez les détails d'exécution...",
                placeholder_sustainment: "Entrez les détails de soutien...",
                placeholder_command: "Entrez les détails de commandement et transmissions...",
                placeholder_task_organization: "Entrez l'organisation des tâches...",
                placeholder_intelligence: "Entrez les exigences de renseignement...",
                placeholder_operations: "Entrez les détails de superposition d'opérations...",
                placeholder_fires: "Entrez le plan d'appui-feu...",
                placeholder_protection: "Entrez les mesures de protection...",
                placeholder_sustainment_plan: "Entrez le plan de soutien...",
                placeholder_engineer: "Entrez les tâches du génie...",
                placeholder_signal: "Entrez le plan de transmissions...",
                placeholder_cema: "Entrez le plan d'opérations de guerre cyber/électronique...",
                placeholder_info_collection: "Entrez le plan de collecte d'informations...",
                placeholder_misc_annexes: "Entrez des annexes supplémentaires selon les besoins (ex., Annexe P - Soutien de la Nation Hôte, Annexe S - Opérations Techniques Spéciales, etc.)...",

                // Section headers
                annexes_fm60_structure: "Annexes (Structure FM 6-0)",

                // Snippets translations
                snippets_library: "Bibliothèque d'Extraits OPORD",
                mission_statement_templates: "Modèles de Déclaration de Mission",
                section3_execution_snippets: "Section 3: Extraits d'Exécution",
                section4_sustainment_snippets: "Section 4: Extraits de Soutien",
                annexh_signal_snippets: "Annexe H: Extraits de Transmissions",
                annexa_task_organization_snippets: "Annexe A: Organisation des Tâches",
                annexd_fires_snippets: "Annexe D: Feux",
                custom_snippets: "Extraits Personnalisés",
                manage_snippets: "Gérer les Extraits",
                clear_draft: "Effacer le Brouillon",
                donate: "Soutenir le Développement",
                donate_desc: "Garder Cet Outil Gratuit",
                donate_title: "Soutenir le Développement",
                donate_subtitle: "Aider à Garder Cet Outil de Planification Militaire Gratuit",
                donate_description: "Cet outil OPORD est développé et maintenu par des professionnels militaires pour la communauté militaire. Votre soutien nous aide à continuer d'améliorer cette ressource gratuite avec de nouvelles fonctionnalités, une meilleure précision et une fonctionnalité améliorée pour les opérations de planification militaire.",
                donate_development: "Développement Continu",
                donate_costs: "Coûts de Serveur et API",
                donate_community: "Soutien Communautaire",
                donate_card_title: "Carte de Crédit/Débit",
                donate_card_desc: "Traitement de paiement sécurisé via PayPal",
                donate_paypal: "Don PayPal",
                donate_secure: "Transactions SSL cryptées sécurisées",
                donate_crypto_title: "Cryptomonnaie",
                donate_crypto_desc: "Dons crypto directs - pas de frais, impact maximum",
                donate_copy: "Copier",
                donate_btc_copied: "Adresse Bitcoin copiée!",
                donate_eth_copied: "Adresse Ethereum copiée!",
                donate_sol_copied: "Adresse Solana copiée!",
                donate_verify: "Toujours vérifier les adresses avant d'envoyer",
                donate_thanks_title: "Merci pour Votre Soutien!",
                donate_thanks_desc: "Chaque don, quelle que soit sa taille, nous aide à maintenir et améliorer cet outil pour la communauté militaire. Votre soutien garantit que nous pouvons continuer à fournir des ressources de planification militaire précises et à jour complètement gratuites.",
                donate_by_military: "Développé par des professionnels militaires, pour des professionnels militaires",
                donate_contact_title: "Questions ou Suggestions?",
                donate_contact_desc: "Avez-vous des idées pour de nouvelles fonctionnalités ou trouvé un bug? Nous aimerions avoir de vos nouvelles!",
                donate_contact_btn: "Contacter l'Équipe de Développement",
                feedback_name_label: "Nom (Optionnel):",
                feedback_name_placeholder: "Votre nom",
                feedback_message_label: "Message:",
                feedback_message_placeholder: "Partagez vos idées, signalez des bugs ou posez des questions...",
                send_feedback: "Envoyer Commentaires",
                sending_feedback: "Envoi en cours...",
                feedback_alternative: "Ou utilisez notre formulaire Google:",
                open_google_form: "Ouvrir le Formulaire Google",
                feedback_type_label: "Type de Commentaire:",
                feedback_improvements: "Améliorations",
                feedback_sustains: "À Maintenir (Ce qui fonctionne bien)",
                feedback_bugs: "Bugs et Erreurs",
                feedback_contact_label: "Informations de Contact (Optionnel):",
                feedback_contact_placeholder: "Email ou autres informations de contact (optionnel)",
                feedback_form_description: "Partagez vos commentaires, suggestions ou signalez des bugs en utilisant notre formulaire Google.",
                feedback_categories_title: "Catégories de Commentaires:",
                feedback_sustains_desc: "Qu'avez-vous aimé?",
                feedback_improvements_desc: "Qu'est-ce que vous n'avez pas aimé?",
                feedback_bugs_desc: "Rapports de bugs ou demandes de fonctionnalités",
                feedback_contact_desc: "Informations de contact optionnelles",
                feedback_form_security: "S'ouvre dans un nouvel onglet • Complètement sécurisé • Aucune connexion requise",
                open_feedback_form: "Ouvrir le Formulaire de Commentaires",
                donate_qr_scan: "Ou scanner le code QR PayPal:",
                donate_qr_mobile: "Scanner avec un appareil mobile pour un don rapide",
                donate_qr_scan_crypto: "Scanner pour envoyer",
                donate_paypal_btn: "Faire un don avec PayPal",
                donate_paypal_secure: "Sécurisé et Rapide",
                donate_cards_accepted: "Méthodes de Paiement Acceptées:",
                disclaimer_text: "Ce produit est un outil de formation et n'est pas approuvé par l'Armée des États-Unis ou le Département de la Défense. Utilisez à votre propre discrétion. Ne Saisissez Pas de Matériaux Classifiés.",
                user_manual: "Manuel Utilisateur",
                text_templates: "Modèles de Texte",
                reset_all: "Tout Réinitialiser",

                // Time Display
                military_time_ref: "Référence de Temps Militaire",
                zulu_utc: "Zulu (UTC)",
                eastern_us: "Est des États-Unis",
                beijing_china: "Pékin Chine",
                moscow_russia: "Moscou Russie",
                hawaii_usa: "Hawaï États-Unis",
                seoul_korea: "Séoul Corée",
                local_time: "Heure Locale",

                // Section 1 - Situation
                situation: "1. Situation",
                situation_desc: "Fournir un aperçu complet de l'environnement opérationnel pour les Opérations de Combat à Grande Échelle (LSCO).",
                enemy_forces: "Forces Ennemies",
                friendly_forces: "Forces Amies",
                environment: "Environnement",
                composition_disposition: "Composition et Disposition:",
                composition_desc: "Détailler la structure, les emplacements et les estimations de force ennemie",
                capabilities: "Capacités:",
                capabilities_desc: "Inclure les menaces multi-domaines (cyber, GE, défense aérienne, artillerie)",
                mlcoa: "COA Le Plus Probable (MLCOA):",
                mlcoa_desc: "Cours d'action ennemi principal",
                mdcoa: "COA Le Plus Dangereux (MDCOA):",
                mdcoa_desc: "Scénario ennemi du pire cas",
                recent_activities: "Activités Récentes:",
                recent_desc: "Mises à jour du renseignement et modèles ennemis",
                higher_hq: "Mission du QG Supérieur:",
                higher_desc: "Mission et intention deux niveaux au-dessus",
                adjacent_units: "Unités Adjacentes:",
                adjacent_desc: "Missions des unités gauche, droite et de soutien",
                supporting_elements: "Éléments de Soutien:",
                supporting_desc: "Artillerie, soutien aérien, génie, etc.",
                boundaries: "Limites:",
                boundaries_desc: "Zone d'opérations et mesures de contrôle de l'unité",
                oakoc_analysis: "Analyse OAKOC:",
                observation_fires: "Observation et Champs de Tir:",
                observation_desc: "Visibilité et zones d'engagement",
                avenues_approach: "Avenues d'Approche:",
                avenues_desc: "Corridors de mobilité ennemie et amie",
                key_terrain: "Terrain Clé:",
                key_terrain_desc: "Caractéristiques décisives du terrain",
                obstacles: "Obstacles:",
                obstacles_desc: "Barrières naturelles et artificielles",
                cover_concealment: "Couverture et Dissimulation:",
                cover_desc: "Protection contre l'observation/les tirs",

                // Section 2 - Mission
                mission: "2. Mission",
                mission_desc: "Énoncer la tâche essentielle et le but de l'unité en une phrase claire, concise et unique.",
                five_ws_framework: "Cadre des Cinq Questions",
                who: "Qui",
                who_desc: "Désignation de votre unité",
                what: "Quoi",
                what_desc: "Verbe de tâche tactique",
                when: "Quand",
                when_desc: "NLT Groupe Date-Heure",
                where: "Où",
                where_desc: "Objectif ou emplacement",
                why: "Pourquoi",
                why_desc: "But lié à l'intention supérieure",
                mission_format: "Format de Mission",
                mission_template: "[Unité] [Tâche] [Objectif] [NLT DTG] afin de [But]",

                // Section 3 - Execution
                execution: "3. EXÉCUTION",
                execution_desc: "Décrire comment l'unité accomplira la mission. C'est le cœur de l'OPORD et fournit aux subordonnés les informations essentielles nécessaires pour une exécution réussie.",

                // Execution Subsections
                commanders_intent: "a. Intention du Commandant",
                commanders_intent_desc: "Décrire le but de l'opération, les tâches clés et l'état final selon les normes FM 6-0.",
                concept_operations: "b. Concept d'Opérations",
                concept_operations_desc: "Décrire comment l'unité accomplira la mission, y compris la séquence d'actions et l'effort principal.",
                tasks_subordinate_units: "c. Tâches aux Unités Subordonnées",
                tasks_subordinate_desc: "Assigner des tâches spécifiques aux unités subordonnées (Corps au niveau Peloton). Format selon les directives FM 6-0.",
                tasks_staff: "d. Tâches à l'État-Major",
                tasks_staff_desc: "Spécifier les tâches et responsabilités spécifiques de l'état-major pendant l'opération.",

                // Placeholders
                placeholder_commanders_intent: "But: [Pourquoi cette opération est menée]\nTâches Clés: [Tâches essentielles qui doivent être accomplies]\nÉtat Final: [Conditions souhaitées à la fin de l'opération]",
                placeholder_concept_operations: "Séquence d'Actions: [Comment l'opération se déroulera]\nEffort Principal: [Focus principal de l'opération]\nEfforts de Soutien: [Comment les autres éléments soutiennent l'effort principal]",
                placeholder_tasks_subordinate: "1er PLT: \n2e PLT: \n3e PLT: \nEscouade d'Armes: \nÉléments de Soutien: \n\n[Ajouter des unités supplémentaires selon les besoins]",
                placeholder_tasks_staff: "S-1: [Tâches de personnel]\nS-2: [Tâches de renseignement]\nS-3: [Tâches d'opérations]\nS-4: [Tâches de logistique]\nS-6: [Tâches de communications]",

                // Dynamic Unit Management
                add_unit_btn: "Ajouter Unité",
                remove_unit_btn: "Supprimer",
                select_unit_placeholder: "Sélectionner Unité",
                custom_unit_option: "Personnalisé...",
                custom_unit_placeholder: "Unité personnalisée",
                unit_task_placeholder: "Entrer l'assignation de tâche...",

                // Military Unit Types
                unit_1st_div: "1re DIV",
                unit_2nd_div: "2e DIV",
                unit_3rd_div: "3e DIV",
                unit_4th_div: "4e DIV",
                unit_5th_div: "5e DIV",
                unit_1st_bde: "1re BDE",
                unit_2nd_bde: "2e BDE",
                unit_3rd_bde: "3e BDE",
                unit_4th_bde: "4e BDE",
                unit_5th_bde: "5e BDE",
                unit_alpha_company: "Compagnie Alpha",
                unit_bravo_company: "Compagnie Bravo",
                unit_charlie_company: "Compagnie Charlie",
                unit_delta_company: "Compagnie Delta",
                unit_1st_plt: "1er PLT",
                unit_2nd_plt: "2e PLT",
                unit_3rd_plt: "3e PLT",
                unit_4th_plt: "4e PLT",
                unit_weapons_squad: "Escouade d'Armes",
                unit_support_squad: "Escouade de Soutien",
                unit_hq_element: "Élément QG",
                unit_artillery: "Artillerie",
                unit_engineers: "Génie",
                unit_medical: "Médical",
                unit_supply: "Approvisionnement",
                unit_maintenance: "Maintenance",
                commander_intent: "Intention du Commandant",
                purpose: "But:",
                purpose_desc: "Pourquoi l'opération est menée",
                key_tasks: "Tâches Clés:",
                key_tasks_desc: "Tâches essentielles qui doivent être accomplies",
                end_state: "État Final:",
                end_state_desc: "Conditions souhaitées à la fin de l'opération",
                concept_operations: "Concept d'Opérations",
                scheme_maneuver: "Schéma de Manœuvre:",
                scheme_desc: "Comment les forces seront organisées et employées",
                main_effort: "Effort Principal:",
                main_effort_desc: "Unité ou activité que le commandant priorise",
                supporting_effort: "Effort de Soutien:",
                supporting_desc: "Unités qui assistent l'effort principal",
                reserve: "Réserve:",
                reserve_desc: "Forces maintenues pour les contingences",

                // Section 4 - Sustainment
                sustainment: "4. Soutien",
                sustainment_desc: "Aborder la logistique, les services du personnel et le soutien des services de santé requis pour l'opération.",
                logistics: "Logistique",
                personnel_services: "Services du Personnel",
                health_service: "Soutien des Services de Santé",
                supply: "Approvisionnement:",
                supply_desc: "Classes d'approvisionnement et méthodes de distribution",
                maintenance: "Maintenance:",
                maintenance_desc: "Procédures de maintenance et de récupération d'équipement",
                transportation: "Transport:",
                transport_desc: "Mouvement du personnel, de l'équipement et des fournitures",
                field_services: "Services de Terrain:",
                field_desc: "Affaires mortuaires, soutien juridique, gestion financière",

                // Section 5 - Command & Signal
                command_signal: "5. Commandement et Signal",
                command_signal_desc: "Établir les relations de commandement et les procédures de communication pour l'opération.",
                command: "Commandement",
                signal: "Signal",
                command_relationships: "Relations de Commandement:",
                command_rel_desc: "Chaîne de commandement et succession",
                control_measures: "Mesures de Contrôle:",
                control_desc: "Limites, points de contrôle et mesures de coordination",
                reports: "Rapports:",
                reports_desc: "Rapports requis et procédures de rapport",

                // Annexes Content
                annex_a: "Organisation des Tâches",
                annex_a_desc: "Structure détaillée de l'unité, attachements et assignations de tâches pour l'opération.",
                annex_b: "Renseignement",
                annex_b_desc: "Préparation du renseignement du champ de bataille, analyse ennemie et exigences de collecte.",
                annex_c: "Opérations",
                annex_c_desc: "Plan tactique détaillé avec graphiques, superpositions et procédures opérationnelles.",
                annex_d: "Feux",
                annex_d_desc: "Plan de soutien-feu, listes de cibles, FSCM, tâches d'artillerie et soutien aérien.",
                annex_e: "Protection",
                annex_e_desc: "Défense aérienne, survivabilité, OPSEC, récupération du personnel et ROE.",
                annex_f: "Soutien",
                annex_f_desc: "Plans complets de logistique, personnel et soutien des services de santé.",
                annex_g: "Génie",
                annex_g_desc: "Tâches du génie pour la mobilité, la contre-mobilité et la survivabilité.",
                annex_h: "Signal",
                annex_h_desc: "Plan détaillé de communications, fréquences, indicatifs et plans PACE.",
                annex_k: "CEMA",
                annex_k_desc: "Plan d'opérations de Guerre Cyber/Électronique et Activités Électromagnétiques.",
                annex_l: "Collecte d'Information",
                annex_l_desc: "Plan de collecte d'information liant les PIR aux actifs et tâches de collecte.",
                misc_annexes: "Annexes Diverses",
                misc_desc: "Annexes supplémentaires selon les besoins spécifiques de la mission.",

                // Buttons and Actions
                generate_opord: "Générer OPORD",
                save_draft: "Sauvegarder Brouillon",
                map_weather: "Carte et Météo",
                snippets: "Extraits",
                mission_builder: "Constructeur de Déclaration de Mission",
                complete_mission_statement: "Déclaration de Mission Complète",
                auto_generate: "Auto-Générer depuis 5 Questions",

                // Draft OPORD Section
                generate_complete_opord: "Générez Votre OPORD Complet",
                generate_opord_description: "Prêt à créer votre ordre d'opération militaire professionnel? Choisissez votre format préféré et générez un OPORD complet et formaté avec toutes les sections et annexes.",
                all_formats_include: "Tous les formats incluent une structure OPORD complète avec annexes selon les standards FM 6-0.",

                // Draft Form Placeholders
                placeholder_situation: "Entrez les détails de la situation...",
                placeholder_mission: "Entrez la déclaration de mission...",
                placeholder_execution: "Entrez les détails d'exécution...",
                placeholder_sustainment: "Entrez les détails de soutien...",
                placeholder_command: "Entrez les détails de commandement et signal...",
                placeholder_coordinates: "Entrez les emplacements clés avec coordonnées (ex., OBJ ALPHA: 18TWL8396007523, CP BRAVO: 44R 206915 3009291)",
                placeholder_task_org: "Entrez l'organisation des tâches...",
                placeholder_intelligence: "Entrez les exigences de renseignement...",
                placeholder_operations: "Entrez les détails de superposition d'opérations...",
                placeholder_fires: "Entrez le plan de soutien-feu...",
                placeholder_protection: "Entrez les mesures de protection...",
                placeholder_sustainment_annex: "Entrez le plan de soutien...",
                placeholder_engineer: "Entrez les tâches du génie...",
                placeholder_signal: "Entrez le plan de transmissions...",
                placeholder_cema: "Entrez le plan d'opérations de guerre cyber/électronique...",
                placeholder_info_collection: "Entrez le plan de collecte d'informations...",
                placeholder_misc_annexes: "Entrez les annexes supplémentaires selon les besoins (ex., Annexe P - Soutien Nation Hôte, Annexe S - Opérations Techniques Spéciales, etc.)...",

                // Draft Form Labels
                key_locations_coordinates: "Emplacements Clés et Coordonnées",

                // Mapping Interface
                enhanced_map_weather: "Intégration Carte et Météo Améliorée",
                enter_coordinates: "Entrer Coordonnées",
                coordinate_system: "Système de Coordonnées",
                weather_units: "Unités Météorologiques",
                execute_search: "Exécuter Recherche",
                search_location: "Rechercher Emplacement",
                tactical_map_interface: "Interface Carte Tactique",
                enter_coords_above: "Entrez les coordonnées ci-dessus et cliquez sur \"Rechercher Emplacement\"",
                add_marker: "Ajouter Marqueur",
                saved_locations: "Emplacements Sauvegardés",
                save_current: "Sauvegarder Actuel",
                coordinate_tools: "Outils de Coordonnées",
                add_to_opord: "Ajouter à OPORD",
                convert_format: "Convertir Format",
                copy_to_clipboard: "Copier dans Presse-papiers",
                clear_saved: "Effacer Sauvegardés",
                no_saved_locations: "Aucun emplacement sauvegardé encore. Utilisez \"Sauvegarder Actuel\" pour ajouter des emplacements.",
                weather_information: "Informations Météorologiques",
                current_weather: "Météo Actuelle",
                forecast_3day: "Prévisions 3 Jours",
                imperial_units: "Impérial (°F)",
                metric_units: "Métrique (°C)",

                // Mapping Buttons and Actions
                insert_current_location: "Insérer Emplacement Actuel de la Carte",
                insert_saved_locations: "Insérer Emplacements Sauvegardés",

                // Distance Calculator
                distance_calculator: "Calculateur de Distance",
                point_a_coordinates: "Coordonnées Point A",
                point_b_coordinates: "Coordonnées Point B",
                calculate_distance: "Calculer Distance",

                // Coordinate Placeholders
                coord_placeholder_mgrs: "ex., 32S 0123456 1234567",
                coord_placeholder_utm: "ex., 32N 123456 1234567",
                coord_placeholder_latlon: "ex., 40.7128, -74.0060",

                // Weather and Tactical Data
                temperature: "Température",
                visibility: "Visibilité",
                wind: "Vent",
                conditions: "Conditions",
                tactical_data: "Données Tactiques",
                bmnt: "BMNT",
                eent: "EENT",
                moon_phase: "Phase Lunaire",
                sunrise: "Lever du Soleil",
                forecast_today: "Aujourd'hui",
                forecast_tomorrow: "Demain",
                forecast_day3: "Jour 3",

                // Saved Location Names
                statue_of_liberty: "STATUE DE LA LIBERTÉ",
                sydney_opera_house: "OPÉRA DE SYDNEY",
                eiffel_tower: "TOUR EIFFEL, FRANCE",
                taj_mahal: "TAJ MAHAL, INDE",
                statue_of_liberty_usa: "STATUE DE LA LIBERTÉ, É.-U.",
                taj_mahal_india: "TAJ MAHAL, INDE",

                // Map Layer Names
                geoapify_street: "Geoapify Rues",
                geoapify_carto: "Geoapify Carto",
                geoapify_liberty: "Geoapify Liberty",
                esri_satellite: "ESRI Satellite",

                // Example OPORD
                complete_example_opord: "Exemple Complet d'OPORD",
                classification: "[CLASSIFICATION]",
                operation_order: "ORDRE D'OPÉRATION",
                battalion_ranger: "2ÈME BATAILLON, 75ÈME RÉGIMENT RANGER",

                // Help Guide
                getting_started: "Commencer",
                coordinate_systems: "Systèmes de Coordonnées",
                weather_integration: "Intégration Météorologique",
                opord_structure: "Structure OPORD",
                welcome_msg: "Bienvenue dans l'Outil Professionnel OPORD LSCO",
                welcome_desc: "Cet outil complet aide les planificateurs militaires à créer des Ordres d'Opération détaillés pour les Opérations de Combat à Grande Échelle.",
                key_features: "Caractéristiques Clés",
                feature_comprehensive: "Structure OPORD complète suivant FM 6-0",
                feature_lsco: "Considérations et exemples spécifiques LSCO",
                feature_annexes: "Modèles d'annexes complets (A à L)",
                feature_export: "Formats d'exportation multiples (TXT, DOCX, PDF)",
                feature_mapping: "Outils de cartographie et météo intégrés",
                coordinate_intro: "L'outil supporte plusieurs systèmes de coordonnées pour une planification militaire précise:",
                lat_lon_system: "Latitude/Longitude (Degrés Décimaux)",
                lat_lon_desc: "Coordonnées géographiques standard utilisant le format degrés décimaux",
                utm_system: "Mercator Transverse Universel (UTM)",
                utm_desc: "Système de référence de grille militaire avec zone, est et nord",
                mgrs_system: "Système de Référence de Grille Militaire (MGRS)",
                mgrs_desc: "Système de coordonnées militaires standard OTAN",
                weather_intro: "L'intégration météorologique en temps réel fournit:",
                current_conditions: "Conditions météorologiques actuelles",
                forecast_3day: "Prévisions météorologiques sur 3 jours",
                tactical_weather: "Considérations météorologiques tactiques",
                opord_intro: "L'OPORD suit le format standard à 5 paragraphes:",

                // Common Terms
                includes: "Inclut:",
                example_content: "Contenu d'Exemple",
                placeholder_enter: "Entrer",
                details: "détails",
                plan: "plan",
                requirements: "exigences",
                measures: "mesures",
                tasks: "tâches",
                support: "soutien",
                example: "Exemple:",
                key_components: "Composants Clés",

                // Section 3 - Execution Additional
                tasks_subordinate: "Tâches aux Unités Subordonnées",
                essential_tasks: "Tâches Essentielles:",
                essential_tasks_desc: "Tâches spécifiques que chaque unité subordonnée doit accomplir",
                task_organization: "Organisation des Tâches:",
                task_org_desc: "Comment les unités sont organisées pour l'opération",
                control_measures_exec: "Mesures de Contrôle:",
                control_measures_exec_desc: "Limites, lignes de phase, points de contrôle, objectifs",
                coordinating_instructions: "Instructions de Coordination",
                fire_support_concept: "Concept de Soutien-Feu:",
                fire_support_desc: "Intégration des feux avec la manœuvre",
                phases_operation: "Phases d'Opération:",
                phases_desc: "Séquence logique d'activités",
                supporting_effort: "Effort de Soutien:",
                supporting_effort_desc: "Unités qui assistent l'effort principal",

                // Section 4 - Sustainment Additional
                human_resources: "Ressources Humaines:",
                financial_mgmt: "Gestion Financière:",
                legal_religious: "Juridique/Religieux:",
                medical_treatment: "Traitement Médical:",
                medical_evacuation: "Évacuation Médicale:",
                preventive_medicine: "Médecine Préventive:",
                lsco_sustainment: "Considérations de Soutien LSCO",
                high_consumption: "Articles de Forte Consommation:",
                sustainment_challenges: "Défis de Soutien:",

                // Section 5 - Command & Signal Additional
                communication_systems: "Systèmes de Communication:",
                network_operations: "Opérations Réseau:",
                signal_operating: "Instructions d'Opération Signal:",
                lsco_c2: "Considérations C2 LSCO",
                communication_challenges: "Défis de Communication",

                // Examples
                example_execution: "Exemple: Paragraphe d'Exécution",
                example_sustainment: "Exemple: Paragraphe de Soutien",
                example_command: "Exemple: Paragraphe de Commandement et Signal",

                // Example Content - Command and Signal
                example_cmd_header: "5. COMMANDEMENT ET TRANSMISSIONS.",
                example_cmd_command: "a. Commandement.",
                example_cmd_command_text: "Commandant situé avec Cie A pendant Phase 1, se déplace vers OBJ BRAVO pendant Phase 2. Succession de commandement: XO, S-3, CDR Cie A. PC principal situé vic grille AB567890, PC tactique se déplace avec effort principal. Relations de commandement: Cie A et Cie B OPCON à 1-32 IN, Cie C (3-7 CAV) TACON pour missions de reconnaissance. Points de décision: PD 1 (H+2) - engager réserve si Cie A ne peut percer obstacles, PD 2 (H+6) - exploiter succès ou consolider positions.",
                example_cmd_signal: "b. Transmissions.",
                example_cmd_signal_text: "Fréquences primaires: Réseau Commandement 54.000 MHz, Réseau Admin/Log 57.000 MHz, Réseau Appui-Feu 60.000 MHz. Fréquences alternatives: Réseau Commandement 45.000 MHz. Indicatifs: STEEL 6 (CDR), STEEL 7 (XO), STEEL 3 (S-3), STEEL 1-6 (CDR Cie A). Authentification: Défi et mot de passe selon SOI actuel. Fenêtres de communication: SITREP horaire à 30 minutes de chaque heure. Procédures d'urgence: Toute station peut rompre silence radio pour MEDEVAC ou menace immédiate.",

                // Example Content - Execution
                example_exec_header: "3. EXÉCUTION.",
                example_exec_intent: "a. Intention du Commandant.",
                example_exec_intent_text: "But: Saisir OBJ BRAVO pour permettre le passage de lignes du 2e BCT et la continuation de l'attaque de division. Méthode: 1-32 IN mène une attaque délibérée en deux phases - Phase 1: Percer les obstacles ennemis et saisir COLLINE 405, Phase 2: Exploiter le succès et sécuriser OBJ BRAVO. L'effort principal passe de Cie A (Phase 1) à Cie B (Phase 2). État final: OBJ BRAVO sécurisé, ennemi détruit ou retiré, couloirs de passage du 2e BCT établis et marqués.",
                example_exec_concept: "b. Concept d'Opérations.",
                example_exec_concept_text: "1-32 IN attaque en zone de AA TIGER à OBJ BRAVO. Phase 1 (Heure-H à H+4): Cie A (Effort Principal) perce CHAMP DE MINES X et saisit COLLINE 405. Cie B soutient par le feu depuis PF ALPHA. Cie C (Réserve) prête à exploiter ou renforcer. Phase 2 (H+4 à H+8): Cie B (Effort Principal) passe à travers Cie A et saisit OBJ BRAVO. Cie A consolide sur COLLINE 405 et fournit surveillance.",
                example_exec_tasks: "c. Tâches aux Unités Subordonnées.",
                example_exec_tasks_text: "Cie A: Percer CHAMP DE MINES X au plus tard H+2, saisir et sécuriser COLLINE 405 au plus tard H+4, être prête à soutenir l'avance de Cie B. Cie B: Soutenir Cie A par le feu depuis PF ALPHA jusqu'à H+4, passer à travers Cie A et saisir OBJ BRAVO au plus tard H+8. Cie C: Réserve, être prête à renforcer Cie A ou exploiter le succès de Cie B, maintenir préparation de 30 minutes.",

                // Help Guide Content
                help_navigation: "Navigation:",
                help_navigation_desc: "Utilisez les onglets de la barre latérale pour accéder aux différentes sections",
                help_time_clocks: "Horloges:",
                help_time_desc: "Affichages de temps en direct: Zulu, Est, Beijing, Moscou, Hawaii, Séoul et Local",
                help_copy_dtg: "Copier DTG:",
                help_copy_desc: "Cliquez sur \"Copier DTG Zulu\" pour le format de temps militaire",
                help_shortcuts: "Raccourcis Clavier:",
                help_shortcuts_desc: "Ctrl+S (sauvegarder), Ctrl+H (aide), Ctrl+M (carte)",

                help_main_sections: "Sections Principales:",
                help_situation_desc: "Ennemi, ami, environnement (OAKOC), considérations civiles",
                help_mission_desc: "Utilisez le cadre des 5 W (Qui, Quoi, Quand, Où, Pourquoi)",
                help_execution_desc: "Intention du commandant, concept d'opérations, tâches",
                help_sustainment_desc: "Logistique, personnel, soutien des services de santé",
                help_command_desc: "Relations C2, communications",

                // Sidebar Navigation Descriptions
                sidebar_situation_desc: "Ennemi, Ami, Environnement",
                sidebar_mission_desc: "Qui, Quoi, Quand, Où, Pourquoi",
                sidebar_execution_desc: "Intention, Concept, Tâches",
                sidebar_sustainment_desc: "Logistique, Personnel, Santé",
                sidebar_command_desc: "C2, Communications",
                sidebar_annexes_desc: "A-H + Annexes Supplémentaires",
                sidebar_example_desc: "Référence Complète",
                sidebar_draft_desc: "Saisie et Génération",

                help_fm_annexes: "Annexes FM 6-0:",
                help_annex_a_short: "Organisation des Tâches",
                help_annex_b_short: "Renseignement",
                help_annex_c_short: "Opérations",
                help_annex_d_short: "Feux",
                help_annex_e_short: "Protection",
                help_annex_f_short: "Soutien",
                help_annex_g_short: "Génie",
                help_annex_h_short: "Transmissions",

                help_draft_system: "Utilisation du Système de Brouillon",
                help_mission_builder: "Constructeur de Mission:",
                help_mission_builder_desc: "Remplissez les 5 W, puis cliquez sur \"Auto-Générer\" pour le format approprié",
                help_section_input: "Saisie de Section:",
                help_section_input_desc: "Utilisez les zones de texte pour chaque section OPORD",
                help_annexes_desc: "Complétez toutes les 8 annexes FM 6-0 selon les besoins",
                help_save_draft: "Sauvegarder le Brouillon:",
                help_save_draft_desc: "Sauvegarde automatiquement dans le stockage local",
                help_export: "Exporter:",
                help_export_desc: "Télécharge l'OPORD complet avec toutes les annexes",

                help_coordinate_input: "Saisie de Coordonnées:",
                help_coordinate_desc: "Entrez les coordonnées MGRS, UTM ou Lat/Long",
                help_search_location: "Rechercher un Lieu:",
                help_search_desc: "Trouvez et affichez l'emplacement avec les données météorologiques",
                help_add_markers: "Ajouter des Marqueurs:",
                help_markers_desc: "Placez des marqueurs tactiques sur les objectifs",
                help_convert_coords: "Convertir les Coordonnées:",
                help_convert_desc: "Basculer entre les systèmes de coordonnées",
                help_saved_locations: "Emplacements Sauvegardés:",
                help_saved_desc: "Sauvegarder et gérer les emplacements personnalisés",

                help_ref_coords: "Points de Test de Coordonnées de Référence:",
                help_taj_mahal: "Taj Mahal, Inde (UTM):",
                help_statue_liberty: "Statue de la Liberté, NY (UTM):",
                help_eiffel_tower: "Tour Eiffel, France (MGRS):",
                help_sydney_opera: "Opéra de Sydney, Australie (Lat/Long):",
                help_coords_note: "Ces coordonnées sont des points de référence vérifiés pour tester la précision de conversion des coordonnées.",

                help_lsco_considerations: "Considérations LSCO",
                help_multi_domain: "Opérations Multi-Domaines:",
                help_multi_domain_desc: "Considérez les menaces cyber, EW, spatiales",
                help_high_consumption: "Forte Consommation:",
                help_consumption_desc: "Planifiez pour une utilisation accrue de munitions et de carburant",
                help_contested_env: "Environnement Contesté:",
                help_contested_desc: "Supposez des communications dégradées",
                help_mass_casualties: "Pertes Massives:",
                help_casualties_desc: "Planifiez pour des exigences médicales importantes",
                help_extended_ops: "Opérations Prolongées:",
                help_extended_desc: "Considérez le soutien dans le temps",

                help_tips_success: "Conseils pour le Succès",
                help_start_mission: "Commencez par la Mission:",
                help_start_desc: "Une déclaration de mission claire guide tout le reste",
                help_use_examples: "Utilisez les Exemples:",
                help_examples_desc: "Cliquez sur \"Contenu d'Exemple\" pour des conseils",
                help_be_specific: "Soyez Spécifique:",
                help_specific_desc: "Incluez les coordonnées de grille, les heures et les désignations d'unité",
                help_check_doctrine: "Vérifiez la Doctrine:",
                help_doctrine_desc: "Tout le contenu basé sur les normes FM 6-0",
                help_save_often: "Sauvegardez Souvent:",
                help_save_often_desc: "Utilisez Ctrl+S ou cliquez sur les boutons de sauvegarde régulièrement",

                // LSCO Content - High Consumption Items
                ammo_precision: "Munitions (surtout munitions de précision)",
                fuel_extended: "Carburant pour opérations prolongées",
                medical_mass_cas: "Fournitures médicales pour pertes massives",
                repair_parts: "Pièces de rechange pour dégradation d'équipement",

                // LSCO Content - Sustainment Challenges
                extended_supply: "Lignes d'approvisionnement étendues sous menace",
                contested_logistics: "Opérations logistiques contestées",
                increased_maintenance: "Exigences de maintenance accrues",
                mass_casualty_scenarios: "Scénarios de pertes massives",

                // Example Content - Sustainment
                example_sust_header: "4. SOUTIEN.",
                example_sust_logistics: "a. Logistique.",
                example_sust_logistics_text: "Approvisionnement: Réapprovisionnement Classe I et III effectué quotidiennement à 1800Z au site LOGPAC vic grille AB345678. Réapprovisionnement Classe V sur commande, réapprovisionnement d'urgence disponible en 2 heures. Maintenance: A/3-7 FSB fournit soutien maintenance DS. Équipes maintenance unité co-localisées avec compagnies manœuvre. Actifs récupération positionnés à TAA CHARLIE. Transport: MSR GOLD désignée route approvisionnement primaire, MSR SILVER alternative. Points distribution établis à grille AB234567.",
                example_sust_personnel: "b. Personnel.",
                example_sust_personnel_text: "Ressources Humaines: Rapport pertes selon SOP unité, personnel remplacement intégré niveau compagnie. S-1 maintient responsabilité personnel. Gestion Financière: Paiement urgence disponible via S-1. Soutien Juridique: 1er BCT SJA fournit soutien juridique selon requis. Soutien Religieux: Aumônier disponible pour services religieux et conseil.",
                example_sust_medical: "c. Soutien Services Santé.",
                example_sust_medical_text: "Traitement Médical: Infirmiers compagnie fournissent soins Rôle 1. B/3-7 FSB fournit soins Rôle 2 au BAS vic grille AB456789. Évacuation Médicale: MEDEVAC terrestre via 3-7 FSB, MEDEVAC aérien disponible avec temps réponse 15 minutes. Médecine Préventive: Tests eau effectués quotidiennement, équipe contrôle stress combat disponible sur demande.",

                // Manage Annexes Content
                annexes_intro: "Apprenez les annexes FM 6-0 et leur usage approprié. Chaque annexe fournit des informations spécialisées pour soutenir l'OPORD principal. Utilisez la section \"Brouillon de votre OPORD\" pour créer réellement vos annexes.",
                fm60_structure: "Structure des Annexes FM 6-0",
                fm60_structure_desc: "Les annexes suivantes suivent la doctrine FM 6-0 actuelle. Toutes les annexes ne sont pas requises pour chaque opération - incluez seulement celles pertinentes à votre mission.",
                purpose: "But:",
                includes: "Inclut:",
                example_content: "Contenu d'Exemple",
                key_components: "Composants Clés",
                how_to_use: "Comment Utiliser Ces Annexes",
                how_to_use_desc: "Ces descriptions et exemples sont pour référence et apprentissage. Pour créer réellement vos annexes, utilisez la section \"Brouillon de votre OPORD\" où vous pouvez saisir votre contenu d'annexe spécifique et générer des documents OPORD complets.",

                // Annex Descriptions
                annex_a_desc: "Structure détaillée des unités, rattachements et assignations de tâches pour l'opération.",
                annex_b_desc: "Préparation du renseignement du champ de bataille, analyse ennemie et exigences de collecte.",
                annex_c_desc: "Plan tactique détaillé avec graphiques, superpositions et procédures opérationnelles.",
                annex_d_desc: "Plan d'appui-feu, listes d'objectifs, FSCM, tâches d'artillerie et soutien aérien.",
                annex_e_desc: "Défense aérienne, survivabilité, OPSEC, récupération du personnel et ROE.",
                annex_f_desc: "Plans complets de logistique, personnel et soutien des services de santé.",
                annex_g_desc: "Tâches du génie pour mobilité, contre-mobilité et survivabilité.",
                annex_h_desc: "Plan détaillé de communications, fréquences, indicatifs et plans PACE.",
                annex_k_desc: "Plan d'opérations de Guerre Cyber/Électronique et Activités Électromagnétiques.",
                annex_l_desc: "Plan de collecte d'informations liant les PIR aux actifs et tâches de collecte.",
                misc_annexes: "Annexes Diverses",
                misc_desc: "Annexes supplémentaires selon les besoins spécifiques de la mission.",

                // Annex Purpose and Includes Content
                annex_a_purpose: "Détaille l'allocation des forces et les relations de commandement pour l'opération.",
                annex_a_includes: "Organisation des tâches d'unité, rattachements, détachements et relations de commandement (OPCON, TACON, DS, etc.)",
                annex_b_purpose: "Fournit une analyse détaillée de l'ennemi et un plan de collecte de renseignement.",
                annex_b_includes: "PIR, actifs de collecte, SITTEMP ennemi, produits de renseignement et procédures de diffusion",
                annex_c_purpose: "Contient la superposition d'opérations et le schéma détaillé de manœuvre.",
                annex_c_includes: "Représentation graphique du plan, mesures de contrôle, lignes de phase, objectifs et limites",
                annex_d_purpose: "Fournit une coordination détaillée d'appui-feu et une planification pour l'opération.",
                annex_d_includes: "Mesures de coordination d'appui-feu, listes d'objectifs, tâches d'artillerie, demandes d'appui aérien et matrice d'exécution d'appui-feu",
                annex_e_purpose: "Détaille les mesures de protection pour préserver la puissance de combat et assurer le succès de la mission.",
                annex_e_includes: "Plan de défense aérienne, mesures de survivabilité, procédures OPSEC, récupération du personnel, ROE et mesures de protection des forces",
                annex_f_purpose: "Fournit une planification détaillée de soutien pour maintenir l'efficacité de combat pendant l'opération.",
                annex_f_includes: "Logistique (classes d'approvisionnement), services du personnel, soutien des services de santé, maintenance et plans de distribution",
                annex_g_purpose: "Détaille le soutien du génie pour améliorer la mobilité, refuser la mobilité ennemie et améliorer la survivabilité.",
                annex_g_includes: "Opérations de mobilité, mesures de contre-mobilité, construction de survivabilité, génie général et soutien géospatial",
                annex_h_purpose: "Fournit un soutien complet des communications et systèmes d'information pour le commandement et contrôle.",
                annex_h_includes: "Plans PACE, assignations de fréquence, indicatifs, procédures EMCON et opérations de réseau",
                annex_k_purpose: "Détaille les opérations cyber, guerre électronique et gestion du spectre électromagnétique pour l'opération.",
                annex_k_includes: "Plan d'opérations cyber, cibles EW, gestion de spectre, procédures EMCON et mesures cyber défensives",
                annex_l_purpose: "Détaille le plan de collecte d'informations pour soutenir la prise de décision et la conscience situationnelle.",
                annex_l_includes: "Exigences de Renseignement Prioritaires (PIR), actifs de collecte, procédures de flux d'information et calendriers de rapport",

                // Annex H Example Content
                signal_plan: "1. Plan de Transmissions:",
                pace_plan_example: "a. Plan PACE: Primaire (FM), Alternatif (SATCOM), Contingence (HF), Urgence (Visuel)",
                frequencies_example: "b. Fréquences: Réseau Commandement 54.000 MHz, Réseau Admin/Log 46.000 MHz",
                call_signs_example: "c. Indicatifs: STEEL 6 (CDR), STEEL 7 (XO), STEEL 3 (S3)",
                emcon_example: "d. EMCON: Niveau III jusqu'à Heure-H, puis Niveau II",
                network_ops_example: "e. Opérations Réseau: connectivité SIPR/NIPR, défense cyber",

                // Coordinating Instructions
                time_sequence: "Temps et séquence d'événements",
                rules_engagement: "Règles d'engagement (ROE)",
                risk_mitigation: "Mesures d'atténuation des risques",
                rehearsal_guidance: "Directives de répétition",
                contingency_plans: "Plans de contingence",

                // Human Resources
                casualty_reporting: "Rapport de pertes",
                replacement_ops: "Opérations de remplacement",
                personnel_accountability: "Responsabilité du personnel",

                // Financial Management
                pay_operations: "Opérations de paie",
                contracting_support: "Soutien contractuel",
                resource_management: "Gestion des ressources",

                // Legal/Religious
                legal_support: "Soutien juridique",
                religious_services: "Services religieux",
                morale_support: "Soutien moral",

                // Medical Treatment
                role_1_unit: "Rôle 1 (Niveau unité)",
                role_2_forward: "Rôle 2 (Soutien avancé)",
                triage_procedures: "Procédures de triage",

                // Medical Evacuation
                medevac_procedures: "Procédures MEDEVAC",
                casualty_collection: "Collecte de pertes",
                evacuation_routes: "Routes d'évacuation",

                // Preventive Medicine
                disease_prevention: "Prévention des maladies",
                environmental_health: "Santé environnementale",
                combat_stress_control: "Contrôle du stress de combat",

                // Communication Systems
                primary_alternate_freq: "Fréquences primaires et alternatives",
                call_signs_auth: "Indicatifs et authentification",
                communication_windows: "Fenêtres de communication",

                // Network Operations
                digital_comm_systems: "Systèmes de communication numériques",
                network_security_protocols: "Protocoles de sécurité réseau",
                cyber_defense_measures: "Mesures de défense cyber",

                // Signal Operating Instructions
                communication_procedures: "Procédures de communication",
                emergency_procedures: "Procédures d'urgence",
                comsec_requirements: "Exigences COMSEC",

                // LSCO C2 Considerations
                redundant_comm_systems: "Systèmes de communication redondants",
                ew_countermeasures: "Contre-mesures guerre électronique",
                distributed_command_posts: "Postes de commandement distribués",
                mission_command_philosophy: "Philosophie de commandement de mission",
                rapid_decision_making: "Processus de prise de décision rapide",

                // Communication Challenges
                enemy_electronic_warfare: "Guerre électronique ennemie",
                degraded_comm_environments: "Environnements de communication dégradés",
                extended_comm_ranges: "Portées de communication étendues",
                interoperability_requirements: "Exigences d'interopérabilité",
                cyber_threats_networks: "Menaces cyber aux réseaux",

                // Annex G (Engineer) Example Content
                engineer_tasks: "1. Tâches du Génie:",
                mobility_example: "a. Mobilité: Nettoyer CHAMP DE MINES X d'ici H+2, opérations de brèche",
                countermobility_example: "b. Contre-mobilité: Placer obstacles sur PL SILVER, refuser routes",
                survivability_example: "c. Survivabilité: Construire positions de combat, positions protectrices",
                supporting_unit_example: "d. Unité de Soutien: Cie A, 3-7 GEN (DS à TF)",
                general_engineering_example: "e. Génie Général: Maintenance des routes, services publics",

                // Annex C (Operations) Key Components
                operations_overlay: "Superposition d'Opérations (Graphique)",
                scheme_maneuver_details: "Détails du Schéma de Manœuvre",
                control_measures_boundaries: "Mesures de Contrôle et Limites",
                phase_lines_objectives: "Lignes de Phase et Objectifs",

                // Annex D (Fires) Example Content
                fire_support_coordination: "1. Coordination d'Appui-Feu:",
                supporting_units_example: "a. Unités d'Appui: 1-77 FA (DS), 2-8 FA (GSR)",
                priority_fires_example: "b. Priorité des Feux: Cie A (Effort Principal)",
                fscl_example: "c. Ligne de Coordination d'Appui-Feu (FSCL): PL BLUE",
                nfa_example: "d. Zones de Non-Feu (NFA): Village KILO (AB234678)",
                target_list_example: "e. Liste d'Objectifs: TGT AA1001 (PC Ennemi), TGT AA1002 (Position Mortier)",

                // Annex A (Task Organization) Example Content
                task_organization_plan: "1. Organisation des Tâches:",
                main_effort_example: "a. Effort Principal: Cie A, 1-32 IN",
                supporting_effort_example: "b. Effort de Soutien: Cie B, 1-32 IN",
                reserve_example: "c. Réserve: Cie C, 1-32 IN",
                attachments_example: "d. Rattachements: 1er PLT, Cie A, 3-7 CAV (OPCON)",

                // Annex B (Intelligence) Key Components
                pir_requirements: "Exigences de Renseignement Prioritaires (PIR)",
                collection_plan_assets: "Plan de Collecte et Actifs",
                enemy_sittemp: "Modèle de Situation Ennemie (SITTEMP)",
                intel_products_dissem: "Produits de Renseignement et Diffusion",

                // Annex E (Protection) Example Content
                protection_measures: "1. Mesures de Protection:",
                air_defense_example: "a. Défense Aérienne: Statut de Contrôle d'Armes WEAPONS TIGHT",
                opsec_example: "b. OPSEC: Contrôle d'émissions, discipline de camouflage",
                personnel_recovery_example: "c. Récupération du Personnel: Procédures CSAR, personnel isolé",
                roe_example: "d. ROE: Règles d'Engagement selon directive actuelle",
                survivability_example_detailed: "e. Survivabilité: Positions de combat, couverture supérieure",

                // Annex F (Sustainment) Example Content
                sustainment_plan: "1. Plan de Soutien:",
                class_resupply_example: "a. Réapprovisionnement Classe I/III: Quotidien à 1800Z au LOG PAD",
                class_v_example: "b. Classe V: Sur ordre, réapprovisionnement d'urgence 2 heures",
                maintenance_example: "c. Maintenance: Soutien DS du FSB, points de collecte",
                medical_example: "d. Médical: Soins Rôle 1/2, procédures MEDEVAC, emplacements CCP",
                personnel_example: "e. Personnel: Opérations de remplacement, rapport de pertes",

                // Annex K (CEMA) Example Content
                cema_operations: "1. Opérations CEMA:",
                cyber_ops_example: "a. Opérations Cyber: Défense de réseau, cyber offensif",
                electronic_warfare_example: "b. Guerre Électronique: Brouillage, SIGINT, COMINT",
                spectrum_mgmt_example: "c. Gestion de Spectre: Déconfliction de fréquence",
                emcon_example_detailed: "d. EMCON: Procédures de contrôle d'émissions",
                defensive_measures_example: "e. Mesures Défensives: Sécurité de réseau, OPSEC",

                // Annex L (Information Collection) Example Content
                info_collection_plan: "1. Plan de Collecte d'Information:",
                pir_1_example: "a. PIR 1: Emplacements et mouvement des réserves ennemies",
                pir_2_example: "b. PIR 2: Statut d'évacuation civile dans AO",
                collection_assets_example: "c. Actifs de Collecte: UAV, HUMINT, SIGINT",
                reporting_example: "d. Rapports: Rapports SALUTE toutes les 2 heures",
                info_flow_example: "e. Flux d'Information: Collecteurs → S2 → CDR",

                // Miscellaneous Annexes Content
                misc_purpose: "Fournit une flexibilité pour les annexes spécifiques à la mission non couvertes par la structure standard A-L.",
                misc_examples: "Exemples: Annexe P (Soutien de Nation Hôte), Annexe S (Opérations Techniques Spéciales), Annexe M (Évaluation), annexes personnalisées",
                common_additional_annexes: "Annexes Supplémentaires Communes",
                annex_p_desc: "Annexe P (Soutien de Nation Hôte): Coordination de soutien local",
                annex_s_desc: "Annexe S (Opérations Techniques Spéciales): Capacités spécialisées",
                annex_m_desc: "Annexe M (Évaluation): Critères d'évaluation de mission",
                annex_r_desc: "Annexe R (Rapports): Exigences et procédures de rapport",
                custom_annexes_desc: "Annexes Personnalisées: Exigences spécifiques à la mission",

                // Example OPORD Content
                example_opord_classification: "[CLASSIFICATION]",
                example_opord_title: "ORDRE D'OPÉRATION 20241215120000Z",
                example_opord_unit: "2ème Bataillon, 75ème Régiment Ranger",

                // Situation Section
                enemy_forces_header: "a. Forces Ennemies:",
                enemy_forces_content: "Élément ennemi de taille compagnie (120-150 personnel) occupant des positions défensives dans OBJECTIF ALPHA. Les forces ennemies consistent en infanterie mécanisée avec mortiers de soutien et armes antichar. L'ennemi a établi des postes d'observation sur terrain élevé et préparé des positions de combat avec champs de tir entrecroisés. Moral ennemi évalué comme modéré avec capacités de vision nocturne limitées.",

                friendly_forces_header: "b. Forces Amies:",
                friendly_forces_content: "1ère Équipe de Combat de Brigade menant attaque de soutien au nord. 3ème Bataillon, 75ème Rangers fournissant surveillance et appui-feu de l'est. Moyens aériens incluent 2x hélicoptères AH-64 Apache et 1x avion de combat AC-130 en station. Soutien d'artillerie du 1-319ème AFAR avec priorité des feux.",

                environment_header: "c. Environnement:",
                environment_content: "Terrain: Collines ondulées avec végétation éparse, altitude 200-400m. Météo: Ciel dégagé, température 20°C, vent 5-10 mph du nord-ouest. Visibilité illimitée de jour, 2km la nuit. BMNT: 0630Z, EENT: 1830Z. Phase lunaire: 25% croissant décroissant.",

                attachments_header: "d. Rattachements/Détachements:",
                attachments_content: "Rattachés: 1x équipe Observateur Avancé, 1x section Génie de Combat, 1x équipe Chien Militaire. Détachés: Aucun.",

                key_locations_header: "EMPLACEMENTS CLÉS:",
                key_locations_content: "OBJ ALPHA: 32S 0123456 1234567 (MGRS)\nTAA BRAVO: 32S 0120000 1230000 (MGRS)\nPL CHARLIE: 32S 0121000 1232000 (MGRS)\nPC DELTA: 32S 0119000 1229000 (MGRS)",

                // Mission Section
                mission_content: "2ème Bataillon, 75ème Régiment Ranger attaque pour s'emparer d'OBJECTIF ALPHA au plus tard 151800Z DÉC 24 afin de détruire les positions défensives ennemies et sécuriser le terrain clé pour les opérations de suivi.",

                // Execution Section
                commanders_intent_header: "a. Intention du Commandant:",
                commanders_intent_purpose: "But: Détruire la capacité défensive ennemie et sécuriser le terrain clé.",
                commanders_intent_key_tasks: "Tâches Clés: (1) Percer la ligne défensive ennemie, (2) Neutraliser les points forts ennemis, (3) Sécuriser OBJ ALPHA.",
                commanders_intent_end_state: "État Final: Forces ennemies détruites ou retirées, OBJ ALPHA sécurisé, unité prête pour opérations de suivi.",

                concept_ops_header: "b. Concept d'Opérations:",
                concept_ops_phase1: "Phase 1 (Mouvement): Les unités se déplacent de TAA BRAVO vers positions d'assaut sous couvert d'obscurité.",
                concept_ops_phase2: "Phase 2 (Assaut): Attaque coordonnée avec feux de soutien pour percer positions ennemies.",
                concept_ops_phase3: "Phase 3 (Consolidation): Sécuriser objectif et préparer positions défensives.",

                tasks_subordinate_header: "c. Tâches aux Unités Subordonnées:",
                tasks_alpha_company: "Compagnie Alpha: Effort principal. Attaquer le long d'AXE EAGLE pour s'emparer de la partie nord d'OBJ ALPHA.",
                tasks_bravo_company: "Compagnie Bravo: Effort de soutien. Attaquer le long d'AXE FALCON pour s'emparer de la partie sud d'OBJ ALPHA.",
                tasks_charlie_company: "Compagnie Charlie: Réserve de bataillon. Prête à exploiter le succès ou renforcer l'effort principal.",

                coordinating_instructions_header: "d. Instructions de Coordination:",
                coordinating_h_hour: "• Heure-H: 151600Z DÉC 24",
                coordinating_roe: "• ROE: Identification positive requise avant engagement",
                coordinating_ccir: "• CCIR: Renforts ennemis, présence civile, emplacements d'obstacles",
                coordinating_rehearsal: "• Répétition: 141400Z à TAA BRAVO",

                // Sustainment Section
                logistics_header: "a. Logistique:",
                logistics_content: "Classe I: 3 jours en main. Classe III: Point carburant à TAA BRAVO. Classe V: Charge de base plus 50% supplémentaire. Réapprovisionnement via convoi terrestre à PL CHARLIE.",

                personnel_services_header: "b. Services du Personnel:",
                personnel_services_content: "Opérations de remplacement via S-1. Point de collecte EPW à PC DELTA. Soutien moral via services d'aumônerie.",

                health_service_header: "c. Soutien des Services de Santé:",
                health_service_content: "Poste de Secours de Bataillon à PC DELTA. LZ MEDEVAC à TAA BRAVO. Priorité: Urgent, Priorité, Routine. Procédures 9-lignes en vigueur.",

                // Command & Signal Section
                command_header: "a. Commandement:",
                command_content: "Emplacement PC: PC DELTA (32S 0119000 1229000). Succession de commandement: CDT, ADJ, S-3, Commandant Compagnie Alpha.",

                control_header: "b. Contrôle:",
                control_content: "Rapports: SITREP toutes les 30 minutes. SPOTREP selon besoin. Points de contrôle: Alpha, Bravo, Charlie établis.",

                signal_header: "c. Transmissions:",
                signal_content: "Primaire: Réseau radio FM. Alternatif: Communications satellite. Contingence: Signaux visuels. Urgence: Pyrotechnie. Fréquences: Réseau Commandement 45.000, Réseau Admin 46.000.",

                // Annexes Section
                annexes_header: "ANNEXES:",
                annex_a_desc_example: "Annexe A (Organisation des Tâches): Assignations d'unités détaillées et rattachements",
                annex_b_desc_example: "Annexe B (Renseignement): Situation ennemie, analyse terrain, données météo",
                annex_c_desc_example: "Annexe C (Opérations): Plan tactique détaillé et superposition graphique",
                annex_d_desc_example: "Annexe D (Feux): Plan d'artillerie et soutien aérien rapproché",
                annex_e_desc_example: "Annexe E (Protection): Protection des forces et mesures NRBC",
                annex_f_desc_example: "Annexe F (Soutien): Plan détaillé logistique et soutien médical",
                annex_g_desc_example: "Annexe G (Génie): Réduction d'obstacles et soutien mobilité",
                annex_h_desc_example: "Annexe H (Transmissions): Plan communications et fréquences",

                // Example OPORD Notes
                example_opord_notes_header: "Notes Exemple OPORD",
                example_notes_purpose: "But: Cet exemple démontre une structure OPORD complète suivant les standards FM 6-0.",
                example_notes_key_elements: "Éléments Clés: Notez la situation ennemie détaillée, énoncé de mission clair, plan d'exécution complet et considérations de soutien complètes.",
                example_notes_coordinates: "Coordonnées: Tous les graphiques tactiques utilisent coordonnées MGRS pour précision et standardisation.",
                example_notes_classification: "Classification: Remplacez [CLASSIFICATION] par marquages de sécurité appropriés pour votre réseau.",
                example_notes_customization: "Personnalisation: Adaptez ce format et niveau de détail à vos exigences opérationnelles spécifiques."
            },

            de: {
                // Header and Navigation
                opord_tool: "OPORD-Tool",
                military_planning: "Militärischer Planungsassistent",
                copy_dtg: "Zulu DTG Kopieren",
                menu: "Menü",
                opord_sections: "OPORD-Abschnitte",

                // Tab Navigation
                help_guide: "Hilfsleitfaden",
                example_opord: "Beispiel OPORD",
                draft_opord: "Entwurf OPORD",
                draft_opord_description: "Erstellen Sie Ihren OPORD mit integrierten Karten- und Wetter-Tools. Verwenden Sie das Karten- und Wetter-Tool, um Koordinaten und taktische Daten für Ihre Operation zu erhalten.",
                manage_annexes: "Anhänge Verwalten",

                // Placeholder translations
                placeholder_unit_designation: "Einheitsbezeichnung",
                placeholder_tactical_task: "Taktische Aufgabe",
                placeholder_nlt_dtg: "NLT DTG",
                placeholder_objective_location: "Ziel/Standort",
                placeholder_purpose: "Zweck",
                placeholder_mission_statement: "[Einheit] [Aufgabe] [Ziel] [NLT DTG] um [Zweck]",
                placeholder_situation: "Situationsdetails eingeben...",
                placeholder_coordinates: "Schlüsselstandorte mit Koordinaten eingeben (z.B., OBJ ALPHA: 18TWL8396007523, CP BRAVO: 44R 206915 3009291)",
                placeholder_execution: "Ausführungsdetails eingeben...",
                placeholder_sustainment: "Unterstützungsdetails eingeben...",
                placeholder_command: "Führungs- und Fernmeldedetails eingeben...",
                placeholder_task_organization: "Aufgabenorganisation eingeben...",
                placeholder_intelligence: "Aufklärungsanforderungen eingeben...",
                placeholder_operations: "Operationsüberlagerungsdetails eingeben...",
                placeholder_fires: "Feuerunterstützungsplan eingeben...",
                placeholder_protection: "Schutzmaßnahmen eingeben...",
                placeholder_sustainment_plan: "Unterstützungsplan eingeben...",
                placeholder_engineer: "Pionieraufgaben eingeben...",
                placeholder_signal: "Fernmeldeplan eingeben...",
                placeholder_cema: "Cyber-/Elektronische Kriegsführungsoperationsplan eingeben...",
                placeholder_info_collection: "Informationssammlungsplan eingeben...",
                placeholder_misc_annexes: "Zusätzliche Anhänge nach Bedarf eingeben (z.B., Anhang P - Gastlandunterstützung, Anhang S - Spezielle Technische Operationen, etc.)...",

                // Section headers
                annexes_fm60_structure: "Anhänge (FM 6-0 Struktur)",

                // Snippets translations
                snippets_library: "OPORD Textbausteine Bibliothek",
                mission_statement_templates: "Missionserklärungs-Vorlagen",
                section3_execution_snippets: "Abschnitt 3: Ausführungs-Textbausteine",
                section4_sustainment_snippets: "Abschnitt 4: Unterstützungs-Textbausteine",
                annexh_signal_snippets: "Anhang H: Fernmelde-Textbausteine",
                annexa_task_organization_snippets: "Anhang A: Aufgabenorganisation",
                annexd_fires_snippets: "Anhang D: Feuer",
                custom_snippets: "Benutzerdefinierte Textbausteine",
                manage_snippets: "Textbausteine Verwalten",
                clear_draft: "Entwurf Löschen",
                donate: "Entwicklung Unterstützen",
                donate_desc: "Dieses Tool Kostenlos Halten",
                donate_title: "Entwicklung Unterstützen",
                donate_subtitle: "Helfen Sie, Dieses Militärische Planungstool Kostenlos zu Halten",
                donate_description: "Dieses OPORD-Tool wird von Militärprofis für die Militärgemeinschaft entwickelt und gepflegt. Ihre Unterstützung hilft uns, diese kostenlose Ressource mit neuen Funktionen, besserer Genauigkeit und verbesserter Funktionalität für militärische Planungsoperationen weiter zu verbessern.",
                donate_development: "Kontinuierliche Entwicklung",
                donate_costs: "Server- und API-Kosten",
                donate_community: "Gemeinschaftsunterstützung",
                donate_card_title: "Kredit-/Debitkarte",
                donate_card_desc: "Sichere Zahlungsabwicklung über PayPal",
                donate_paypal: "PayPal-Spende",
                donate_secure: "Sichere SSL-verschlüsselte Transaktionen",
                donate_crypto_title: "Kryptowährung",
                donate_crypto_desc: "Direkte Krypto-Spenden - keine Gebühren, maximale Wirkung",
                donate_copy: "Kopieren",
                donate_btc_copied: "Bitcoin-Adresse kopiert!",
                donate_eth_copied: "Ethereum-Adresse kopiert!",
                donate_sol_copied: "Solana-Adresse kopiert!",
                donate_verify: "Adressen vor dem Senden immer überprüfen",
                donate_thanks_title: "Vielen Dank für Ihre Unterstützung!",
                donate_thanks_desc: "Jede Spende, egal wie groß, hilft uns, dieses Tool für die Militärgemeinschaft zu pflegen und zu verbessern. Ihre Unterstützung stellt sicher, dass wir weiterhin genaue, aktuelle militärische Planungsressourcen völlig kostenlos bereitstellen können.",
                donate_by_military: "Entwickelt von Militärprofis, für Militärprofis",
                donate_contact_title: "Fragen oder Vorschläge?",
                donate_contact_desc: "Haben Sie Ideen für neue Funktionen oder einen Fehler gefunden? Wir würden gerne von Ihnen hören!",
                donate_contact_btn: "Entwicklungsteam Kontaktieren",
                feedback_name_label: "Name (Optional):",
                feedback_name_placeholder: "Ihr Name",
                feedback_message_label: "Nachricht:",
                feedback_message_placeholder: "Teilen Sie Ihre Ideen mit, melden Sie Fehler oder stellen Sie Fragen...",
                send_feedback: "Feedback Senden",
                sending_feedback: "Wird gesendet...",
                feedback_alternative: "Oder verwenden Sie unser Google-Formular:",
                open_google_form: "Google-Formular Öffnen",
                feedback_type_label: "Feedback-Typ:",
                feedback_improvements: "Verbesserungen",
                feedback_sustains: "Beibehalten (Was gut funktioniert)",
                feedback_bugs: "Fehler und Bugs",
                feedback_contact_label: "Kontaktinformationen (Optional):",
                feedback_contact_placeholder: "E-Mail oder andere Kontaktinformationen (optional)",
                feedback_form_description: "Teilen Sie Ihr Feedback, Vorschläge oder melden Sie Fehler über unser Google-Formular.",
                feedback_categories_title: "Feedback-Kategorien:",
                feedback_sustains_desc: "Was hat Ihnen gefallen?",
                feedback_improvements_desc: "Was hat Ihnen nicht gefallen?",
                feedback_bugs_desc: "Fehlerberichte oder Feature-Anfragen",
                feedback_contact_desc: "Optionale Kontaktinformationen",
                feedback_form_security: "Öffnet in neuem Tab • Vollständig sicher • Keine Anmeldung erforderlich",
                open_feedback_form: "Feedback-Formular Öffnen",
                donate_qr_scan: "Oder PayPal QR-Code scannen:",
                donate_qr_mobile: "Mit Mobilgerät scannen für schnelle Spende",
                donate_qr_scan_crypto: "Scannen zum Senden",
                donate_paypal_btn: "Mit PayPal spenden",
                donate_paypal_secure: "Sicher & Schnell",
                donate_cards_accepted: "Akzeptierte Zahlungsmethoden:",
                disclaimer_text: "Dieses Produkt ist ein Trainingshilfsmittel und wird nicht von der US-Armee oder dem Verteidigungsministerium unterstützt. Verwenden Sie es nach eigenem Ermessen. Geben Sie Keine Klassifizierten Materialien Ein.",
                user_manual: "Benutzerhandbuch",
                text_templates: "Textvorlagen",
                reset_all: "Alles Zurücksetzen",

                // Time Display
                military_time_ref: "Militärische Zeitreferenz",
                zulu_utc: "Zulu (UTC)",
                eastern_us: "Ostküste USA",
                beijing_china: "Peking China",
                moscow_russia: "Moskau Russland",
                hawaii_usa: "Hawaii USA",
                seoul_korea: "Seoul Korea",
                local_time: "Ortszeit",

                // Section 1 - Situation
                situation: "1. Lage",
                situation_desc: "Umfassenden Überblick über die operative Umgebung für Großangelegte Kampfoperationen (LSCO) bereitstellen.",
                enemy_forces: "Feindliche Kräfte",
                friendly_forces: "Eigene Kräfte",
                environment: "Umgebung",
                composition_disposition: "Zusammensetzung und Aufstellung:",
                composition_desc: "Feindliche Einheitenstruktur, Standorte und Stärkeschätzungen detaillieren",
                capabilities: "Fähigkeiten:",
                capabilities_desc: "Multi-Domain-Bedrohungen einschließen (Cyber, EloKa, Luftverteidigung, Artillerie)",
                mlcoa: "Wahrscheinlichster Handlungsweg (MLCOA):",
                mlcoa_desc: "Primärer feindlicher Handlungsweg",
                mdcoa: "Gefährlichster Handlungsweg (MDCOA):",
                mdcoa_desc: "Worst-Case-Feindszenario",
                recent_activities: "Jüngste Aktivitäten:",
                recent_desc: "Aufklärungsupdates und feindliche Muster",
                higher_hq: "Mission der höheren Führung:",
                higher_desc: "Mission und Absicht zwei Ebenen höher",
                adjacent_units: "Benachbarte Einheiten:",
                adjacent_desc: "Missionen der linken, rechten und unterstützenden Einheiten",
                supporting_elements: "Unterstützende Elemente:",
                supporting_desc: "Artillerie, Luftunterstützung, Pioniere, etc.",
                boundaries: "Grenzen:",
                boundaries_desc: "Operationsgebiet und Kontrollmaßnahmen der Einheit",
                oakoc_analysis: "OAKOC-Analyse:",
                observation_fires: "Beobachtung und Schussfelder:",
                observation_desc: "Sichtbarkeit und Gefechtsräume",
                avenues_approach: "Annäherungswege:",
                avenues_desc: "Feindliche und eigene Bewegungskorridore",
                key_terrain: "Schlüsselgelände:",
                key_terrain_desc: "Entscheidende Geländemerkmale",
                obstacles: "Hindernisse:",
                obstacles_desc: "Natürliche und künstliche Barrieren",
                cover_concealment: "Deckung und Tarnung:",
                cover_desc: "Schutz vor Beobachtung/Feuer",

                // Section 2 - Mission
                mission: "2. Auftrag",
                mission_desc: "Die wesentliche Aufgabe und den Zweck der Einheit in einem klaren, prägnanten Satz darlegen.",
                five_ws_framework: "Fünf-W-Rahmen",
                who: "Wer",
                who_desc: "Ihre Einheitenbezeichnung",
                what: "Was",
                what_desc: "Taktisches Aufgabenverb",
                when: "Wann",
                when_desc: "NLT Datum-Zeit-Gruppe",
                where: "Wo",
                where_desc: "Ziel oder Standort",
                why: "Warum",
                why_desc: "Zweck verknüpft mit höherer Absicht",
                mission_format: "Auftragsformat",
                mission_template: "[Einheit] [Aufgabe] [Ziel] [NLT DTG] um [Zweck]",

                // Section 3 - Execution
                execution: "3. DURCHFÜHRUNG",
                execution_desc: "Beschreiben, wie die Einheit die Mission erfüllen wird. Dies ist das Herzstück des OPORD und liefert Untergebenen die wesentlichen Informationen für erfolgreiche Ausführung.",

                // Execution Subsections
                commanders_intent: "a. Führungsabsicht",
                commanders_intent_desc: "Zweck der Operation, Schlüsselaufgaben und Endzustand nach FM 6-0 Standards beschreiben.",
                concept_operations: "b. Operationskonzept",
                concept_operations_desc: "Beschreiben, wie die Einheit die Mission erfüllen wird, einschließlich Aktionssequenz und Schwerpunkt.",
                tasks_subordinate_units: "c. Aufgaben an Untergeordnete Einheiten",
                tasks_subordinate_desc: "Spezifische Aufgaben an untergeordnete Einheiten zuweisen (Korps bis Zugeben). Format nach FM 6-0 Richtlinien.",
                tasks_staff: "d. Aufgaben an Stab",
                tasks_staff_desc: "Spezifische Stab-Aufgaben und Verantwortlichkeiten während der Operation festlegen.",

                // Placeholders
                placeholder_commanders_intent: "Zweck: [Warum diese Operation durchgeführt wird]\nSchlüsselaufgaben: [Wesentliche Aufgaben, die erfüllt werden müssen]\nEndzustand: [Gewünschte Bedingungen bei Operationsabschluss]",
                placeholder_concept_operations: "Aktionssequenz: [Wie die Operation ablaufen wird]\nSchwerpunkt: [Hauptfokus der Operation]\nUnterstützungsanstrengungen: [Wie andere Elemente den Schwerpunkt unterstützen]",
                placeholder_tasks_subordinate: "1. Zug: \n2. Zug: \n3. Zug: \nWaffen-Gruppe: \nUnterstützungselemente: \n\n[Zusätzliche Einheiten nach Bedarf hinzufügen]",
                placeholder_tasks_staff: "S-1: [Personalaufgaben]\nS-2: [Aufklärungsaufgaben]\nS-3: [Operationsaufgaben]\nS-4: [Logistikaufgaben]\nS-6: [Fernmeldeaufgaben]",

                // Dynamic Unit Management
                add_unit_btn: "Einheit Hinzufügen",
                remove_unit_btn: "Entfernen",
                select_unit_placeholder: "Einheit Auswählen",
                custom_unit_option: "Benutzerdefiniert...",
                custom_unit_placeholder: "Benutzerdefinierte Einheit",
                unit_task_placeholder: "Aufgabenzuweisung eingeben...",

                // Military Unit Types
                unit_1st_div: "1. DIV",
                unit_2nd_div: "2. DIV",
                unit_3rd_div: "3. DIV",
                unit_4th_div: "4. DIV",
                unit_5th_div: "5. DIV",
                unit_1st_bde: "1. BDE",
                unit_2nd_bde: "2. BDE",
                unit_3rd_bde: "3. BDE",
                unit_4th_bde: "4. BDE",
                unit_5th_bde: "5. BDE",
                unit_alpha_company: "Alpha Kompanie",
                unit_bravo_company: "Bravo Kompanie",
                unit_charlie_company: "Charlie Kompanie",
                unit_delta_company: "Delta Kompanie",
                unit_1st_plt: "1. Zug",
                unit_2nd_plt: "2. Zug",
                unit_3rd_plt: "3. Zug",
                unit_4th_plt: "4. Zug",
                unit_weapons_squad: "Waffen-Gruppe",
                unit_support_squad: "Unterstützungsgruppe",
                unit_hq_element: "Führungselement",
                unit_artillery: "Artillerie",
                unit_engineers: "Pioniere",
                unit_medical: "Sanitätsdienst",
                unit_supply: "Versorgung",
                unit_maintenance: "Instandhaltung",
                commander_intent: "Führungsabsicht",
                purpose: "Zweck:",
                purpose_desc: "Warum die Operation durchgeführt wird",
                key_tasks: "Schlüsselaufgaben:",
                key_tasks_desc: "Wesentliche Aufgaben, die erfüllt werden müssen",
                end_state: "Endzustand:",
                end_state_desc: "Gewünschte Bedingungen bei Operationsabschluss",
                concept_operations: "Operationskonzept",
                scheme_maneuver: "Manöverschema:",
                scheme_desc: "Wie Kräfte angeordnet und eingesetzt werden",
                main_effort: "Schwerpunkt:",
                main_effort_desc: "Einheit oder Aktivität, die der Kommandeur priorisiert",
                supporting_effort: "Unterstützungsanstrengung:",
                supporting_desc: "Einheiten, die den Schwerpunkt unterstützen",
                reserve: "Reserve:",
                reserve_desc: "Für Eventualitäten zurückgehaltene Kräfte",

                // Section 4 - Sustainment
                sustainment: "4. Versorgung",
                sustainment_desc: "Logistik, Personaldienste und Sanitätsdienst-Unterstützung für die Operation behandeln.",
                logistics: "Logistik",
                personnel_services: "Personaldienste",
                health_service: "Sanitätsdienst-Unterstützung",
                supply: "Versorgung:",
                supply_desc: "Versorgungsklassen und Verteilungsmethoden",
                maintenance: "Instandhaltung:",
                maintenance_desc: "Ausrüstungswartung und Bergungsverfahren",
                transportation: "Transport:",
                transport_desc: "Bewegung von Personal, Ausrüstung und Vorräten",
                field_services: "Felddienste:",
                field_desc: "Bestattungswesen, Rechtsunterstützung, Finanzmanagement",

                // Section 5 - Command & Signal
                command_signal: "5. Führung und Fernmeldewesen",
                command_signal_desc: "Führungsbeziehungen und Kommunikationsverfahren für die Operation festlegen.",
                command: "Führung",
                signal: "Fernmeldewesen",
                command_relationships: "Führungsbeziehungen:",
                command_rel_desc: "Befehlskette und Nachfolge",
                control_measures: "Kontrollmaßnahmen:",
                control_desc: "Grenzen, Kontrollpunkte und Koordinationsmaßnahmen",
                reports: "Meldungen:",
                reports_desc: "Erforderliche Meldungen und Meldeverfahren",

                // Annexes Content
                annex_a: "Aufgabenorganisation",
                annex_a_desc: "Detaillierte Einheitenstruktur, Unterstellungen und Aufgabenzuweisungen für die Operation.",
                annex_b: "Aufklärung",
                annex_b_desc: "Aufklärungsvorbereitung des Schlachtfelds, Feindanalyse und Sammlungsanforderungen.",
                annex_c: "Operationen",
                annex_c_desc: "Detaillierter taktischer Plan mit Grafiken, Überlagerungen und Operationsverfahren.",
                annex_d: "Feuer",
                annex_d_desc: "Feuerunterstützungsplan, Ziellisten, FSCM, Artillerieaufgaben und Luftunterstützung.",
                annex_e: "Schutz",
                annex_e_desc: "Luftverteidigung, Überlebensfähigkeit, OPSEC, Personalbergung und ROE.",
                annex_f: "Versorgung",
                annex_f_desc: "Umfassende Logistik-, Personal- und Sanitätsdienst-Unterstützungspläne.",
                annex_g: "Pioniere",
                annex_g_desc: "Pionieraufgaben für Beweglichkeit, Gegenbeweglichkeit und Überlebensfähigkeit.",
                annex_h: "Fernmeldewesen",
                annex_h_desc: "Detaillierter Kommunikationsplan, Frequenzen, Rufzeichen und PACE-Pläne.",
                annex_k: "CEMA",
                annex_k_desc: "Cyber-/Elektronische Kriegsführung und Elektromagnetische Aktivitäten Operationsplan.",
                annex_l: "Informationssammlung",
                annex_l_desc: "Informationssammlungsplan, der PIR mit Sammlungsressourcen und -aufgaben verknüpft.",
                misc_annexes: "Verschiedene Anhänge",
                misc_desc: "Zusätzliche Anhänge nach Bedarf für missionsspezifische Anforderungen.",

                // Buttons and Actions
                generate_opord: "OPORD Generieren",
                save_draft: "Entwurf Speichern",
                map_weather: "Karte & Wetter",
                snippets: "Ausschnitte",
                mission_builder: "Auftragserklärungs-Generator",
                complete_mission_statement: "Vollständige Auftragserklärung",
                auto_generate: "Auto-Generieren aus 5 W-Fragen",

                // Draft OPORD Section
                generate_complete_opord: "Generieren Sie Ihren Vollständigen OPORD",
                generate_opord_description: "Bereit, Ihren professionellen militärischen Operationsbefehl zu erstellen? Wählen Sie Ihr bevorzugtes Format und generieren Sie einen vollständigen, formatierten OPORD mit allen Abschnitten und Anhängen.",
                all_formats_include: "Alle Formate enthalten vollständige OPORD-Struktur mit Anhängen nach FM 6-0 Standards.",

                // Draft Form Placeholders
                placeholder_situation: "Lagedetails eingeben...",
                placeholder_mission: "Auftragserklärung eingeben...",
                placeholder_execution: "Durchführungsdetails eingeben...",
                placeholder_sustainment: "Versorgungsdetails eingeben...",
                placeholder_command: "Führungs- und Fernmeldedetails eingeben...",
                placeholder_coordinates: "Schlüsselstandorte mit Koordinaten eingeben (z.B., ZIEL ALPHA: 18TWL8396007523, GP BRAVO: 44R 206915 3009291)",
                placeholder_task_org: "Aufgabenorganisation eingeben...",
                placeholder_intelligence: "Aufklärungsanforderungen eingeben...",
                placeholder_operations: "Details der Operationsüberlagerung eingeben...",
                placeholder_fires: "Feuerunterstützungsplan eingeben...",
                placeholder_protection: "Schutzmaßnahmen eingeben...",
                placeholder_sustainment_annex: "Versorgungsplan eingeben...",
                placeholder_engineer: "Pionieraufgaben eingeben...",
                placeholder_signal: "Fernmeldeplan eingeben...",
                placeholder_cema: "Cyber-/Elektronische Kriegsführungsoperationsplan eingeben...",
                placeholder_info_collection: "Informationssammlungsplan eingeben...",
                placeholder_misc_annexes: "Zusätzliche Anhänge nach Bedarf eingeben (z.B., Anhang P - Gastlandunterstützung, Anhang S - Spezielle Technische Operationen, etc.)...",

                // Draft Form Labels
                key_locations_coordinates: "Schlüsselstandorte und Koordinaten",

                // Mapping Interface
                enhanced_map_weather: "Erweiterte Karten- und Wetterintegration",
                enter_coordinates: "Koordinaten Eingeben",
                coordinate_system: "Koordinatensystem",
                weather_units: "Wettereinheiten",
                execute_search: "Suche Ausführen",
                search_location: "Standort Suchen",
                tactical_map_interface: "Taktische Kartenschnittstelle",
                enter_coords_above: "Geben Sie oben Koordinaten ein und klicken Sie auf \"Standort Suchen\"",
                add_marker: "Markierung Hinzufügen",
                saved_locations: "Gespeicherte Standorte",
                save_current: "Aktuellen Speichern",
                coordinate_tools: "Koordinaten-Tools",
                add_to_opord: "Zu OPORD Hinzufügen",
                convert_format: "Format Konvertieren",
                copy_to_clipboard: "In Zwischenablage Kopieren",
                clear_saved: "Gespeicherte Löschen",
                no_saved_locations: "Noch keine gespeicherten Standorte. Verwenden Sie \"Aktuellen Speichern\", um Standorte hinzuzufügen.",
                weather_information: "Wetterinformationen",
                current_weather: "Aktuelles Wetter",
                forecast_3day: "3-Tage-Vorhersage",
                imperial_units: "Imperial (°F)",
                metric_units: "Metrisch (°C)",

                // Mapping Buttons and Actions
                insert_current_location: "Aktuellen Kartenstandort Einfügen",
                insert_saved_locations: "Gespeicherte Standorte Einfügen",

                // Distance Calculator
                distance_calculator: "Entfernungsrechner",
                point_a_coordinates: "Punkt A Koordinaten",
                point_b_coordinates: "Punkt B Koordinaten",
                calculate_distance: "Entfernung Berechnen",

                // Coordinate Placeholders
                coord_placeholder_mgrs: "z.B., 32S 0123456 1234567",
                coord_placeholder_utm: "z.B., 32N 123456 1234567",
                coord_placeholder_latlon: "z.B., 40.7128, -74.0060",

                // Weather and Tactical Data
                temperature: "Temperatur",
                visibility: "Sichtweite",
                wind: "Wind",
                conditions: "Bedingungen",
                tactical_data: "Taktische Daten",
                bmnt: "BMNT",
                eent: "EENT",
                moon_phase: "Mondphase",
                sunrise: "Sonnenaufgang",
                forecast_today: "Heute",
                forecast_tomorrow: "Morgen",
                forecast_day3: "Tag 3",

                // Saved Location Names
                statue_of_liberty: "FREIHEITSSTATUE",
                sydney_opera_house: "SYDNEY OPERNHAUS",
                eiffel_tower: "EIFFELTURM, FRANKREICH",
                taj_mahal: "TAJ MAHAL, INDIEN",
                statue_of_liberty_usa: "FREIHEITSSTATUE, USA",
                taj_mahal_india: "TAJ MAHAL, INDIEN",

                // Map Layer Names
                geoapify_street: "Geoapify Straßen",
                geoapify_carto: "Geoapify Carto",
                geoapify_liberty: "Geoapify Liberty",
                esri_satellite: "ESRI Satellit",

                // Example OPORD
                complete_example_opord: "Vollständiges Beispiel OPORD",
                classification: "[KLASSIFIZIERUNG]",
                operation_order: "OPERATIONSBEFEHL",
                battalion_ranger: "2. BATAILLON, 75. RANGER-REGIMENT",

                // Help Guide
                getting_started: "Erste Schritte",
                coordinate_systems: "Koordinatensysteme",
                weather_integration: "Wetterintegration",
                opord_structure: "OPORD-Struktur",
                welcome_msg: "Willkommen beim Professionellen LSCO OPORD-Tool",
                welcome_desc: "Dieses umfassende Tool unterstützt Militärplaner bei der Erstellung detaillierter Operationsbefehle für Großangelegte Kampfoperationen.",
                key_features: "Hauptmerkmale",
                feature_comprehensive: "Umfassende OPORD-Struktur nach FM 6-0",
                feature_lsco: "LSCO-spezifische Überlegungen und Beispiele",
                feature_annexes: "Vollständige Anhang-Vorlagen (A bis L)",
                feature_export: "Multiple Exportformate (TXT, DOCX, PDF)",
                feature_mapping: "Integrierte Karten- und Wetter-Tools",
                coordinate_intro: "Das Tool unterstützt mehrere Koordinatensysteme für präzise Militärplanung:",
                lat_lon_system: "Breiten-/Längengrad (Dezimalgrad)",
                lat_lon_desc: "Standard-Geografische Koordinaten im Dezimalgrad-Format",
                utm_system: "Universal Transverse Mercator (UTM)",
                utm_desc: "Militärisches Gitternetz-Referenzsystem mit Zone, Ost- und Nordwert",
                mgrs_system: "Militärisches Gitternetz-Referenzsystem (MGRS)",
                mgrs_desc: "NATO-Standard militärisches Koordinatensystem",
                weather_intro: "Echtzeit-Wetterintegration bietet:",
                current_conditions: "Aktuelle Wetterbedingungen",
                forecast_3day: "3-Tage-Wettervorhersage",
                tactical_weather: "Taktische Wetterüberlegungen",
                opord_intro: "Das OPORD folgt dem Standard-5-Absatz-Format:",

                // Common Terms
                includes: "Beinhaltet:",
                example_content: "Beispielinhalt",
                placeholder_enter: "Eingeben",
                details: "Details",
                plan: "Plan",
                requirements: "Anforderungen",
                measures: "Maßnahmen",
                tasks: "Aufgaben",
                support: "Unterstützung",
                example: "Beispiel:",
                key_components: "Hauptkomponenten",

                // Section 3 - Execution Additional
                tasks_subordinate: "Aufgaben an Untergeordnete Einheiten",
                essential_tasks: "Wesentliche Aufgaben:",
                essential_tasks_desc: "Spezifische Aufgaben, die jede untergeordnete Einheit erfüllen muss",
                task_organization: "Aufgabenorganisation:",
                task_org_desc: "Wie Einheiten für die Operation organisiert sind",
                control_measures_exec: "Kontrollmaßnahmen:",
                control_measures_exec_desc: "Grenzen, Phasenlinien, Kontrollpunkte, Ziele",
                coordinating_instructions: "Koordinierende Anweisungen",
                fire_support_concept: "Feuerunterstützungskonzept:",
                fire_support_desc: "Integration von Feuer mit Manöver",
                phases_operation: "Operationsphasen:",
                phases_desc: "Logische Abfolge von Aktivitäten",
                supporting_effort: "Unterstützungsanstrengung:",
                supporting_effort_desc: "Einheiten, die den Schwerpunkt unterstützen",

                // Section 4 - Sustainment Additional
                human_resources: "Personalwesen:",
                financial_mgmt: "Finanzmanagement:",
                legal_religious: "Rechtlich/Religiös:",
                medical_treatment: "Medizinische Behandlung:",
                medical_evacuation: "Medizinische Evakuierung:",
                preventive_medicine: "Präventivmedizin:",
                lsco_sustainment: "LSCO Versorgungsüberlegungen",
                high_consumption: "Artikel mit hohem Verbrauch:",
                sustainment_challenges: "Versorgungsherausforderungen:",

                // Section 5 - Command & Signal Additional
                communication_systems: "Kommunikationssysteme:",
                network_operations: "Netzwerkoperationen:",
                signal_operating: "Signal-Betriebsanweisungen:",
                lsco_c2: "LSCO C2-Überlegungen",
                communication_challenges: "Kommunikationsherausforderungen",

                // Examples
                example_execution: "Beispiel: Durchführungsabsatz",
                example_sustainment: "Beispiel: Versorgungsabsatz",
                example_command: "Beispiel: Führungs- und Fernmeldeabsatz",

                // Example Content - Command and Signal
                example_cmd_header: "5. FÜHRUNG UND FERNMELDEWESEN.",
                example_cmd_command: "a. Führung.",
                example_cmd_command_text: "Kommandeur bei A Kp während Phase 1, verlegt zu OBJ BRAVO während Phase 2. Befehlsfolge: XO, S-3, A Kp Fhr. Haupt-GS bei Gitter AB567890, Takt-GS verlegt mit Schwerpunkt. Führungsbeziehungen: A Kp und B Kp OPCON zu 1-32 IN, C Kp (3-7 CAV) TACON für Aufklärungsmissionen. Entscheidungspunkte: EP 1 (H+2) - Reserve einsetzen falls A Kp Hindernisse nicht überwinden kann, EP 2 (H+6) - Erfolg ausnutzen oder Stellungen festigen.",
                example_cmd_signal: "b. Fernmeldewesen.",
                example_cmd_signal_text: "Hauptfrequenzen: Führungsnetz 54.000 MHz, Admin/Log-Netz 57.000 MHz, Feuerunterstützungsnetz 60.000 MHz. Ausweichfrequenzen: Führungsnetz 45.000 MHz. Rufzeichen: STEEL 6 (Kdr), STEEL 7 (XO), STEEL 3 (S-3), STEEL 1-6 (A Kp Fhr). Authentifizierung: Parole und Kennwort nach aktuellem SOI. Kommunikationsfenster: Stündlicher SITREP 30 Minuten nach jeder Stunde. Notfallverfahren: Jede Station darf Funkstille für MEDEVAC oder unmittelbare Bedrohung brechen.",

                // Example Content - Execution
                example_exec_header: "3. DURCHFÜHRUNG.",
                example_exec_intent: "a. Kommandeurabsicht.",
                example_exec_intent_text: "Zweck: OBJ BRAVO einnehmen um 2. BCT Liniendurchgang und Fortsetzung des Divisionsangriffs zu ermöglichen. Methode: 1-32 IN führt planmäßigen Angriff in zwei Phasen durch - Phase 1: Feindhindernisse durchbrechen und HÜGEL 405 einnehmen, Phase 2: Erfolg ausnutzen und OBJ BRAVO sichern. Schwerpunkt wechselt von A Kp (Phase 1) zu B Kp (Phase 2). Endzustand: OBJ BRAVO gesichert, Feind vernichtet oder zurückgezogen, 2. BCT Durchgangsspuren eingerichtet und markiert.",
                example_exec_concept: "b. Operationskonzept.",
                example_exec_concept_text: "1-32 IN greift in Zone von AA TIGER zu OBJ BRAVO an. Phase 1 (H-Stunde bis H+4): A Kp (Schwerpunkt) durchbricht MINENFELD X und nimmt HÜGEL 405 ein. B Kp unterstützt durch Feuer von FP ALPHA. C Kp (Reserve) bereit zum Ausnutzen oder Verstärken. Phase 2 (H+4 bis H+8): B Kp (Schwerpunkt) stößt durch A Kp vor und nimmt OBJ BRAVO ein. A Kp festigt auf HÜGEL 405 und überwacht.",
                example_exec_tasks: "c. Aufgaben an Untergeordnete Einheiten.",
                example_exec_tasks_text: "A Kp: MINENFELD X spätestens H+2 durchbrechen, HÜGEL 405 spätestens H+4 einnehmen und sichern, bereit sein B Kp Vorstoß zu unterstützen. B Kp: A Kp durch Feuer von FP ALPHA bis H+4 unterstützen, durch A Kp vorstoßen und OBJ BRAVO spätestens H+8 einnehmen. C Kp: Reserve, bereit sein A Kp zu verstärken oder B Kp Erfolg auszunutzen, 30-Minuten Bereitschaft halten.",

                // Help Guide Content
                help_navigation: "Navigation:",
                help_navigation_desc: "Verwenden Sie die Seitenleisten-Registerkarten, um auf verschiedene Abschnitte zuzugreifen",
                help_time_clocks: "Zeituhren:",
                help_time_desc: "Live-Zeitanzeigen: Zulu, Ost, Beijing, Moskau, Hawaii, Seoul und Lokal",
                help_copy_dtg: "DTG Kopieren:",
                help_copy_desc: "Klicken Sie auf \"Zulu DTG Kopieren\" für militärisches Zeitformat",
                help_shortcuts: "Tastenkürzel:",
                help_shortcuts_desc: "Strg+S (speichern), Strg+H (Hilfe), Strg+M (Karte)",

                help_main_sections: "Hauptabschnitte:",
                help_situation_desc: "Feind, Freund, Umgebung (OAKOC), zivile Überlegungen",
                help_mission_desc: "Verwenden Sie das 5-W-Framework (Wer, Was, Wann, Wo, Warum)",
                help_execution_desc: "Kommandeurabsicht, Operationskonzept, Aufgaben",
                help_sustainment_desc: "Logistik, Personal, Gesundheitsdienst-Unterstützung",
                help_command_desc: "C2-Beziehungen, Kommunikation",

                // Sidebar Navigation Descriptions
                sidebar_situation_desc: "Feind, Freund, Umgebung",
                sidebar_mission_desc: "Wer, Was, Wann, Wo, Warum",
                sidebar_execution_desc: "Absicht, Konzept, Aufgaben",
                sidebar_sustainment_desc: "Logistik, Personal, Gesundheit",
                sidebar_command_desc: "C2, Kommunikation",
                sidebar_annexes_desc: "A-H + Zusätzliche Anhänge",
                sidebar_example_desc: "Vollständige Referenz",
                sidebar_draft_desc: "Eingabe & Generierung",

                help_fm_annexes: "FM 6-0 Anhänge:",
                help_annex_a_short: "Aufgabenorganisation",
                help_annex_b_short: "Aufklärung",
                help_annex_c_short: "Operationen",
                help_annex_d_short: "Feuer",
                help_annex_e_short: "Schutz",
                help_annex_f_short: "Versorgung",
                help_annex_g_short: "Pioniere",
                help_annex_h_short: "Fernmeldewesen",

                help_draft_system: "Verwendung des Entwurfssystems",
                help_mission_builder: "Missions-Builder:",
                help_mission_builder_desc: "Füllen Sie die 5 Ws aus, dann klicken Sie auf \"Auto-Generieren\" für das richtige Format",
                help_section_input: "Abschnittseingabe:",
                help_section_input_desc: "Verwenden Sie Textbereiche für jeden OPORD-Abschnitt",
                help_annexes_desc: "Vervollständigen Sie alle 8 FM 6-0 Anhänge nach Bedarf",
                help_save_draft: "Entwurf Speichern:",
                help_save_draft_desc: "Speichert automatisch im lokalen Speicher",
                help_export: "Exportieren:",
                help_export_desc: "Lädt vollständigen OPORD mit allen Anhängen herunter",

                help_coordinate_input: "Koordinateneingabe:",
                help_coordinate_desc: "Geben Sie MGRS-, UTM- oder Lat/Long-Koordinaten ein",
                help_search_location: "Standort Suchen:",
                help_search_desc: "Finden und zeigen Sie Standort mit Wetterdaten an",
                help_add_markers: "Markierungen Hinzufügen:",
                help_markers_desc: "Platzieren Sie taktische Markierungen auf Zielen",
                help_convert_coords: "Koordinaten Konvertieren:",
                help_convert_desc: "Zwischen Koordinatensystemen wechseln",
                help_saved_locations: "Gespeicherte Standorte:",
                help_saved_desc: "Benutzerdefinierte Standorte speichern und verwalten",

                help_ref_coords: "Referenz-Koordinaten-Testpunkte:",
                help_taj_mahal: "Taj Mahal, Indien (UTM):",
                help_statue_liberty: "Freiheitsstatue, NY (UTM):",
                help_eiffel_tower: "Eiffelturm, Frankreich (MGRS):",
                help_sydney_opera: "Opernhaus Sydney, Australien (Lat/Long):",
                help_coords_note: "Diese Koordinaten sind verifizierte Referenzpunkte zum Testen der Koordinatenkonvertierungsgenauigkeit.",

                help_lsco_considerations: "LSCO-Überlegungen",
                help_multi_domain: "Multi-Domain-Operationen:",
                help_multi_domain_desc: "Berücksichtigen Sie Cyber-, EW-, Weltraum-Bedrohungen",
                help_high_consumption: "Hoher Verbrauch:",
                help_consumption_desc: "Planen Sie für erhöhten Munitions- und Kraftstoffverbrauch",
                help_contested_env: "Umkämpfte Umgebung:",
                help_contested_desc: "Gehen Sie von beeinträchtigter Kommunikation aus",
                help_mass_casualties: "Massenverluste:",
                help_casualties_desc: "Planen Sie für erhebliche medizinische Anforderungen",
                help_extended_ops: "Erweiterte Operationen:",
                help_extended_desc: "Berücksichtigen Sie Versorgung über die Zeit",

                help_tips_success: "Tipps für den Erfolg",
                help_start_mission: "Beginnen Sie mit der Mission:",
                help_start_desc: "Eine klare Missionserklärung treibt alles andere an",
                help_use_examples: "Verwenden Sie Beispiele:",
                help_examples_desc: "Klicken Sie auf \"Beispielinhalt\" für Anleitung",
                help_be_specific: "Seien Sie Spezifisch:",
                help_specific_desc: "Fügen Sie Gitterkoordinaten, Zeiten und Einheitenbezeichnungen hinzu",
                help_check_doctrine: "Prüfen Sie die Doktrin:",
                help_doctrine_desc: "Alle Inhalte basieren auf FM 6-0 Standards",
                help_save_often: "Speichern Sie Oft:",
                help_save_often_desc: "Verwenden Sie Strg+S oder klicken Sie regelmäßig auf Speichern-Schaltflächen",

                // LSCO Content - High Consumption Items
                ammo_precision: "Munition (besonders Präzisionsmunition)",
                fuel_extended: "Kraftstoff für erweiterte Operationen",
                medical_mass_cas: "Medizinische Versorgung für Massenverluste",
                repair_parts: "Ersatzteile für Ausrüstungsverschleiß",

                // LSCO Content - Sustainment Challenges
                extended_supply: "Erweiterte Versorgungslinien unter Bedrohung",
                contested_logistics: "Umkämpfte Logistikoperationen",
                increased_maintenance: "Erhöhte Wartungsanforderungen",
                mass_casualty_scenarios: "Massenverlust-Szenarien",

                // Example Content - Sustainment
                example_sust_header: "4. VERSORGUNG.",
                example_sust_logistics: "a. Logistik.",
                example_sust_logistics_text: "Versorgung: Klasse I und III Nachschub täglich um 1800Z am LOGPAC-Standort vic Gitter AB345678. Klasse V Nachschub auf Bestellung, Notfallnachschub verfügbar innerhalb 2 Stunden. Instandhaltung: A/3-7 FSB bietet DS-Instandhaltungsunterstützung. Einheits-Instandhaltungsteams mit Manövereinheiten zusammengelegt. Bergungskapazitäten bei TAA CHARLIE positioniert. Transport: MSR GOLD als primäre Versorgungsroute bestimmt, MSR SILVER alternativ. Verteilungspunkte bei Gitter AB234567 eingerichtet.",
                example_sust_personnel: "b. Personal.",
                example_sust_personnel_text: "Personalwesen: Verlustmeldung nach Einheits-SOP, Ersatzpersonal auf Kompanie-Ebene integriert. S-1 führt Personalverantwortung. Finanzmanagement: Notfallbezahlung über S-1 verfügbar. Rechtsunterstützung: 1. BCT SJA bietet Rechtsunterstützung nach Bedarf. Religiöse Unterstützung: Militärpfarrer für Gottesdienste und Beratung verfügbar.",
                example_sust_medical: "c. Gesundheitsdienst-Unterstützung.",
                example_sust_medical_text: "Medizinische Behandlung: Kompanie-Sanitäter bieten Rolle-1-Versorgung. B/3-7 FSB bietet Rolle-2-Versorgung am BAS vic Gitter AB456789. Medizinische Evakuierung: Boden-MEDEVAC über 3-7 FSB, Luft-MEDEVAC verfügbar mit 15-Minuten-Reaktionszeit. Präventivmedizin: Wassertests täglich durchgeführt, Kampfstress-Kontrollteam auf Anfrage verfügbar.",

                // Manage Annexes Content
                annexes_intro: "Lernen Sie über FM 6-0 Anhänge und deren ordnungsgemäße Verwendung. Jeder Anhang bietet spezialisierte Informationen zur Unterstützung des Haupt-OPORD. Verwenden Sie den Abschnitt \"Entwurf Ihres OPORD\" um tatsächlich Ihre Anhänge zu erstellen.",
                fm60_structure: "FM 6-0 Anhang-Struktur",
                fm60_structure_desc: "Die folgenden Anhänge folgen der aktuellen FM 6-0 Doktrin. Nicht alle Anhänge sind für jede Operation erforderlich - schließen Sie nur die für Ihre Mission relevanten ein.",
                purpose: "Zweck:",
                includes: "Beinhaltet:",
                example_content: "Beispielinhalt",
                key_components: "Schlüsselkomponenten",
                how_to_use: "Wie Diese Anhänge Zu Verwenden",
                how_to_use_desc: "Diese Beschreibungen und Beispiele dienen der Referenz und dem Lernen. Um tatsächlich Ihre Anhänge zu erstellen, verwenden Sie den Abschnitt \"Entwurf Ihres OPORD\", wo Sie Ihren spezifischen Anhanginhalt eingeben und vollständige OPORD-Dokumente generieren können.",

                // Annex Descriptions
                annex_a_desc: "Detaillierte Einheitenstruktur, Unterstellungen und Aufgabenzuweisungen für die Operation.",
                annex_b_desc: "Aufklärungsvorbereitung des Gefechtsfeldes, Feindanalyse und Sammlungsanforderungen.",
                annex_c_desc: "Detaillierter taktischer Plan mit Grafiken, Überlagerungen und operativen Verfahren.",
                annex_d_desc: "Feuerunterstützungsplan, Ziellisten, FSCMs, Artillerieaufgaben und Luftunterstützung.",
                annex_e_desc: "Luftverteidigung, Überlebensfähigkeit, OPSEC, Personalbergung und ROE.",
                annex_f_desc: "Umfassende Logistik-, Personal- und Gesundheitsdienst-Unterstützungspläne.",
                annex_g_desc: "Pionieraufgaben für Mobilität, Gegenmobilität und Überlebensfähigkeit.",
                annex_h_desc: "Detaillierter Kommunikationsplan, Frequenzen, Rufzeichen und PACE-Pläne.",
                annex_k_desc: "Cyber-/Elektronische Kriegsführung und Elektromagnetische Aktivitäten Operationsplan.",
                annex_l_desc: "Informationssammlungsplan, der PIRs mit Sammlungskapazitäten und Aufgaben verknüpft.",
                misc_annexes: "Verschiedene Anhänge",
                misc_desc: "Zusätzliche Anhänge nach Bedarf für missionsspezifische Anforderungen.",

                // Annex Purpose and Includes Content
                annex_a_purpose: "Detailliert die Kräfteverteilung und Führungsbeziehungen für die Operation.",
                annex_a_includes: "Einheiten-Aufgabenorganisation, Unterstellungen, Abstellungen und Führungsbeziehungen (OPCON, TACON, DS, etc.)",
                annex_b_purpose: "Bietet detaillierte Feindanalyse und Aufklärungssammlungsplan.",
                annex_b_includes: "PIR, Sammlungskapazitäten, Feind-SITTEMP, Aufklärungsprodukte und Verbreitungsverfahren",
                annex_c_purpose: "Enthält die Operationsüberlagerung und detailliertes Manöverschema.",
                annex_c_includes: "Grafische Darstellung des Plans, Kontrollmaßnahmen, Phasenlinien, Ziele und Grenzen",
                annex_d_purpose: "Bietet detaillierte Feuerunterstützungskoordination und Planung für die Operation.",
                annex_d_includes: "Feuerunterstützungskoordinationsmaßnahmen, Ziellisten, Artillerieaufgaben, Luftunterstützungsanfragen und Feuerunterstützungsausführungsmatrix",
                annex_e_purpose: "Detailliert Schutzmaßnahmen zur Erhaltung der Kampfkraft und Sicherstellung des Missionserfolgs.",
                annex_e_includes: "Luftverteidigungsplan, Überlebensmaßnahmen, OPSEC-Verfahren, Personalbergung, ROE und Truppenschutzmaßnahmen",
                annex_f_purpose: "Bietet detaillierte Versorgungsplanung zur Aufrechterhaltung der Kampfeffektivität während der Operation.",
                annex_f_includes: "Logistik (Versorgungsklassen), Personaldienste, Gesundheitsdienst-Unterstützung, Instandhaltung und Verteilungspläne",
                annex_g_purpose: "Detailliert Pionierunterstützung zur Verbesserung der Mobilität, Verweigerung feindlicher Mobilität und Verbesserung der Überlebensfähigkeit.",
                annex_g_includes: "Mobilitätsoperationen, Gegenmobilitätsmaßnahmen, Überlebensbau, allgemeine Pioniertechnik und Geospatial-Unterstützung",
                annex_h_purpose: "Bietet umfassende Kommunikations- und Informationssystem-Unterstützung für Führung und Kontrolle.",
                annex_h_includes: "PACE-Pläne, Frequenzzuweisungen, Rufzeichen, EMCON-Verfahren und Netzwerkoperationen",
                annex_k_purpose: "Detailliert Cyber-Operationen, elektronische Kriegsführung und elektromagnetisches Spektrummanagement für die Operation.",
                annex_k_includes: "Cyber-Operationsplan, EW-Ziele, Spektrummanagement, EMCON-Verfahren und defensive Cyber-Maßnahmen",
                annex_l_purpose: "Detailliert den Informationssammlungsplan zur Unterstützung der Entscheidungsfindung und Situationsbewusstsein.",
                annex_l_includes: "Prioritäre Aufklärungsanforderungen (PIR), Sammlungskapazitäten, Informationsflussverfahren und Berichtszeitpläne",

                // Annex H Example Content
                signal_plan: "1. Fernmeldeplan:",
                pace_plan_example: "a. PACE-Plan: Primär (FM), Alternativ (SATCOM), Notfall (HF), Notstand (Visuell)",
                frequencies_example: "b. Frequenzen: Führungsnetz 54.000 MHz, Admin/Log-Netz 46.000 MHz",
                call_signs_example: "c. Rufzeichen: STEEL 6 (Kdr), STEEL 7 (XO), STEEL 3 (S3)",
                emcon_example: "d. EMCON: Stufe III bis H-Stunde, dann Stufe II",
                network_ops_example: "e. Netzwerkoperationen: SIPR/NIPR-Konnektivität, Cyber-Verteidigung",

                // Coordinating Instructions
                time_sequence: "Zeit und Ereignisfolge",
                rules_engagement: "Einsatzregeln (ROE)",
                risk_mitigation: "Risikominderungsmaßnahmen",
                rehearsal_guidance: "Übungsanleitung",
                contingency_plans: "Notfallpläne",

                // Human Resources
                casualty_reporting: "Verlustmeldung",
                replacement_ops: "Ersatzoperationen",
                personnel_accountability: "Personalverantwortung",

                // Financial Management
                pay_operations: "Besoldungsoperationen",
                contracting_support: "Vertragsunterstützung",
                resource_management: "Ressourcenmanagement",

                // Legal/Religious
                legal_support: "Rechtsunterstützung",
                religious_services: "Religiöse Dienste",
                morale_support: "Moralunterstützung",

                // Medical Treatment
                role_1_unit: "Rolle 1 (Einheitsebene)",
                role_2_forward: "Rolle 2 (Vorwärtsunterstützung)",
                triage_procedures: "Triage-Verfahren",

                // Medical Evacuation
                medevac_procedures: "MEDEVAC-Verfahren",
                casualty_collection: "Verlustsammlung",
                evacuation_routes: "Evakuierungsrouten",

                // Preventive Medicine
                disease_prevention: "Krankheitsprävention",
                environmental_health: "Umweltgesundheit",
                combat_stress_control: "Kampfstress-Kontrolle",

                // Communication Systems
                primary_alternate_freq: "Haupt- und Ausweichfrequenzen",
                call_signs_auth: "Rufzeichen und Authentifizierung",
                communication_windows: "Kommunikationsfenster",

                // Network Operations
                digital_comm_systems: "Digitale Kommunikationssysteme",
                network_security_protocols: "Netzwerksicherheitsprotokolle",
                cyber_defense_measures: "Cyber-Verteidigungsmaßnahmen",

                // Signal Operating Instructions
                communication_procedures: "Kommunikationsverfahren",
                emergency_procedures: "Notfallverfahren",
                comsec_requirements: "COMSEC-Anforderungen",

                // LSCO C2 Considerations
                redundant_comm_systems: "Redundante Kommunikationssysteme",
                ew_countermeasures: "Elektronische Kriegsführung Gegenmaßnahmen",
                distributed_command_posts: "Verteilte Gefechtstände",
                mission_command_philosophy: "Auftragstaktik-Philosophie",
                rapid_decision_making: "Schnelle Entscheidungsprozesse",

                // Communication Challenges
                enemy_electronic_warfare: "Feindliche elektronische Kriegsführung",
                degraded_comm_environments: "Beeinträchtigte Kommunikationsumgebungen",
                extended_comm_ranges: "Erweiterte Kommunikationsreichweiten",
                interoperability_requirements: "Interoperabilitätsanforderungen",
                cyber_threats_networks: "Cyber-Bedrohungen für Netzwerke",

                // Annex G (Engineer) Example Content
                engineer_tasks: "1. Pionieraufgaben:",
                mobility_example: "a. Mobilität: MINENFELD X bis H+2 räumen, Durchbruchsoperationen",
                countermobility_example: "b. Gegenmobilität: Hindernisse auf PL SILVER einsetzen, Routen sperren",
                survivability_example: "c. Überlebensfähigkeit: Kampfstellungen bauen, Schutzstellungen",
                supporting_unit_example: "d. Unterstützungseinheit: A Kp, 3-7 PIO (DS zu TF)",
                general_engineering_example: "e. Allgemeine Pioniertechnik: Routenwartung, Versorgungseinrichtungen",

                // Annex C (Operations) Key Components
                operations_overlay: "Operationsüberlagerung (Grafik)",
                scheme_maneuver_details: "Details des Manöverschemas",
                control_measures_boundaries: "Kontrollmaßnahmen und Grenzen",
                phase_lines_objectives: "Phasenlinien und Ziele",

                // Annex D (Fires) Example Content
                fire_support_coordination: "1. Feuerunterstützungskoordination:",
                supporting_units_example: "a. Unterstützungseinheiten: 1-77 FA (DS), 2-8 FA (GSR)",
                priority_fires_example: "b. Feuerpriorität: A Kp (Hauptanstrengung)",
                fscl_example: "c. Feuerunterstützungskoordinationslinie (FSCL): PL BLUE",
                nfa_example: "d. Nicht-Feuer-Bereiche (NFA): Dorf KILO (AB234678)",
                target_list_example: "e. Zielliste: TGT AA1001 (Feindlicher GP), TGT AA1002 (Mörserstellung)",

                // Annex A (Task Organization) Example Content
                task_organization_plan: "1. Aufgabenorganisation:",
                main_effort_example: "a. Hauptanstrengung: A Kp, 1-32 IN",
                supporting_effort_example: "b. Unterstützungsanstrengung: B Kp, 1-32 IN",
                reserve_example: "c. Reserve: C Kp, 1-32 IN",
                attachments_example: "d. Unterstellungen: 1. Zug, A Kp, 3-7 CAV (OPCON)",

                // Annex B (Intelligence) Key Components
                pir_requirements: "Prioritäre Aufklärungsanforderungen (PIR)",
                collection_plan_assets: "Sammlungsplan und Kapazitäten",
                enemy_sittemp: "Feind-Situationsvorlage (SITTEMP)",
                intel_products_dissem: "Aufklärungsprodukte und Verbreitung",

                // Annex E (Protection) Example Content
                protection_measures: "1. Schutzmaßnahmen:",
                air_defense_example: "a. Luftverteidigung: Waffenkontrollstatus WEAPONS TIGHT",
                opsec_example: "b. OPSEC: Emissionskontrolle, Tarnungsdisziplin",
                personnel_recovery_example: "c. Personalbergung: CSAR-Verfahren, isoliertes Personal",
                roe_example: "d. ROE: Einsatzregeln nach aktueller Weisung",
                survivability_example_detailed: "e. Überlebensfähigkeit: Kampfstellungen, Deckung von oben",

                // Annex F (Sustainment) Example Content
                sustainment_plan: "1. Versorgungsplan:",
                class_resupply_example: "a. Klasse I/III Nachschub: Täglich um 1800Z am LOG PAD",
                class_v_example: "b. Klasse V: Auf Befehl, 2-Stunden Notfallnachschub",
                maintenance_example: "c. Instandhaltung: DS-Unterstützung von FSB, Sammelstellen",
                medical_example: "d. Sanitätsdienst: Rolle 1/2 Versorgung, MEDEVAC-Verfahren, CCP-Standorte",
                personnel_example: "e. Personal: Ersatzoperationen, Verlustmeldung",

                // Annex K (CEMA) Example Content
                cema_operations: "1. CEMA-Operationen:",
                cyber_ops_example: "a. Cyber-Operationen: Netzwerkverteidigung, offensive Cyber-Operationen",
                electronic_warfare_example: "b. Elektronische Kriegsführung: Störung, SIGINT, COMINT",
                spectrum_mgmt_example: "c. Spektrummanagement: Frequenzentflechtung",
                emcon_example_detailed: "d. EMCON: Emissionskontrollverfahren",
                defensive_measures_example: "e. Defensive Maßnahmen: Netzwerksicherheit, OPSEC",

                // Annex L (Information Collection) Example Content
                info_collection_plan: "1. Informationssammlungsplan:",
                pir_1_example: "a. PIR 1: Feindliche Reservestandorte und Bewegung",
                pir_2_example: "b. PIR 2: Zivilevakuierungsstatus im AO",
                collection_assets_example: "c. Sammlungskapazitäten: UAV, HUMINT, SIGINT",
                reporting_example: "d. Berichterstattung: SALUTE-Berichte alle 2 Stunden",
                info_flow_example: "e. Informationsfluss: Sammler → S2 → Kdr",

                // Miscellaneous Annexes Content
                misc_purpose: "Bietet Flexibilität für missionsspezifische Anhänge, die nicht von der Standard A-L Struktur abgedeckt werden.",
                misc_examples: "Beispiele: Anhang P (Gastlandunterstützung), Anhang S (Spezielle Technische Operationen), Anhang M (Bewertung), benutzerdefinierte Anhänge",
                common_additional_annexes: "Häufige Zusätzliche Anhänge",
                annex_p_desc: "Anhang P (Gastlandunterstützung): Lokale Unterstützungskoordination",
                annex_s_desc: "Anhang S (Spezielle Technische Operationen): Spezialisierte Fähigkeiten",
                annex_m_desc: "Anhang M (Bewertung): Missionsbewertungskriterien",
                annex_r_desc: "Anhang R (Berichte): Berichtsanforderungen und -verfahren",
                custom_annexes_desc: "Benutzerdefinierte Anhänge: Missionsspezifische Anforderungen",

                // Example OPORD Content
                example_opord_classification: "[KLASSIFIZIERUNG]",
                example_opord_title: "OPERATIONSBEFEHL 20241215120000Z",
                example_opord_unit: "2. Bataillon, 75. Ranger-Regiment",

                // Situation Section
                enemy_forces_header: "a. Feindkräfte:",
                enemy_forces_content: "Feindliches Kompanie-starkes Element (120-150 Personal) besetzt Verteidigungsstellungen in ZIEL ALPHA. Feindkräfte bestehen aus mechanisierter Infanterie mit unterstützenden Mörsern und Panzerabwehrwaffen. Feind hat Beobachtungsposten auf Höhen eingerichtet und vorbereitete Kampfstellungen mit sich überschneidenden Schussfeldern. Feindmoral als mäßig eingeschätzt mit begrenzten Nachtsichtfähigkeiten.",

                friendly_forces_header: "b. Eigene Kräfte:",
                friendly_forces_content: "1. Brigade-Kampfteam führt unterstützenden Angriff im Norden durch. 3. Bataillon, 75. Rangers stellt Überwachung und Feuerunterstützung von Osten bereit. Luftfahrzeuge umfassen 2x AH-64 Apache Hubschrauber und 1x AC-130 Kampfflugzeug im Einsatz. Artillerieunterstützung von 1-319 AFAR mit Feuerpriorität.",

                environment_header: "c. Umgebung:",
                environment_content: "Gelände: Hügelige Landschaft mit verstreuter Vegetation, Höhe 200-400m. Wetter: Klarer Himmel, Temperatur 20°C, Wind 5-10 mph aus Nordwest. Sicht tagsüber unbegrenzt, nachts 2km. BMNT: 0630Z, EENT: 1830Z. Mondphase: 25% abnehmender Halbmond.",

                attachments_header: "d. Unterstellungen/Abstellungen:",
                attachments_content: "Unterstellt: 1x Vorgeschobener Beobachter-Trupp, 1x Kampfpionier-Gruppe, 1x Militärhunde-Team. Abgestellt: Keine.",

                key_locations_header: "SCHLÜSSELSTANDORTE:",
                key_locations_content: "ZIEL ALPHA: 32S 0123456 1234567 (MGRS)\nTAA BRAVO: 32S 0120000 1230000 (MGRS)\nPL CHARLIE: 32S 0121000 1232000 (MGRS)\nGP DELTA: 32S 0119000 1229000 (MGRS)",

                // Mission Section
                mission_content: "2. Bataillon, 75. Ranger-Regiment greift an, um ZIEL ALPHA bis spätestens 151800Z DEZ 24 zu erobern, um feindliche Verteidigungsstellungen zu zerstören und Schlüsselgelände für Folgeoperationen zu sichern.",

                // Execution Section
                commanders_intent_header: "a. Führerabsicht:",
                commanders_intent_purpose: "Zweck: Feindliche Verteidigungsfähigkeit zerstören und Schlüsselgelände sichern.",
                commanders_intent_key_tasks: "Schlüsselaufgaben: (1) Feindliche Verteidigungslinie durchbrechen, (2) Feindliche Stützpunkte neutralisieren, (3) ZIEL ALPHA sichern.",
                commanders_intent_end_state: "Endzustand: Feindkräfte zerstört oder zurückgezogen, ZIEL ALPHA gesichert, Einheit bereit für Folgeoperationen.",

                concept_ops_header: "b. Operationskonzept:",
                concept_ops_phase1: "Phase 1 (Bewegung): Einheiten bewegen sich von TAA BRAVO zu Angriffsstellungen unter Deckung der Dunkelheit.",
                concept_ops_phase2: "Phase 2 (Angriff): Koordinierter Angriff mit unterstützendem Feuer zum Durchbruch feindlicher Stellungen.",
                concept_ops_phase3: "Phase 3 (Konsolidierung): Ziel sichern und Verteidigungsstellungen vorbereiten.",

                tasks_subordinate_header: "c. Aufgaben an unterstellte Einheiten:",
                tasks_alpha_company: "Alpha Kompanie: Hauptanstrengung. Angriff entlang ACHSE EAGLE zur Eroberung des nördlichen Teils von ZIEL ALPHA.",
                tasks_bravo_company: "Bravo Kompanie: Unterstützungsanstrengung. Angriff entlang ACHSE FALCON zur Eroberung des südlichen Teils von ZIEL ALPHA.",
                tasks_charlie_company: "Charlie Kompanie: Bataillonsreserve. Bereit, Erfolg auszunutzen oder Hauptanstrengung zu verstärken.",

                coordinating_instructions_header: "d. Koordinierende Anweisungen:",
                coordinating_h_hour: "• H-Stunde: 151600Z DEZ 24",
                coordinating_roe: "• ROE: Positive Identifikation vor Gefechtsaufnahme erforderlich",
                coordinating_ccir: "• CCIR: Feindverstärkungen, Zivilpräsenz, Hindernisstandorte",
                coordinating_rehearsal: "• Übung: 141400Z bei TAA BRAVO",

                // Sustainment Section
                logistics_header: "a. Logistik:",
                logistics_content: "Klasse I: 3 Tage vorrätig. Klasse III: Tankstelle bei TAA BRAVO. Klasse V: Grundausstattung plus 50% zusätzlich. Nachschub über Bodenkonvoi bei PL CHARLIE.",

                personnel_services_header: "b. Personaldienste:",
                personnel_services_content: "Ersatzoperationen über S-1. EPW-Sammelstelle bei GP DELTA. Moralunterstützung über Militärseelsorge.",

                health_service_header: "c. Sanitätsdienst-Unterstützung:",
                health_service_content: "Bataillons-Sanitätsstation bei GP DELTA. MEDEVAC LZ bei TAA BRAVO. Priorität: Dringend, Priorität, Routine. 9-Linien-Verfahren in Kraft.",

                // Command & Signal Section
                command_header: "a. Führung:",
                command_content: "GP-Standort: GP DELTA (32S 0119000 1229000). Führungsfolge: Kdr, Stv, S-3, Alpha Kompanie-Führer.",

                control_header: "b. Kontrolle:",
                control_content: "Berichte: SITREP alle 30 Minuten. SPOTREP nach Bedarf. Kontrollpunkte: Alpha, Bravo, Charlie eingerichtet.",

                signal_header: "c. Fernmeldewesen:",
                signal_content: "Primär: FM-Funknetz. Alternativ: Satellitenkommunikation. Notfall: Sichtzeichen. Notstand: Pyrotechnik. Frequenzen: Führungsnetz 45.000, Admin-Netz 46.000.",

                // Annexes Section
                annexes_header: "ANHÄNGE:",
                annex_a_desc_example: "Anhang A (Aufgabenorganisation): Detaillierte Einheitszuweisungen und Unterstellungen",
                annex_b_desc_example: "Anhang B (Aufklärung): Feindlage, Geländeanalyse, Wetterdaten",
                annex_c_desc_example: "Anhang C (Operationen): Detaillierter taktischer Plan und Grafik-Overlay",
                annex_d_desc_example: "Anhang D (Feuer): Artillerie- und Luftnahunterstützungsplan",
                annex_e_desc_example: "Anhang E (Schutz): Truppenschutz und ABC-Maßnahmen",
                annex_f_desc_example: "Anhang F (Versorgung): Detaillierter Logistik- und Sanitätsunterstützungsplan",
                annex_g_desc_example: "Anhang G (Pioniere): Hindernisbeseitigung und Mobilitätsunterstützung",
                annex_h_desc_example: "Anhang H (Fernmeldewesen): Kommunikationsplan und Frequenzen",

                // Example OPORD Notes
                example_opord_notes_header: "Beispiel OPORD Hinweise",
                example_notes_purpose: "Zweck: Dieses Beispiel zeigt eine vollständige OPORD-Struktur nach FM 6-0 Standards.",
                example_notes_key_elements: "Schlüsselelemente: Beachten Sie die detaillierte Feindlage, klare Auftragsformulierung, umfassenden Durchführungsplan und vollständige Versorgungsüberlegungen.",
                example_notes_coordinates: "Koordinaten: Alle taktischen Grafiken verwenden MGRS-Koordinaten für Präzision und Standardisierung.",
                example_notes_classification: "Klassifizierung: Ersetzen Sie [KLASSIFIZIERUNG] durch angemessene Sicherheitsmarkierungen für Ihr Netzwerk.",
                example_notes_customization: "Anpassung: Passen Sie dieses Format und Detailniveau an Ihre spezifischen operativen Anforderungen an."
            },

            ko: {
                // Header and Navigation
                opord_tool: "작전명령 도구",
                military_planning: "군사 계획 지원 도구",
                copy_dtg: "줄루 DTG 복사",
                menu: "메뉴",
                opord_sections: "작전명령 섹션",

                // Tab Navigation
                help_guide: "도움말 가이드",
                example_opord: "작전명령 예시",
                draft_opord: "작전명령 초안",
                draft_opord_description: "통합된 지도 및 날씨 도구로 작전명령을 작성하세요. 지도 및 날씨 도구를 사용하여 작전을 위한 좌표와 전술 데이터를 얻으세요.",
                manage_annexes: "부록 관리",

                // Placeholder translations
                placeholder_unit_designation: "부대 명칭",
                placeholder_tactical_task: "전술 임무",
                placeholder_nlt_dtg: "NLT DTG",
                placeholder_objective_location: "목표/위치",
                placeholder_purpose: "목적",
                placeholder_mission_statement: "[부대] [임무] [목표] [NLT DTG] [목적을 위해]",
                placeholder_situation: "상황 세부사항을 입력하세요...",
                placeholder_coordinates: "좌표가 포함된 주요 위치를 입력하세요 (예: 목표 ALPHA: 18TWL8396007523, 지휘소 BRAVO: 44R 206915 3009291)",
                placeholder_execution: "실행 세부사항을 입력하세요...",
                placeholder_sustainment: "지속지원 세부사항을 입력하세요...",
                placeholder_command: "지휘통신 세부사항을 입력하세요...",
                placeholder_task_organization: "임무조직을 입력하세요...",
                placeholder_intelligence: "정보 요구사항을 입력하세요...",
                placeholder_operations: "작전 중첩 세부사항을 입력하세요...",
                placeholder_fires: "화력지원 계획을 입력하세요...",
                placeholder_protection: "방호 조치를 입력하세요...",
                placeholder_sustainment_plan: "지속지원 계획을 입력하세요...",
                placeholder_engineer: "공병 임무를 입력하세요...",
                placeholder_signal: "통신 계획을 입력하세요...",
                placeholder_cema: "사이버/전자전 작전 계획을 입력하세요...",
                placeholder_info_collection: "정보수집 계획을 입력하세요...",
                placeholder_misc_annexes: "필요에 따라 추가 부록을 입력하세요 (예: 부록 P - 주둔국 지원, 부록 S - 특수기술작전 등)...",

                // Section headers
                annexes_fm60_structure: "부록 (FM 6-0 구조)",

                // Snippets translations
                snippets_library: "작전명령 스니펫 라이브러리",
                mission_statement_templates: "임무 선언문 템플릿",
                section3_execution_snippets: "섹션 3: 실행 스니펫",
                section4_sustainment_snippets: "섹션 4: 지속지원 스니펫",
                annexh_signal_snippets: "부록 H: 통신 스니펫",
                annexa_task_organization_snippets: "부록 A: 임무조직",
                annexd_fires_snippets: "부록 D: 화력",
                custom_snippets: "사용자 정의 스니펫",
                manage_snippets: "텍스트 조각 관리",
                clear_draft: "초안 지우기",
                donate: "개발 지원",
                donate_desc: "이 도구를 무료로 유지",
                donate_title: "개발 지원",
                donate_subtitle: "이 군사 계획 도구를 무료로 유지하는 데 도움",
                donate_description: "이 OPORD 도구는 군사 공동체를 위해 군사 전문가들이 개발하고 유지 관리합니다. 귀하의 지원은 새로운 기능, 더 나은 정확성, 그리고 군사 계획 작전을 위한 향상된 기능으로 이 무료 자원을 계속 개선하는 데 도움이 됩니다.",
                donate_development: "지속적인 개발",
                donate_costs: "서버 및 API 비용",
                donate_community: "커뮤니티 지원",
                donate_card_title: "신용/직불 카드",
                donate_card_desc: "PayPal을 통한 안전한 결제 처리",
                donate_paypal: "PayPal 기부",
                donate_secure: "안전한 SSL 암호화 거래",
                donate_crypto_title: "암호화폐",
                donate_crypto_desc: "직접 암호화폐 기부 - 수수료 없음, 최대 효과",
                donate_copy: "복사",
                donate_btc_copied: "비트코인 주소가 복사되었습니다!",
                donate_eth_copied: "이더리움 주소가 복사되었습니다!",
                donate_sol_copied: "솔라나 주소가 복사되었습니다!",
                donate_verify: "전송하기 전에 항상 주소를 확인하세요",
                donate_thanks_title: "지원해 주셔서 감사합니다!",
                donate_thanks_desc: "크기에 관계없이 모든 기부는 군사 공동체를 위해 이 도구를 유지하고 개선하는 데 도움이 됩니다. 귀하의 지원은 정확하고 최신의 군사 계획 자원을 완전히 무료로 계속 제공할 수 있도록 보장합니다.",
                donate_by_military: "군사 전문가가 군사 전문가를 위해 개발",
                donate_contact_title: "질문이나 제안이 있으신가요?",
                donate_contact_desc: "새로운 기능에 대한 아이디어가 있거나 버그를 발견하셨나요? 여러분의 의견을 듣고 싶습니다!",
                donate_contact_btn: "개발팀에 문의",
                feedback_name_label: "이름 (선택사항):",
                feedback_name_placeholder: "귀하의 이름",
                feedback_message_label: "메시지:",
                feedback_message_placeholder: "아이디어를 공유하거나, 버그를 신고하거나, 질문을 해주세요...",
                send_feedback: "피드백 보내기",
                sending_feedback: "전송 중...",
                feedback_alternative: "또는 Google 양식을 사용하세요:",
                open_google_form: "Google 양식 열기",
                feedback_type_label: "피드백 유형:",
                feedback_improvements: "개선사항",
                feedback_sustains: "유지사항 (잘 작동하는 것)",
                feedback_bugs: "버그 및 오류",
                feedback_contact_label: "연락처 정보 (선택사항):",
                feedback_contact_placeholder: "이메일 또는 기타 연락처 정보 (선택사항)",
                feedback_form_description: "Google 양식을 사용하여 피드백, 제안 또는 버그를 신고해 주세요.",
                feedback_categories_title: "피드백 카테고리:",
                feedback_sustains_desc: "무엇이 좋았나요?",
                feedback_improvements_desc: "무엇이 마음에 들지 않았나요?",
                feedback_bugs_desc: "버그 신고 또는 기능 요청",
                feedback_contact_desc: "선택적 연락처 정보",
                feedback_form_security: "새 탭에서 열림 • 완전히 안전 • 로그인 불필요",
                open_feedback_form: "피드백 양식 열기",
                donate_qr_scan: "또는 PayPal QR 코드 스캔:",
                donate_qr_mobile: "빠른 기부를 위해 모바일 기기로 스캔",
                donate_qr_scan_crypto: "전송하려면 스캔",
                donate_paypal_btn: "PayPal로 기부하기",
                donate_paypal_secure: "안전하고 빠름",
                donate_cards_accepted: "허용되는 결제 방법:",
                disclaimer_text: "이 제품은 훈련 보조 도구이며 미국 육군이나 국방부의 승인을 받지 않았습니다. 본인의 재량에 따라 사용하십시오. 기밀 자료를 입력하지 마십시오.",
                user_manual: "사용자 매뉴얼",
                text_templates: "텍스트 템플릿",
                reset_all: "모두 재설정",

                // Time Display
                military_time_ref: "군사 시간 기준",
                zulu_utc: "줄루 (UTC)",
                eastern_us: "미국 동부",
                beijing_china: "중국 베이징",
                moscow_russia: "러시아 모스크바",
                hawaii_usa: "미국 하와이",
                seoul_korea: "대한민국 서울",
                local_time: "현지 시간",

                // Section 1 - Situation
                situation: "1. 상황",
                situation_desc: "대규모 전투작전(LSCO)을 위한 작전환경에 대한 포괄적인 개요를 제공합니다.",
                enemy_forces: "적군",
                friendly_forces: "아군",
                environment: "환경",
                composition_disposition: "편성 및 배치:",
                composition_desc: "적 부대 구조, 위치 및 전력 추정 상세화",
                capabilities: "능력:",
                capabilities_desc: "다영역 위협 포함 (사이버, 전자전, 방공, 포병)",
                mlcoa: "가장 가능성 높은 행동방침 (MLCOA):",
                mlcoa_desc: "주요 적 행동방침",
                mdcoa: "가장 위험한 행동방침 (MDCOA):",
                mdcoa_desc: "최악의 적 시나리오",
                recent_activities: "최근 활동:",
                recent_desc: "정보 업데이트 및 적 패턴",
                higher_hq: "상급부대 임무:",
                higher_desc: "2단계 상급 임무 및 의도",
                adjacent_units: "인접부대:",
                adjacent_desc: "좌측, 우측 및 지원부대 임무",
                supporting_elements: "지원요소:",
                supporting_desc: "포병, 항공지원, 공병 등",
                boundaries: "경계:",
                boundaries_desc: "부대 작전지역 및 통제조치",
                oakoc_analysis: "OAKOC 분석:",
                observation_fires: "관측 및 사격장:",
                observation_desc: "가시성 및 교전지역",
                avenues_approach: "접근로:",
                avenues_desc: "적 및 아군 기동통로",
                key_terrain: "핵심지형:",
                key_terrain_desc: "결정적 지형특징",
                obstacles: "장애물:",
                obstacles_desc: "자연 및 인공 장벽",
                cover_concealment: "엄폐 및 은폐:",
                cover_desc: "관측/사격으로부터의 보호",

                // Section 2 - Mission
                mission: "2. 임무",
                mission_desc: "부대의 핵심 임무와 목적을 명확하고 간결한 한 문장으로 기술합니다.",
                five_ws_framework: "5W 프레임워크",
                who: "누가",
                who_desc: "부대 명칭",
                what: "무엇을",
                what_desc: "전술 임무 동사",
                when: "언제",
                when_desc: "NLT 일시그룹",
                where: "어디서",
                where_desc: "목표 또는 위치",
                why: "왜",
                why_desc: "상급 의도와 연결된 목적",
                mission_format: "임무 형식",
                mission_template: "[부대] [임무] [목표] [NLT DTG] [목적을 위해]",

                // Section 3 - Execution
                execution: "3. 실행",
                execution_desc: "부대가 임무를 수행하는 방법을 설명합니다. 이는 작전명령의 핵심이며 성공적인 실행에 필요한 필수 정보를 부하들에게 제공합니다.",

                // Execution Subsections
                commanders_intent: "가. 지휘관 의도",
                commanders_intent_desc: "FM 6-0 기준에 따른 작전의 목적, 핵심 임무 및 종료상태를 기술합니다.",
                concept_operations: "나. 작전개념",
                concept_operations_desc: "행동 순서와 주공을 포함하여 부대가 임무를 수행하는 방법을 기술합니다.",
                tasks_subordinate_units: "다. 부하부대 임무",
                tasks_subordinate_desc: "부하부대(군단에서 소대급까지)에 구체적 임무를 할당합니다. FM 6-0 지침에 따른 형식.",
                tasks_staff: "라. 참모 임무",
                tasks_staff_desc: "작전 중 참모의 구체적 임무와 책임을 명시합니다.",

                // Placeholders
                placeholder_commanders_intent: "목적: [이 작전이 수행되는 이유]\n핵심 임무: [반드시 수행되어야 하는 필수 임무]\n종료상태: [작전 완료 시 원하는 조건]",
                placeholder_concept_operations: "행동 순서: [작전이 전개되는 방법]\n주공: [작전의 주요 초점]\n조공: [다른 요소들이 주공을 지원하는 방법]",
                placeholder_tasks_subordinate: "1소대: \n2소대: \n3소대: \n화기분대: \n지원요소: \n\n[필요에 따라 추가 부대 추가]",
                placeholder_tasks_staff: "S-1: [인사 임무]\nS-2: [정보 임무]\nS-3: [작전 임무]\nS-4: [군수 임무]\nS-6: [통신 임무]",

                // Dynamic Unit Management
                add_unit_btn: "부대 추가",
                remove_unit_btn: "제거",
                select_unit_placeholder: "부대 선택",
                custom_unit_option: "사용자 정의...",
                custom_unit_placeholder: "사용자 정의 부대",
                unit_task_placeholder: "임무 할당을 입력하세요...",

                // Military Unit Types
                unit_1st_div: "제1사단",
                unit_2nd_div: "제2사단",
                unit_3rd_div: "제3사단",
                unit_4th_div: "제4사단",
                unit_5th_div: "제5사단",
                unit_1st_bde: "제1여단",
                unit_2nd_bde: "제2여단",
                unit_3rd_bde: "제3여단",
                unit_4th_bde: "제4여단",
                unit_5th_bde: "제5여단",
                unit_alpha_company: "알파 중대",
                unit_bravo_company: "브라보 중대",
                unit_charlie_company: "찰리 중대",
                unit_delta_company: "델타 중대",
                unit_1st_plt: "1소대",
                unit_2nd_plt: "2소대",
                unit_3rd_plt: "3소대",
                unit_4th_plt: "4소대",
                unit_weapons_squad: "화기분대",
                unit_support_squad: "지원분대",
                unit_hq_element: "본부요소",
                unit_artillery: "포병",
                unit_engineers: "공병",
                unit_medical: "의무",
                unit_supply: "보급",
                unit_maintenance: "정비",
                commander_intent: "지휘관 의도",
                purpose: "목적:",
                purpose_desc: "작전이 수행되는 이유",
                key_tasks: "핵심 임무:",
                key_tasks_desc: "반드시 수행되어야 하는 필수 임무",
                end_state: "종료상태:",
                end_state_desc: "작전 완료 시 원하는 조건",
                concept_operations: "작전개념",
                scheme_maneuver: "기동계획:",
                scheme_desc: "전력이 배치되고 운용되는 방법",
                main_effort: "주공:",
                main_effort_desc: "지휘관이 우선순위를 두는 부대 또는 활동",
                supporting_effort: "조공:",
                supporting_desc: "주공을 지원하는 부대",
                reserve: "예비대:",
                reserve_desc: "비상상황을 위해 보유하는 전력",

                // Section 4 - Sustainment
                sustainment: "4. 지속지원",
                sustainment_desc: "작전에 필요한 군수, 인사서비스 및 의무지원을 다룹니다.",
                logistics: "군수",
                personnel_services: "인사서비스",
                health_service: "의무지원",
                supply: "보급:",
                supply_desc: "보급품 분류 및 배급 방법",
                maintenance: "정비:",
                maintenance_desc: "장비 정비 및 회수 절차",
                transportation: "수송:",
                transport_desc: "인원, 장비 및 보급품 이동",
                field_services: "야전서비스:",
                field_desc: "장례업무, 법무지원, 재정관리",

                // Section 5 - Command & Signal
                command_signal: "5. 지휘통신",
                command_signal_desc: "작전을 위한 지휘관계 및 통신절차를 설정합니다.",
                command: "지휘",
                signal: "통신",
                command_relationships: "지휘관계:",
                command_rel_desc: "지휘계통 및 승계",
                control_measures: "통제조치:",
                control_desc: "경계, 통제점 및 협조조치",
                reports: "보고:",
                reports_desc: "필요한 보고 및 보고절차",

                // Annexes Content
                annex_a: "임무조직",
                annex_a_desc: "작전을 위한 상세한 부대 구조, 배속 및 임무 할당.",
                annex_b: "정보",
                annex_b_desc: "전장정보준비, 적 분석 및 수집 요구사항.",
                annex_c: "작전",
                annex_c_desc: "도표, 중첩도 및 작전절차가 포함된 상세한 전술계획.",
                annex_d: "화력",
                annex_d_desc: "화력지원계획, 목표목록, FSCM, 포병임무 및 항공지원.",
                annex_e: "방호",
                annex_e_desc: "방공, 생존성, 작전보안, 인원회수 및 교전규칙.",
                annex_f: "지속지원",
                annex_f_desc: "포괄적인 군수, 인사 및 의무서비스 지원계획.",
                annex_g: "공병",
                annex_g_desc: "기동성, 대기동성 및 생존성을 위한 공병임무.",
                annex_h: "통신",
                annex_h_desc: "상세한 통신계획, 주파수, 호출부호 및 PACE 계획.",
                annex_k: "CEMA",
                annex_k_desc: "사이버/전자전 및 전자기 활동 작전계획.",
                annex_l: "정보수집",
                annex_l_desc: "PIR을 수집자산 및 임무와 연결하는 정보수집계획.",
                misc_annexes: "기타 부록",
                misc_desc: "임무별 요구사항에 따른 추가 부록.",

                // Buttons and Actions
                generate_opord: "작전명령 생성",
                save_draft: "초안 저장",
                map_weather: "지도 및 날씨",
                snippets: "스니펫",
                mission_builder: "임무 선언문 작성기",
                complete_mission_statement: "완전한 임무 선언문",
                auto_generate: "5W로 자동 생성",

                // Draft OPORD Section
                generate_complete_opord: "완전한 작전명령 생성",
                generate_opord_description: "전문적인 군사 작전명령을 작성할 준비가 되셨습니까? 선호하는 형식을 선택하고 모든 섹션과 부록이 포함된 완전하고 형식화된 작전명령을 생성하세요.",
                all_formats_include: "모든 형식은 FM 6-0 표준에 따른 부록이 포함된 완전한 작전명령 구조를 포함합니다.",

                // Draft Form Placeholders
                placeholder_situation: "상황 세부사항을 입력하세요...",
                placeholder_mission: "임무 진술을 입력하세요...",
                placeholder_execution: "실행 세부사항을 입력하세요...",
                placeholder_sustainment: "지속지원 세부사항을 입력하세요...",
                placeholder_command: "지휘통신 세부사항을 입력하세요...",
                placeholder_coordinates: "좌표가 포함된 주요 위치를 입력하세요 (예: 목표 ALPHA: 18TWL8396007523, 지휘소 BRAVO: 44R 206915 3009291)",
                placeholder_task_org: "임무 조직을 입력하세요...",
                placeholder_intelligence: "정보 요구사항을 입력하세요...",
                placeholder_operations: "작전 중첩 세부사항을 입력하세요...",
                placeholder_fires: "화력지원 계획을 입력하세요...",
                placeholder_protection: "방호 조치를 입력하세요...",
                placeholder_sustainment_annex: "지속지원 계획을 입력하세요...",
                placeholder_engineer: "공병 임무를 입력하세요...",
                placeholder_signal: "통신 계획을 입력하세요...",
                placeholder_cema: "사이버/전자전 작전 계획을 입력하세요...",
                placeholder_info_collection: "정보수집 계획을 입력하세요...",
                placeholder_misc_annexes: "필요에 따라 추가 부록을 입력하세요 (예: 부록 P - 주둔국 지원, 부록 S - 특수기술작전 등)...",

                // Draft Form Labels
                key_locations_coordinates: "주요 위치 및 좌표",

                // Mapping Interface
                enhanced_map_weather: "향상된 지도 및 날씨 통합",
                enter_coordinates: "좌표 입력",
                coordinate_system: "좌표 시스템",
                weather_units: "날씨 단위",
                execute_search: "검색 실행",
                search_location: "위치 검색",
                tactical_map_interface: "전술 지도 인터페이스",
                enter_coords_above: "위에 좌표를 입력하고 \"위치 검색\"을 클릭하세요",
                add_marker: "마커 추가",
                saved_locations: "저장된 위치",
                save_current: "현재 저장",
                coordinate_tools: "좌표 도구",
                add_to_opord: "작전명령에 추가",
                convert_format: "형식 변환",
                copy_to_clipboard: "클립보드에 복사",
                clear_saved: "저장된 것 지우기",
                no_saved_locations: "아직 저장된 위치가 없습니다. \"현재 저장\"을 사용하여 위치를 추가하세요.",
                weather_information: "날씨 정보",
                current_weather: "현재 날씨",
                forecast_3day: "3일 예보",
                imperial_units: "야드파운드법 (°F)",
                metric_units: "미터법 (°C)",

                // Mapping Buttons and Actions
                insert_current_location: "현재 지도 위치 삽입",
                insert_saved_locations: "저장된 위치 삽입",

                // Distance Calculator
                distance_calculator: "거리 계산기",
                point_a_coordinates: "점 A 좌표",
                point_b_coordinates: "점 B 좌표",
                calculate_distance: "거리 계산",

                // Coordinate Placeholders
                coord_placeholder_mgrs: "예: 32S 0123456 1234567",
                coord_placeholder_utm: "예: 32N 123456 1234567",
                coord_placeholder_latlon: "예: 40.7128, -74.0060",

                // Weather and Tactical Data
                temperature: "온도",
                visibility: "가시거리",
                wind: "바람",
                conditions: "기상상태",
                tactical_data: "전술 데이터",
                bmnt: "BMNT",
                eent: "EENT",
                moon_phase: "달의 위상",
                sunrise: "일출",
                forecast_today: "오늘",
                forecast_tomorrow: "내일",
                forecast_day3: "3일째",

                // Saved Location Names
                statue_of_liberty: "자유의 여신상",
                sydney_opera_house: "시드니 오페라 하우스",
                eiffel_tower: "에펠탑, 프랑스",
                taj_mahal: "타지마할, 인도",
                statue_of_liberty_usa: "자유의 여신상, 미국",
                taj_mahal_india: "타지마할, 인도",

                // Map Layer Names
                geoapify_street: "Geoapify 도로",
                geoapify_carto: "Geoapify Carto",
                geoapify_liberty: "Geoapify Liberty",
                esri_satellite: "ESRI 위성",

                // Example OPORD
                complete_example_opord: "완전한 작전명령 예시",
                classification: "[보안등급]",
                operation_order: "작전명령",
                battalion_ranger: "제2대대, 제75레인저연대",

                // Help Guide
                getting_started: "시작하기",
                coordinate_systems: "좌표 체계",
                weather_integration: "기상 통합",
                opord_structure: "작전명령 구조",
                welcome_msg: "전문 LSCO 작전명령 도구에 오신 것을 환영합니다",
                welcome_desc: "이 종합적인 도구는 군사 계획자들이 대규모 전투작전을 위한 상세한 작전명령을 작성하는 것을 지원합니다.",
                key_features: "주요 기능",
                feature_comprehensive: "FM 6-0을 따르는 포괄적인 작전명령 구조",
                feature_lsco: "LSCO 특화 고려사항 및 예시",
                feature_annexes: "완전한 부록 템플릿 (A부터 L까지)",
                feature_export: "다중 내보내기 형식 (TXT, DOCX, PDF)",
                feature_mapping: "통합된 지도 및 날씨 도구",
                coordinate_intro: "이 도구는 정밀한 군사 계획을 위해 여러 좌표 체계를 지원합니다:",
                lat_lon_system: "위도/경도 (십진도)",
                lat_lon_desc: "십진도 형식을 사용하는 표준 지리 좌표",
                utm_system: "범용 횡단 메르카토르 (UTM)",
                utm_desc: "구역, 동쪽, 북쪽을 포함한 군사 격자 참조 시스템",
                mgrs_system: "군사 격자 참조 시스템 (MGRS)",
                mgrs_desc: "NATO 표준 군사 좌표 시스템",
                weather_intro: "실시간 날씨 통합은 다음을 제공합니다:",
                current_conditions: "현재 기상 조건",
                forecast_3day: "3일 일기 예보",
                tactical_weather: "전술적 기상 고려사항",
                opord_intro: "작전명령은 표준 5단락 형식을 따릅니다:",

                // Common Terms
                includes: "포함사항:",
                example_content: "예시 내용",
                placeholder_enter: "입력",
                details: "세부사항",
                plan: "계획",
                requirements: "요구사항",
                measures: "조치",
                tasks: "임무",
                support: "지원",
                example: "예시:",
                key_components: "주요 구성요소",

                // Section 3 - Execution Additional
                tasks_subordinate: "부하부대 임무",
                essential_tasks: "필수 임무:",
                essential_tasks_desc: "각 부하부대가 수행해야 하는 구체적 임무",
                task_organization: "임무조직:",
                task_org_desc: "작전을 위한 부대 조직 방법",
                control_measures_exec: "통제조치:",
                control_measures_exec_desc: "경계, 단계선, 통제점, 목표",
                coordinating_instructions: "협조지시사항",
                fire_support_concept: "화력지원 개념:",
                fire_support_desc: "화력과 기동의 통합",
                phases_operation: "작전 단계:",
                phases_desc: "활동의 논리적 순서",
                supporting_effort: "조공:",
                supporting_effort_desc: "주공을 지원하는 부대",

                // Section 4 - Sustainment Additional
                human_resources: "인적자원:",
                financial_mgmt: "재정관리:",
                legal_religious: "법무/종교:",
                medical_treatment: "의료처치:",
                medical_evacuation: "의료후송:",
                preventive_medicine: "예방의학:",
                lsco_sustainment: "LSCO 지속지원 고려사항",
                high_consumption: "고소모 품목:",
                sustainment_challenges: "지속지원 도전과제:",

                // Section 5 - Command & Signal Additional
                communication_systems: "통신체계:",
                network_operations: "네트워크 운용:",
                signal_operating: "통신운용지시:",
                lsco_c2: "LSCO C2 고려사항",
                communication_challenges: "통신 도전과제",

                // Examples
                example_execution: "예시: 실행 단락",
                example_sustainment: "예시: 지속지원 단락",
                example_command: "예시: 지휘통신 단락",

                // Example Content - Command and Signal
                example_cmd_header: "5. 지휘통신.",
                example_cmd_command: "가. 지휘.",
                example_cmd_command_text: "지휘관은 1단계 동안 A중대와 함께 위치하며, 2단계 동안 목표 BRAVO로 이동. 지휘 승계: 부대장, S-3, A중대장. 주지휘소는 격자 AB567890 부근에 위치, 전술지휘소는 주공과 함께 이동. 지휘관계: A중대와 B중대는 1-32 보병대대에 작전통제, C중대(3-7 기병)는 정찰임무를 위해 전술통제. 결심점: 결심점 1 (H+2) - A중대가 장애물을 돌파하지 못할 경우 예비대 투입, 결심점 2 (H+6) - 성공 활용 또는 진지 공고화.",
                example_cmd_signal: "나. 통신.",
                example_cmd_signal_text: "주파수: 지휘망 54.000 MHz, 행정/군수망 57.000 MHz, 화력지원망 60.000 MHz. 예비주파수: 지휘망 45.000 MHz. 호출부호: STEEL 6 (지휘관), STEEL 7 (부대장), STEEL 3 (S-3), STEEL 1-6 (A중대장). 인증: 현재 SOI에 따른 도전 및 암호. 통신창: 매시 30분에 시간별 상황보고. 비상절차: MEDEVAC 또는 즉각적 위협 시 모든 국은 무선침묵을 깰 수 있음.",

                // Example Content - Execution
                example_exec_header: "3. 실행.",
                example_exec_intent: "가. 지휘관 의도.",
                example_exec_intent_text: "목적: 제2여단전투단의 전선통과와 사단공격 계속을 가능하게 하기 위해 목표 BRAVO를 점령. 방법: 1-32 보병대대는 2단계로 계획공격 실시 - 1단계: 적 장애물을 돌파하고 405고지 점령, 2단계: 성공을 활용하여 목표 BRAVO 확보. 주공은 A중대(1단계)에서 B중대(2단계)로 이동. 종료상태: 목표 BRAVO 확보, 적 격멸 또는 철수, 제2여단전투단 통과로 설정 및 표시.",
                example_exec_concept: "나. 작전개념.",
                example_exec_concept_text: "1-32 보병대대는 집결지역 TIGER에서 목표 BRAVO까지 지역에서 공격. 1단계 (H시간부터 H+4): A중대(주공)가 지뢰지대 X를 돌파하고 405고지 점령. B중대는 사격진지 ALPHA에서 화력지원. C중대(예비대)는 활용 또는 증강 준비. 2단계 (H+4부터 H+8): B중대(주공)가 A중대를 통과하여 목표 BRAVO 점령. A중대는 405고지에서 공고화하고 감시 제공.",
                example_exec_tasks: "다. 부하부대 임무.",
                example_exec_tasks_text: "A중대: H+2까지 지뢰지대 X 돌파, H+4까지 405고지 점령 및 확보, B중대 전진 지원 준비. B중대: H+4까지 사격진지 ALPHA에서 A중대 화력지원, A중대 통과하여 H+8까지 목표 BRAVO 점령. C중대: 예비대, A중대 증강 또는 B중대 성공 활용 준비, 30분 대기태세 유지.",

                // Help Guide Content
                help_navigation: "탐색:",
                help_navigation_desc: "사이드바 탭을 사용하여 다른 섹션에 액세스",
                help_time_clocks: "시간 시계:",
                help_time_desc: "실시간 Zulu, 동부, 베이징, 모스크바, 하와이, 서울, 현지 시간 표시",
                help_copy_dtg: "DTG 복사:",
                help_copy_desc: "군사 시간 형식을 위해 \"Zulu DTG 복사\" 클릭",
                help_shortcuts: "키보드 단축키:",
                help_shortcuts_desc: "Ctrl+S (저장), Ctrl+H (도움말), Ctrl+M (지도)",

                help_main_sections: "주요 섹션:",
                help_situation_desc: "적, 아군, 환경 (OAKOC), 민간 고려사항",
                help_mission_desc: "5W 프레임워크 사용 (누가, 무엇을, 언제, 어디서, 왜)",
                help_execution_desc: "지휘관 의도, 작전 개념, 임무",
                help_sustainment_desc: "군수, 인사, 보건 서비스 지원",
                help_command_desc: "C2 관계, 통신",

                // Sidebar Navigation Descriptions
                sidebar_situation_desc: "적, 아군, 환경",
                sidebar_mission_desc: "누가, 무엇을, 언제, 어디서, 왜",
                sidebar_execution_desc: "의도, 개념, 임무",
                sidebar_sustainment_desc: "군수, 인사, 보건",
                sidebar_command_desc: "C2, 통신",
                sidebar_annexes_desc: "A-H + 추가 부록",
                sidebar_example_desc: "완전한 참조",
                sidebar_draft_desc: "입력 및 생성",

                help_fm_annexes: "FM 6-0 부록:",
                help_annex_a_short: "임무조직",
                help_annex_b_short: "정보",
                help_annex_c_short: "작전",
                help_annex_d_short: "화력",
                help_annex_e_short: "방호",
                help_annex_f_short: "지속지원",
                help_annex_g_short: "공병",
                help_annex_h_short: "통신",

                help_draft_system: "초안 시스템 사용",
                help_mission_builder: "임무 작성기:",
                help_mission_builder_desc: "5W를 채운 다음 적절한 형식을 위해 \"자동 생성\" 클릭",
                help_section_input: "섹션 입력:",
                help_section_input_desc: "각 OPORD 섹션에 텍스트 영역 사용",
                help_annexes_desc: "필요에 따라 모든 8개 FM 6-0 부록 완성",
                help_save_draft: "초안 저장:",
                help_save_draft_desc: "로컬 저장소에 자동 저장",
                help_export: "내보내기:",
                help_export_desc: "모든 부록이 포함된 완전한 OPORD 다운로드",

                help_coordinate_input: "좌표 입력:",
                help_coordinate_desc: "MGRS, UTM 또는 위도/경도 좌표 입력",
                help_search_location: "위치 검색:",
                help_search_desc: "기상 데이터와 함께 위치 찾기 및 표시",
                help_add_markers: "마커 추가:",
                help_markers_desc: "목표에 전술 마커 배치",
                help_convert_coords: "좌표 변환:",
                help_convert_desc: "좌표 시스템 간 전환",
                help_saved_locations: "저장된 위치:",
                help_saved_desc: "사용자 정의 위치 저장 및 관리",

                help_ref_coords: "참조 좌표 테스트 지점:",
                help_taj_mahal: "타지마할, 인도 (UTM):",
                help_statue_liberty: "자유의 여신상, NY (UTM):",
                help_eiffel_tower: "에펠탑, 프랑스 (MGRS):",
                help_sydney_opera: "시드니 오페라 하우스, 호주 (위도/경도):",
                help_coords_note: "이 좌표들은 좌표 변환 정확도를 테스트하기 위한 검증된 참조점입니다.",

                help_lsco_considerations: "LSCO 고려사항",
                help_multi_domain: "다영역 작전:",
                help_multi_domain_desc: "사이버, 전자전, 우주 위협 고려",
                help_high_consumption: "고소모:",
                help_consumption_desc: "탄약 및 연료 사용 증가 계획",
                help_contested_env: "경합 환경:",
                help_contested_desc: "통신 저하 가정",
                help_mass_casualties: "대량 사상자:",
                help_casualties_desc: "상당한 의료 요구사항 계획",
                help_extended_ops: "연장 작전:",
                help_extended_desc: "시간에 따른 지속지원 고려",

                help_tips_success: "성공을 위한 팁",
                help_start_mission: "임무로 시작:",
                help_start_desc: "명확한 임무 명세서가 모든 것을 이끕니다",
                help_use_examples: "예시 사용:",
                help_examples_desc: "지침을 위해 \"예시 내용\" 클릭",
                help_be_specific: "구체적으로:",
                help_specific_desc: "격자 좌표, 시간, 부대 지정 포함",
                help_check_doctrine: "교리 확인:",
                help_doctrine_desc: "모든 내용은 FM 6-0 표준 기반",
                help_save_often: "자주 저장:",
                help_save_often_desc: "Ctrl+S 사용하거나 저장 버튼을 정기적으로 클릭",

                // LSCO Content - High Consumption Items
                ammo_precision: "탄약 (특히 정밀 탄약)",
                fuel_extended: "연장 작전용 연료",
                medical_mass_cas: "대량 사상자용 의료 보급품",
                repair_parts: "장비 손상용 수리 부품",

                // LSCO Content - Sustainment Challenges
                extended_supply: "위협 하의 연장된 보급선",
                contested_logistics: "경합 군수 작전",
                increased_maintenance: "증가된 정비 요구사항",
                mass_casualty_scenarios: "대량 사상자 시나리오",

                // Example Content - Sustainment
                example_sust_header: "4. 지속지원.",
                example_sust_logistics: "가. 군수.",
                example_sust_logistics_text: "보급: 1급 및 3급 재보급은 매일 1800Z에 격자 AB345678 부근 LOGPAC 지점에서 실시. 5급 재보급은 명령에 따라, 긴급 재보급은 2시간 내 가능. 정비: A/3-7 FSB가 직접지원 정비 지원 제공. 부대 정비팀은 기동중대와 함께 배치. 회수 자산은 TAA CHARLIE에 위치. 수송: MSR GOLD를 주 보급로로 지정, MSR SILVER는 대체로. 배급점은 격자 AB234567에 설치.",
                example_sust_personnel: "나. 인사.",
                example_sust_personnel_text: "인적자원: 부대 SOP에 따른 사상자 보고, 보충 인원은 중대급에서 통합. S-1이 인사 책임 유지. 재정관리: S-1을 통해 긴급 급여 지급 가능. 법무지원: 제1여단전투단 SJA가 필요시 법무지원 제공. 종교지원: 군종장교가 종교 서비스 및 상담 제공.",
                example_sust_medical: "다. 보건 서비스 지원.",
                example_sust_medical_text: "의료 처치: 중대 의무병이 1단계 치료 제공. B/3-7 FSB가 격자 AB456789 부근 BAS에서 2단계 치료 제공. 의료 후송: 3-7 FSB를 통한 지상 MEDEVAC, 15분 대응시간의 항공 MEDEVAC 가능. 예방의학: 매일 물 검사 실시, 요청시 전투 스트레스 통제팀 이용 가능.",

                // Manage Annexes Content
                annexes_intro: "FM 6-0 부록에 대해 학습하고 적절한 사용법을 익히세요. 각 부록은 주 작전명령을 지원하는 전문 정보를 제공합니다. 실제 부록을 작성하려면 \"작전명령 초안\" 섹션을 사용하세요.",
                fm60_structure: "FM 6-0 부록 구조",
                fm60_structure_desc: "다음 부록들은 현재 FM 6-0 교리를 따릅니다. 모든 작전에 모든 부록이 필요한 것은 아닙니다 - 임무와 관련된 것만 포함하세요.",
                purpose: "목적:",
                includes: "포함사항:",
                example_content: "예시 내용",
                key_components: "주요 구성요소",
                how_to_use: "이 부록들을 사용하는 방법",
                how_to_use_desc: "이 설명과 예시들은 참고 및 학습용입니다. 실제 부록을 작성하려면 특정 부록 내용을 입력하고 완전한 작전명령 문서를 생성할 수 있는 \"작전명령 초안\" 섹션을 사용하세요.",

                // Annex Descriptions
                annex_a_desc: "작전을 위한 상세한 부대 구조, 배속, 임무 할당.",
                annex_b_desc: "전장 정보 준비, 적 분석, 수집 요구사항.",
                annex_c_desc: "도표, 중첩도, 작전 절차가 포함된 상세한 전술 계획.",
                annex_d_desc: "화력지원 계획, 목표 목록, FSCM, 포병 임무, 항공 지원.",
                annex_e_desc: "방공, 생존성, 작전보안, 인원 회수, 교전규칙.",
                annex_f_desc: "포괄적인 군수, 인사, 보건 서비스 지원 계획.",
                annex_g_desc: "기동성, 대기동성, 생존성을 위한 공병 임무.",
                annex_h_desc: "상세한 통신 계획, 주파수, 호출부호, PACE 계획.",
                annex_k_desc: "사이버/전자전 및 전자기 활동 작전 계획.",
                annex_l_desc: "PIR을 수집 자산 및 임무와 연결하는 정보 수집 계획.",
                misc_annexes: "기타 부록",
                misc_desc: "임무별 요구사항에 따른 추가 부록.",

                // Annex Purpose and Includes Content
                annex_a_purpose: "작전을 위한 병력 배치와 지휘관계를 상세히 기술.",
                annex_a_includes: "부대 임무조직, 배속, 분리, 지휘관계 (작전통제, 전술통제, 직접지원 등)",
                annex_b_purpose: "상세한 적 분석과 정보수집 계획 제공.",
                annex_b_includes: "우선정보요구사항, 수집자산, 적 상황템플릿, 정보산물, 배포절차",
                annex_c_purpose: "작전중첩도와 상세한 기동개념 포함.",
                annex_c_includes: "계획의 도식적 묘사, 통제수단, 단계선, 목표, 경계",
                annex_d_purpose: "작전을 위한 상세한 화력지원 조정 및 계획 제공.",
                annex_d_includes: "화력지원조정수단, 목표목록, 포병임무, 항공지원요청, 화력지원실행매트릭스",
                annex_e_purpose: "전투력 보존과 임무성공 보장을 위한 방호조치 상세화.",
                annex_e_includes: "방공계획, 생존성조치, 작전보안절차, 인원회수, 교전규칙, 부대방호조치",
                annex_f_purpose: "작전 전반에 걸쳐 전투효과 유지를 위한 상세한 지속지원 계획 제공.",
                annex_f_includes: "군수(보급품 분류), 인사서비스, 보건서비스지원, 정비, 배급계획",
                annex_g_purpose: "기동성 향상, 적 기동성 거부, 생존성 개선을 위한 공병지원 상세화.",
                annex_g_includes: "기동작전, 대기동조치, 생존성 구축, 일반공병, 지리공간지원",
                annex_h_purpose: "지휘통제를 위한 포괄적인 통신 및 정보체계 지원 제공.",
                annex_h_includes: "PACE 계획, 주파수 할당, 호출부호, 전파통제절차, 네트워크 운용",
                annex_k_purpose: "작전을 위한 사이버작전, 전자전, 전자기스펙트럼 관리 상세화.",
                annex_k_includes: "사이버작전계획, 전자전 목표, 스펙트럼 관리, 전파통제절차, 방어적 사이버조치",
                annex_l_purpose: "의사결정과 상황인식 지원을 위한 정보수집 계획 상세화.",
                annex_l_includes: "우선정보요구사항(PIR), 수집자산, 정보흐름절차, 보고일정",

                // Annex H Example Content
                signal_plan: "1. 통신 계획:",
                pace_plan_example: "가. PACE 계획: 주(FM), 대체(SATCOM), 비상(HF), 긴급(시각신호)",
                frequencies_example: "나. 주파수: 지휘망 54.000 MHz, 행정/군수망 46.000 MHz",
                call_signs_example: "다. 호출부호: STEEL 6 (지휘관), STEEL 7 (부대장), STEEL 3 (S3)",
                emcon_example: "라. 전파통제: H시간까지 3단계, 이후 2단계",
                network_ops_example: "마. 네트워크 운용: SIPR/NIPR 연결성, 사이버 방어",

                // Coordinating Instructions
                time_sequence: "시간 및 사건 순서",
                rules_engagement: "교전규칙 (ROE)",
                risk_mitigation: "위험 완화 조치",
                rehearsal_guidance: "연습 지침",
                contingency_plans: "비상 계획",

                // Human Resources
                casualty_reporting: "사상자 보고",
                replacement_ops: "보충 작전",
                personnel_accountability: "인원 책임",

                // Financial Management
                pay_operations: "급여 운용",
                contracting_support: "계약 지원",
                resource_management: "자원 관리",

                // Legal/Religious
                legal_support: "법무 지원",
                religious_services: "종교 서비스",
                morale_support: "사기 지원",

                // Medical Treatment
                role_1_unit: "1단계 (부대급)",
                role_2_forward: "2단계 (전방지원)",
                triage_procedures: "분류 절차",

                // Medical Evacuation
                medevac_procedures: "의료후송 절차",
                casualty_collection: "사상자 수집",
                evacuation_routes: "후송 경로",

                // Preventive Medicine
                disease_prevention: "질병 예방",
                environmental_health: "환경 보건",
                combat_stress_control: "전투 스트레스 통제",

                // Communication Systems
                primary_alternate_freq: "주 및 대체 주파수",
                call_signs_auth: "호출부호 및 인증",
                communication_windows: "통신 창",

                // Network Operations
                digital_comm_systems: "디지털 통신 체계",
                network_security_protocols: "네트워크 보안 프로토콜",
                cyber_defense_measures: "사이버 방어 조치",

                // Signal Operating Instructions
                communication_procedures: "통신 절차",
                emergency_procedures: "비상 절차",
                comsec_requirements: "통신보안 요구사항",

                // LSCO C2 Considerations
                redundant_comm_systems: "중복 통신 체계",
                ew_countermeasures: "전자전 대응책",
                distributed_command_posts: "분산 지휘소",
                mission_command_philosophy: "임무형 지휘 철학",
                rapid_decision_making: "신속한 의사결정 과정",

                // Communication Challenges
                enemy_electronic_warfare: "적 전자전",
                degraded_comm_environments: "통신 저하 환경",
                extended_comm_ranges: "연장된 통신 거리",
                interoperability_requirements: "상호운용성 요구사항",
                cyber_threats_networks: "네트워크에 대한 사이버 위협",

                // Annex G (Engineer) Example Content
                engineer_tasks: "1. 공병 임무:",
                mobility_example: "가. 기동성: H+2까지 지뢰지대 X 제거, 돌파 작전",
                countermobility_example: "나. 대기동성: PL SILVER에 장애물 설치, 경로 차단",
                survivability_example: "다. 생존성: 전투 진지 구축, 방호 진지",
                supporting_unit_example: "라. 지원 부대: A중대, 3-7 공병 (TF에 직접지원)",
                general_engineering_example: "마. 일반 공병: 경로 유지, 시설",

                // Annex A (Task Organization) Example Content
                task_organization_plan: "1. 임무조직:",
                main_effort_example: "가. 주공: A중대, 1-32 보병",
                supporting_effort_example: "나. 지원공격: B중대, 1-32 보병",
                reserve_example: "다. 예비대: C중대, 1-32 보병",
                attachments_example: "라. 배속: 1소대, A중대, 3-7 기병 (작전통제)",

                // Annex B (Intelligence) Key Components
                pir_requirements: "우선정보요구사항 (PIR)",
                collection_plan_assets: "수집 계획 및 자산",
                enemy_sittemp: "적 상황 템플릿 (SITTEMP)",
                intel_products_dissem: "정보 산물 및 배포",

                // Annex E (Protection) Example Content
                protection_measures: "1. 방호 조치:",
                air_defense_example: "가. 방공: 무기통제상태 WEAPONS TIGHT",
                opsec_example: "나. 작전보안: 전파통제, 위장 규율",
                personnel_recovery_example: "다. 인원 회수: CSAR 절차, 고립 인원",
                roe_example: "라. 교전규칙: 현재 지침에 따른 교전규칙",
                survivability_example_detailed: "마. 생존성: 전투 진지, 상부 엄폐",

                // Annex F (Sustainment) Example Content
                sustainment_plan: "1. 지속지원 계획:",
                class_resupply_example: "가. 1급/3급 재보급: 매일 1800Z LOG PAD에서",
                class_v_example: "나. 5급: 명령에 따라, 2시간 긴급 재보급",
                maintenance_example: "다. 정비: FSB의 직접지원, 수집점",
                medical_example: "라. 의료: 1/2단계 치료, MEDEVAC 절차, CCP 위치",
                personnel_example: "마. 인사: 보충 작전, 사상자 보고",

                // Annex K (CEMA) Example Content
                cema_operations: "1. CEMA 작전:",
                cyber_ops_example: "가. 사이버 작전: 네트워크 방어, 공격적 사이버",
                electronic_warfare_example: "나. 전자전: 재밍, SIGINT, COMINT",
                spectrum_mgmt_example: "다. 스펙트럼 관리: 주파수 비충돌",
                emcon_example_detailed: "라. 전파통제: 전파 통제 절차",
                defensive_measures_example: "마. 방어 조치: 네트워크 보안, 작전보안",

                // Annex L (Information Collection) Example Content
                info_collection_plan: "1. 정보수집 계획:",
                pir_1_example: "가. PIR 1: 적 예비대 위치 및 이동",
                pir_2_example: "나. PIR 2: 작전지역 내 민간인 대피 상황",
                collection_assets_example: "다. 수집 자산: UAV, HUMINT, SIGINT",
                reporting_example: "라. 보고: 2시간마다 SALUTE 보고",
                info_flow_example: "마. 정보 흐름: 수집자 → S2 → 지휘관",

                // Miscellaneous Annexes Content
                misc_purpose: "표준 A-L 구조에서 다루지 않는 임무별 부록에 대한 유연성 제공.",
                misc_examples: "예시: 부록 P (주둔국 지원), 부록 S (특수기술작전), 부록 M (평가), 맞춤형 부록",
                common_additional_annexes: "일반적인 추가 부록",
                annex_p_desc: "부록 P (주둔국 지원): 현지 지원 조정",
                annex_s_desc: "부록 S (특수기술작전): 전문 능력",
                annex_m_desc: "부록 M (평가): 임무 평가 기준",
                annex_r_desc: "부록 R (보고): 보고 요구사항 및 절차",
                custom_annexes_desc: "맞춤형 부록: 임무별 요구사항",

                // Annex C (Operations) Key Components
                operations_overlay: "작전 중첩도 (도표)",
                scheme_maneuver_details: "기동 개념 세부사항",
                control_measures_boundaries: "통제 수단 및 경계",
                phase_lines_objectives: "단계선 및 목표",

                // Annex D (Fires) Example Content
                fire_support_coordination: "1. 화력지원 조정:",
                supporting_units_example: "가. 지원 부대: 1-77 야포 (직접지원), 2-8 야포 (일반지원보강)",
                priority_fires_example: "나. 화력 우선순위: A중대 (주공)",
                fscl_example: "다. 화력지원조정선 (FSCL): PL BLUE",
                nfa_example: "라. 사격금지지역 (NFA): 마을 KILO (AB234678)",
                target_list_example: "마. 목표 목록: TGT AA1001 (적 지휘소), TGT AA1002 (박격포 진지)",

                // Example OPORD Content
                example_opord_classification: "[보안등급]",
                example_opord_title: "작전명령 20241215120000Z",
                example_opord_unit: "제2대대, 제75레인저연대",

                // Situation Section
                enemy_forces_header: "가. 적군:",
                enemy_forces_content: "적 중대급 부대(120-150명)가 목표 ALPHA에서 방어진지를 점령하고 있음. 적군은 박격포와 대전차무기를 지원받는 기계화보병으로 구성됨. 적은 고지에 관측소를 설치하고 교차사격이 가능한 전투진지를 준비함. 적의 사기는 보통 수준이며 야간투시 능력은 제한적임.",

                friendly_forces_header: "나. 아군:",
                friendly_forces_content: "제1여단전투팀이 북쪽에서 지원공격을 실시. 제3대대, 제75레인저가 동쪽에서 감시 및 화력지원 제공. 항공자산으로 AH-64 아파치 헬기 2대와 AC-130 건쉽 1대가 대기 중. 제1-319 야포대대에서 화력우선순위로 포병지원.",

                environment_header: "다. 환경:",
                environment_content: "지형: 산발적 식생이 있는 구릉지, 고도 200-400m. 날씨: 맑음, 기온 20°C, 북서풍 5-10mph. 주간 시계 무제한, 야간 2km. 박명시작: 0630Z, 박명종료: 1830Z. 달: 25% 하현달.",

                attachments_header: "라. 배속/분리:",
                attachments_content: "배속: 전진관측팀 1개, 전투공병분대 1개, 군견팀 1개. 분리: 없음.",

                key_locations_header: "주요 위치:",
                key_locations_content: "목표 ALPHA: 32S 0123456 1234567 (MGRS)\n전술집결지역 BRAVO: 32S 0120000 1230000 (MGRS)\n단계선 CHARLIE: 32S 0121000 1232000 (MGRS)\n지휘소 DELTA: 32S 0119000 1229000 (MGRS)",

                // Mission Section
                mission_content: "제2대대, 제75레인저연대는 24년 12월 15일 1800Z까지 목표 ALPHA를 점령하여 적 방어진지를 파괴하고 후속작전을 위한 핵심지형을 확보한다.",

                // Execution Section
                commanders_intent_header: "가. 지휘관 의도:",
                commanders_intent_purpose: "목적: 적 방어능력 파괴 및 핵심지형 확보.",
                commanders_intent_key_tasks: "핵심임무: (1) 적 방어선 돌파, (2) 적 거점 무력화, (3) 목표 ALPHA 확보.",
                commanders_intent_end_state: "종료상태: 적군 파괴 또는 철수, 목표 ALPHA 확보, 후속작전 준비 완료.",

                concept_ops_header: "나. 작전개념:",
                concept_ops_phase1: "1단계 (이동): 부대는 야음을 이용하여 전술집결지역 BRAVO에서 공격진지로 이동.",
                concept_ops_phase2: "2단계 (공격): 지원사격과 함께 조정된 공격으로 적 진지 돌파.",
                concept_ops_phase3: "3단계 (통합): 목표 확보 및 방어진지 준비.",

                tasks_subordinate_header: "다. 예하부대 임무:",
                tasks_alpha_company: "알파중대: 주공. 축선 EAGLE을 따라 공격하여 목표 ALPHA 북쪽 점령.",
                tasks_bravo_company: "브라보중대: 지원공격. 축선 FALCON을 따라 공격하여 목표 ALPHA 남쪽 점령.",
                tasks_charlie_company: "찰리중대: 대대 예비대. 성공 활용 또는 주공 보강 준비.",

                coordinating_instructions_header: "라. 협조지시사항:",
                coordinating_h_hour: "• H시간: 24년 12월 15일 1600Z",
                coordinating_roe: "• 교전규칙: 교전 전 확실한 식별 필요",
                coordinating_ccir: "• 지휘관 핵심정보요구사항: 적 증원, 민간인 존재, 장애물 위치",
                coordinating_rehearsal: "• 연습: 14일 1400Z 전술집결지역 BRAVO에서",

                // Sustainment Section
                logistics_header: "가. 군수:",
                logistics_content: "1급: 3일분 보유. 3급: 전술집결지역 BRAVO에 급유소. 5급: 기본량 + 50% 추가. 단계선 CHARLIE에서 지상수송으로 재보급.",

                personnel_services_header: "나. 인사서비스:",
                personnel_services_content: "S-1을 통한 보충작전. 지휘소 DELTA에 포로수용소. 군종장교를 통한 사기지원.",

                health_service_header: "다. 보건서비스 지원:",
                health_service_content: "지휘소 DELTA에 대대구호소. 전술집결지역 BRAVO에 의료후송 착륙장. 우선순위: 긴급, 우선, 일반. 9선 절차 시행.",

                // Command & Signal Section
                command_header: "가. 지휘:",
                command_content: "지휘소 위치: 지휘소 DELTA (32S 0119000 1229000). 지휘계승: 중대장, 부중대장, S-3, 알파중대장.",

                control_header: "나. 통제:",
                control_content: "보고: 30분마다 상황보고. 필요시 현장보고. 검문소: 알파, 브라보, 찰리 설치.",

                signal_header: "다. 통신:",
                signal_content: "주: FM 무선망. 대체: 위성통신. 비상: 시각신호. 긴급: 신호탄. 주파수: 지휘망 45.000, 행정망 46.000.",

                // Annexes Section
                annexes_header: "부록:",
                annex_a_desc_example: "부록 A (임무조직): 상세한 부대 배정 및 배속",
                annex_b_desc_example: "부록 B (정보): 적 상황, 지형 분석, 기상 자료",
                annex_c_desc_example: "부록 C (작전): 상세한 전술 계획 및 도표 중첩",
                annex_d_desc_example: "부록 D (화력): 포병 및 근접항공지원 계획",
                annex_e_desc_example: "부록 E (방호): 부대방호 및 화생방 조치",
                annex_f_desc_example: "부록 F (지속지원): 상세한 군수 및 의료지원 계획",
                annex_g_desc_example: "부록 G (공병): 장애물 제거 및 기동지원",
                annex_h_desc_example: "부록 H (통신): 통신계획 및 주파수",

                // Example OPORD Notes
                example_opord_notes_header: "예시 작전명령 주석",
                example_notes_purpose: "목적: 이 예시는 FM 6-0 기준에 따른 완전한 작전명령 구조를 보여줍니다.",
                example_notes_key_elements: "핵심요소: 상세한 적 상황, 명확한 임무 진술, 포괄적인 실행 계획, 완전한 지속지원 고려사항을 주목하세요.",
                example_notes_coordinates: "좌표: 모든 전술 도표는 정밀성과 표준화를 위해 MGRS 좌표를 사용합니다.",
                example_notes_classification: "보안등급: [보안등급]을 귀하의 네트워크에 적합한 보안 표시로 교체하세요.",
                example_notes_customization: "맞춤화: 귀하의 특정 작전 요구사항에 맞게 이 형식과 세부 수준을 조정하세요."
            }
        };

        // Professional LSCO OPORD Application
        class ProfessionalOPORD {
            constructor() {
                this.currentTab = 'situation';
                this.formData = {};
                this.autoSaveInterval = null;
                this.isInitialized = false;
                this.currentLanguage = 'en';
                this.translations = translations; // Make translations accessible to the class
                this.mapImages = [];
                this.map = null;
                this.layerControl = null;
                this.drawnItems = null;
                this.init();
            }

            async init() {
                try {
                    // Initialize components
                    await this.initializeComponents();

                    this.isInitialized = true;
                    this.showNotification('LSCO OPORD Tool initialized successfully!', 'success');
                } catch (error) {
                    console.error('Initialization error:', error);
                    this.showNotification('Error initializing application', 'error');
                }
            }

            async initializeComponents() {
                // Setup event listeners
                this.setupEventListeners();

                // Setup time clocks
                this.setupTimeClocks();

                // Setup language selector
                this.setupLanguageSelector();

                // Load initial content
                this.loadTabContent('situation');

                // Start auto-save
                this.startAutoSave();

                // Load saved data
                this.loadFormData();

                // Load saved language
                this.loadSavedLanguage();

                // Update progress
                this.updateProgress();
            }

            setupLanguageSelector() {
                const selector = document.getElementById('language-selector');
                if (selector) {
                    selector.addEventListener('change', (e) => {
                        this.changeLanguage(e.target.value);
                    });
                }
            }

            loadSavedLanguage() {
                const savedLang = localStorage.getItem('opord-language');
                if (savedLang && this.translations[savedLang]) {
                    this.currentLanguage = savedLang;
                    const selector = document.getElementById('language-selector');
                    if (selector) {
                        selector.value = savedLang;
                    }
                    this.translatePage();
                }
            }

            changeLanguage(langCode) {
                this.currentLanguage = langCode;
                localStorage.setItem('opord-language', langCode);
                this.translatePage();

                // Refresh dynamic unit management interface
                if (window.refreshSubordinateUnitsInterface) {
                    window.refreshSubordinateUnitsInterface();
                }

                this.showNotification(`Language changed to ${this.getLanguageName(langCode)}`, 'success');
            }

            getLanguageName(langCode) {
                const names = {
                    'en': 'English',
                    'es': 'Español',
                    'fr': 'Français',
                    'de': 'Deutsch',
                    'ko': '한국어'
                };
                return names[langCode] || 'English';
            }

            translatePage() {
                // Translate text content
                const elements = document.querySelectorAll('[data-translate]');
                elements.forEach(element => {
                    const key = element.getAttribute('data-translate');
                    const translation = this.getTranslation(key);
                    if (translation) {
                        element.textContent = translation;
                    }
                });

                // Translate placeholders
                const placeholderElements = document.querySelectorAll('[data-translate-placeholder]');
                placeholderElements.forEach(element => {
                    const key = element.getAttribute('data-translate-placeholder');
                    const translation = this.getTranslation(key);
                    if (translation) {
                        element.placeholder = translation;
                    }
                });

                // Update map layers if map exists
                this.updateMapLayers();
            }

            getTranslation(key) {
                return this.translations[this.currentLanguage]?.[key] || this.translations['en'][key] || key;
            }

            updateMapLayers() {
                // Only update if map and layer control exist
                if (this.map && this.layerControl) {
                    // Remove existing layer control
                    this.layerControl.remove();

                    // Create new base layers with translated names
                    const baseLayers = {};
                    baseLayers[this.getTranslation('geoapify_street')] = L.tileLayer(`https://maps.geoapify.com/v1/tile/osm-bright/{z}/{x}/{y}.png?apiKey=${GEOAPIFY_API_KEY}`, {
                        attribution: '© Geoapify | © OpenStreetMap contributors',
                        maxZoom: 18
                    });
                    baseLayers[this.getTranslation('geoapify_carto')] = L.tileLayer(`https://maps.geoapify.com/v1/tile/osm-carto/{z}/{x}/{y}.png?apiKey=${GEOAPIFY_API_KEY}`, {
                        attribution: '© Geoapify | © OpenStreetMap contributors',
                        maxZoom: 18
                    });
                    baseLayers[this.getTranslation('geoapify_liberty')] = L.tileLayer(`https://maps.geoapify.com/v1/tile/osm-liberty/{z}/{x}/{y}.png?apiKey=${GEOAPIFY_API_KEY}`, {
                        attribution: '© Geoapify | © OpenStreetMap contributors',
                        maxZoom: 18
                    });
                    baseLayers[this.getTranslation('esri_satellite')] = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
                        attribution: 'Tiles &copy; <a href="https://www.esri.com/">Esri</a> &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community',
                        maxZoom: 19
                    });

                    // Add new layer control with translated names
                    this.layerControl = L.control.layers(baseLayers, null, {
                        position: 'topright',
                        collapsed: false
                    }).addTo(this.map);
                }
            }

            setupEventListeners() {
                try {
                    // Tab navigation
                    document.querySelectorAll('.tab-btn').forEach(btn => {
                        btn.addEventListener('click', (e) => {
                            const tab = e.currentTarget.dataset.tab;
                            if (tab) this.switchTab(tab);
                        });
                    });

                    // Help guide
                    const helpBtn = document.getElementById('help-guide');
                    if (helpBtn) {
                        helpBtn.addEventListener('click', () => this.showHelp());
                    }

                    // Manage snippets
                    const snippetsBtn = document.getElementById('manage-snippets');
                    if (snippetsBtn) {
                        snippetsBtn.addEventListener('click', () => this.showSnippets());
                    }

                    // Clear draft
                    const clearBtn = document.getElementById('clear-draft');
                    if (clearBtn) {
                        clearBtn.addEventListener('click', () => this.clearDraft());
                    }

                    // Donate button
                    const donateBtn = document.getElementById('donate-btn');
                    if (donateBtn) {
                        donateBtn.addEventListener('click', () => this.showDonationModal());
                    }

                    // Copy Zulu time
                    const copyZuluBtn = document.getElementById('copy-zulu-time');
                    if (copyZuluBtn) {
                        copyZuluBtn.addEventListener('click', () => this.copyZuluTime());
                    }

                    // Form change detection for auto-save
                    document.addEventListener('input', (e) => {
                        if (e.target.matches('input, textarea, select')) {
                            this.handleFormChange(e);
                        }
                    });

                    // Keyboard shortcuts
                    document.addEventListener('keydown', (e) => {
                        if (e.ctrlKey) {
                            switch(e.key) {
                                case 's':
                                    e.preventDefault();
                                    this.saveFormData();
                                    this.showNotification('Draft saved!', 'success');
                                    break;
                                case 'h':
                                    e.preventDefault();
                                    this.showHelp();
                                    break;
                                case 'm':
                                    e.preventDefault();
                                    this.openMapModal();
                                    break;
                            }
                        }
                    });
                } catch (error) {
                    console.error('Error setting up event listeners:', error);
                }
            }

            switchTab(tabName) {
                try {
                    // Update active tab button
                    document.querySelectorAll('.tab-btn').forEach(btn => {
                        btn.classList.remove('active');
                        if (btn.dataset.tab === tabName) {
                            btn.classList.add('active');
                        }
                    });

                    this.currentTab = tabName;
                    this.loadTabContent(tabName);
                    this.updateProgress();
                } catch (error) {
                    console.error('Error switching tab:', error);
                }
            }

            loadTabContent(tabName) {
                try {
                    const content = this.getTabContent(tabName);
                    const mainContent = document.getElementById('main-content');
                    if (mainContent) {
                        mainContent.innerHTML = content;
                        mainContent.classList.add('fade-in');

                        // Apply current language translations to new content
                        this.translatePage();

                        // Setup tab-specific event listeners
                        this.setupTabSpecificListeners(tabName);

                        setTimeout(() => {
                            mainContent.classList.remove('fade-in');
                        }, 600);
                    }
                } catch (error) {
                    console.error('Error loading tab content:', error);
                }
            }

            setupTabSpecificListeners(tabName) {
                try {
                    if (tabName === 'draft') {
                        this.setupDraftEventListeners();

                        // Setup Generate OPORD button (header)
                        const generateBtn = document.getElementById('generate-opord');
                        if (generateBtn) {
                            generateBtn.addEventListener('click', () => {
                                this.showGenerateModal();
                            });
                        }

                        // Setup Generate OPORD button (bottom)
                        const generateBtnBottom = document.getElementById('generate-opord-bottom');
                        if (generateBtnBottom) {
                            generateBtnBottom.addEventListener('click', () => {
                                this.showGenerateModal();
                            });
                        }

                        // Initialize subordinate units for draft tab
                        setTimeout(() => {
                            const addUnitBtn = document.getElementById('add-unit-btn');
                            const container = document.getElementById('subordinate-units-container');

                            if (addUnitBtn && container && window.addSubordinateUnit) {
                                console.log('Setting up subordinate units in draft tab...');
                                addUnitBtn.addEventListener('click', window.addSubordinateUnit);

                                // Only initialize if container is empty
                                if (container.children.length === 0) {
                                    window.initializeSubordinateUnits();
                                }
                                console.log('Subordinate units setup complete');
                            }
                        }, 100);
                    } else if (tabName === 'annexes') {
                        this.setupAnnexEventListeners();
                    }
                } catch (error) {
                    console.error('Error setting up tab-specific listeners:', error);
                }
            }

            getTabContent(tabName) {
                const contents = {
                    situation: this.getSituationContent(),
                    mission: this.getMissionContent(),
                    execution: this.getExecutionContent(),
                    sustainment: this.getSustainmentContent(),
                    command: this.getCommandContent(),
                    annexes: this.getAnnexesContent(),
                    example: this.getExampleContent(),
                    draft: this.getDraftContent()
                };
                return contents[tabName] || this.getNotFoundContent();
            }

            getNotFoundContent() {
                return '<div class="text-center text-gray-400 py-12">' +
                    '<i class="fas fa-exclamation-triangle text-6xl mb-4 text-yellow-500"></i>' +
                    '<h3 class="text-xl font-semibold mb-2">Content Not Found</h3>' +
                    '<p>The requested section could not be loaded.</p>' +
                    '</div>';
            }

            // Time clock functionality
            setupTimeClocks() {
                try {
                    this.updateClocks();
                    setInterval(() => this.updateClocks(), 1000);
                } catch (error) {
                    console.error('Error setting up time clocks:', error);
                }
            }

            updateClocks() {
                try {
                    const now = new Date();

                    // Update time displays
                    const zuluEl = document.getElementById('time-zulu');
                    const easternEl = document.getElementById('time-eastern');
                    const beijingEl = document.getElementById('time-beijing');
                    const moscowEl = document.getElementById('time-moscow');
                    const hawaiiEl = document.getElementById('time-hawaii');
                    const seoulEl = document.getElementById('time-seoul');
                    const localEl = document.getElementById('time-local');

                    if (zuluEl) {
                        zuluEl.textContent = now.toLocaleTimeString('en-GB', {
                            timeZone: 'UTC',
                            hour12: false
                        });
                    }

                    if (easternEl) {
                        easternEl.textContent = now.toLocaleTimeString('en-US', {
                            timeZone: 'America/New_York',
                            hour12: false
                        });
                    }

                    if (beijingEl) {
                        beijingEl.textContent = now.toLocaleTimeString('en-GB', {
                            timeZone: 'Asia/Shanghai',
                            hour12: false
                        });
                    }

                    if (moscowEl) {
                        moscowEl.textContent = now.toLocaleTimeString('en-GB', {
                            timeZone: 'Europe/Moscow',
                            hour12: false
                        });
                    }

                    if (hawaiiEl) {
                        hawaiiEl.textContent = now.toLocaleTimeString('en-US', {
                            timeZone: 'Pacific/Honolulu',
                            hour12: false
                        });
                    }

                    if (seoulEl) {
                        seoulEl.textContent = now.toLocaleTimeString('en-GB', {
                            timeZone: 'Asia/Seoul',
                            hour12: false
                        });
                    }

                    if (localEl) {
                        localEl.textContent = now.toLocaleTimeString([], { hour12: false });
                    }

                    // Update date displays
                    const zuluDateEl = document.getElementById('zulu-date');
                    const easternDateEl = document.getElementById('eastern-date');
                    const beijingDateEl = document.getElementById('beijing-date');
                    const moscowDateEl = document.getElementById('moscow-date');
                    const hawaiiDateEl = document.getElementById('hawaii-date');
                    const seoulDateEl = document.getElementById('seoul-date');
                    const localDateEl = document.getElementById('local-date');

                    if (zuluDateEl) {
                        zuluDateEl.textContent = now.toLocaleDateString('en-GB', {
                            timeZone: 'UTC',
                            day: '2-digit',
                            month: 'short',
                            year: '2-digit'
                        });
                    }

                    if (easternDateEl) {
                        easternDateEl.textContent = now.toLocaleDateString('en-US', {
                            timeZone: 'America/New_York',
                            day: '2-digit',
                            month: 'short',
                            year: '2-digit'
                        });
                    }

                    if (beijingDateEl) {
                        beijingDateEl.textContent = now.toLocaleDateString('en-GB', {
                            timeZone: 'Asia/Shanghai',
                            day: '2-digit',
                            month: 'short',
                            year: '2-digit'
                        });
                    }

                    if (moscowDateEl) {
                        moscowDateEl.textContent = now.toLocaleDateString('en-GB', {
                            timeZone: 'Europe/Moscow',
                            day: '2-digit',
                            month: 'short',
                            year: '2-digit'
                        });
                    }

                    if (hawaiiDateEl) {
                        hawaiiDateEl.textContent = now.toLocaleDateString('en-US', {
                            timeZone: 'Pacific/Honolulu',
                            day: '2-digit',
                            month: 'short',
                            year: '2-digit'
                        });
                    }

                    if (seoulDateEl) {
                        seoulDateEl.textContent = now.toLocaleDateString('en-GB', {
                            timeZone: 'Asia/Seoul',
                            day: '2-digit',
                            month: 'short',
                            year: '2-digit'
                        });
                    }

                    if (localDateEl) {
                        localDateEl.textContent = now.toLocaleDateString([], {
                            day: '2-digit',
                            month: 'short',
                            year: '2-digit'
                        });
                    }
                } catch (error) {
                    console.error('Error updating clocks:', error);
                }
            }

            copyZuluTime() {
                try {
                    const now = new Date();
                    const dtg = this.formatZuluDTG(now);
                    navigator.clipboard.writeText(dtg).then(() => {
                        this.showNotification('Zulu DTG copied: ' + dtg, 'success');
                    }).catch(() => {
                        this.showNotification('Failed to copy to clipboard', 'error');
                    });
                } catch (error) {
                    console.error('Error copying Zulu time:', error);
                    this.showNotification('Error copying Zulu time', 'error');
                }
            }

            formatZuluDTG(date) {
                try {
                    const day = String(date.getUTCDate()).padStart(2, '0');
                    const hour = String(date.getUTCHours()).padStart(2, '0');
                    const minute = String(date.getUTCMinutes()).padStart(2, '0');
                    const monthNames = ["JAN", "FEB", "MAR", "APR", "MAY", "JUN",
                                       "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"];
                    const month = monthNames[date.getUTCMonth()];
                    const year = String(date.getUTCFullYear()).slice(-2);
                    return `${day}${hour}${minute}Z ${month} ${year}`;
                } catch (error) {
                    console.error('Error formatting Zulu DTG:', error);
                    return 'Error formatting time';
                }
            }

            // Content generation methods
            getSituationContent() {
                return '<div class="space-y-6">' +
                    '<div class="section-card p-6 rounded-xl">' +
                        '<h3 class="text-2xl font-semibold mb-4 text-white flex items-center">' +
                            '<i class="fas fa-map mr-3 text-blue-400"></i><span data-translate="situation">1. Situation</span>' +
                        '</h3>' +
                        '<p class="text-gray-300 mb-6" data-translate="situation_desc">Provide a comprehensive overview of the operational environment for Large Scale Combat Operations (LSCO).</p>' +
                        '<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">' +
                            '<div class="space-y-4">' +
                                '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                    '<h4 class="text-lg font-semibold text-white mb-3 flex items-center">' +
                                        '<i class="fas fa-user-secret mr-2 text-red-400"></i><span data-translate="enemy_forces">Enemy Forces</span>' +
                                    '</h4>' +
                                    '<ul class="list-disc ml-6 space-y-2 text-gray-300 text-sm">' +
                                        '<li><strong data-translate="composition_disposition">Composition & Disposition:</strong> <span data-translate="composition_desc">Detail enemy unit structure, locations, and strength estimates</span></li>' +
                                        '<li><strong data-translate="capabilities">Capabilities:</strong> <span data-translate="capabilities_desc">Include multi-domain threats (cyber, EW, air defense, artillery)</span></li>' +
                                        '<li><strong data-translate="mlcoa">Most Likely COA (MLCOA):</strong> <span data-translate="mlcoa_desc">Primary enemy course of action</span></li>' +
                                        '<li><strong data-translate="mdcoa">Most Dangerous COA (MDCOA):</strong> <span data-translate="mdcoa_desc">Worst-case enemy scenario</span></li>' +
                                        '<li><strong data-translate="recent_activities">Recent Activities:</strong> <span data-translate="recent_desc">Intelligence updates and enemy patterns</span></li>' +
                                    '</ul>' +
                                '</div>' +
                                '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                    '<h4 class="text-lg font-semibold text-white mb-3 flex items-center">' +
                                        '<i class="fas fa-flag-usa mr-2 text-blue-400"></i><span data-translate="friendly_forces">Friendly Forces</span>' +
                                    '</h4>' +
                                    '<ul class="list-disc ml-6 space-y-2 text-gray-300 text-sm">' +
                                        '<li><strong data-translate="higher_hq">Higher HQ Mission:</strong> <span data-translate="higher_desc">Two levels up mission and intent</span></li>' +
                                        '<li><strong data-translate="adjacent_units">Adjacent Units:</strong> <span data-translate="adjacent_desc">Left, right, and supporting unit missions</span></li>' +
                                        '<li><strong data-translate="supporting_elements">Supporting Elements:</strong> <span data-translate="supporting_desc">Artillery, air support, engineers, etc.</span></li>' +
                                        '<li><strong data-translate="boundaries">Boundaries:</strong> <span data-translate="boundaries_desc">Unit area of operations and control measures</span></li>' +
                                    '</ul>' +
                                '</div>' +
                            '</div>' +
                            '<div class="space-y-4">' +
                                '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                    '<h4 class="text-lg font-semibold text-white mb-3 flex items-center">' +
                                        '<i class="fas fa-mountain mr-2 text-green-400"></i><span data-translate="environment">Environment</span>' +
                                    '</h4>' +
                                    '<div class="space-y-3">' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-gray-200" data-translate="oakoc_analysis">OAKOC Analysis:</h5>' +
                                            '<ul class="list-disc ml-6 space-y-1 text-gray-300 text-sm">' +
                                                '<li><strong data-translate="observation_fires">Observation & Fields of Fire:</strong> <span data-translate="observation_desc">Visibility and engagement areas</span></li>' +
                                                '<li><strong data-translate="avenues_approach">Avenues of Approach:</strong> <span data-translate="avenues_desc">Enemy and friendly mobility corridors</span></li>' +
                                                '<li><strong data-translate="key_terrain">Key Terrain:</strong> <span data-translate="key_terrain_desc">Decisive terrain features</span></li>' +
                                                '<li><strong data-translate="obstacles">Obstacles:</strong> <span data-translate="obstacles_desc">Natural and man-made barriers</span></li>' +
                                                '<li><strong data-translate="cover_concealment">Cover & Concealment:</strong> <span data-translate="cover_desc">Protection from observation/fires</span></li>' +
                                            '</ul>' +
                                        '</div>' +
                                    '</div>' +
                                '</div>' +
                            '</div>' +
                        '</div>' +
                    '</div>' +
                '</div>';
            }

            getMissionContent() {
                return '<div class="space-y-6">' +
                    '<div class="section-card p-6 rounded-xl">' +
                        '<h3 class="text-2xl font-semibold mb-4 text-white flex items-center">' +
                            '<i class="fas fa-bullseye mr-3 text-blue-400"></i><span data-translate="mission">2. Mission</span>' +
                        '</h3>' +
                        '<p class="text-gray-300 mb-6" data-translate="mission_desc">State the unit essential task and purpose in a single, clear, concise sentence.</p>' +
                        '<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">' +
                            '<div class="bg-gray-800 p-6 rounded-lg border border-gray-600">' +
                                '<h4 class="text-lg font-semibold text-white mb-4 flex items-center">' +
                                    '<i class="fas fa-question-circle mr-2 text-yellow-400"></i><span data-translate="five_ws_framework">The Five Ws Framework</span>' +
                                '</h4>' +
                                '<div class="space-y-4">' +
                                    '<div class="flex items-start space-x-3">' +
                                        '<div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-sm">W</div>' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-blue-300" data-translate="who">Who</h5>' +
                                            '<p class="text-gray-300 text-sm" data-translate="who_desc">Your unit designation</p>' +
                                        '</div>' +
                                    '</div>' +
                                    '<div class="flex items-start space-x-3">' +
                                        '<div class="w-8 h-8 bg-green-600 rounded-full flex items-center justify-center text-white font-bold text-sm">W</div>' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-green-300" data-translate="what">What</h5>' +
                                            '<p class="text-gray-300 text-sm" data-translate="what_desc">Tactical task verb</p>' +
                                        '</div>' +
                                    '</div>' +
                                    '<div class="flex items-start space-x-3">' +
                                        '<div class="w-8 h-8 bg-yellow-600 rounded-full flex items-center justify-center text-white font-bold text-sm">W</div>' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-yellow-300" data-translate="when">When</h5>' +
                                            '<p class="text-gray-300 text-sm" data-translate="when_desc">NLT Date-Time Group</p>' +
                                        '</div>' +
                                    '</div>' +
                                    '<div class="flex items-start space-x-3">' +
                                        '<div class="w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm">W</div>' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-purple-300" data-translate="where">Where</h5>' +
                                            '<p class="text-gray-300 text-sm" data-translate="where_desc">Objective or location</p>' +
                                        '</div>' +
                                    '</div>' +
                                    '<div class="flex items-start space-x-3">' +
                                        '<div class="w-8 h-8 bg-red-600 rounded-full flex items-center justify-center text-white font-bold text-sm">W</div>' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-red-300" data-translate="why">Why</h5>' +
                                            '<p class="text-gray-300 text-sm" data-translate="why_desc">Purpose linking to higher intent</p>' +
                                        '</div>' +
                                    '</div>' +
                                '</div>' +
                            '</div>' +
                            '<div class="space-y-4">' +
                                '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                    '<h4 class="text-lg font-semibold text-white mb-3 flex items-center">' +
                                        '<i class="fas fa-format-list-bulleted mr-2 text-green-400"></i><span data-translate="mission_format">Mission Format</span>' +
                                    '</h4>' +
                                    '<div class="bg-gray-700 p-4 rounded-lg border-l-4 border-blue-500">' +
                                        '<p class="text-gray-200 font-mono text-sm" data-translate="mission_template">' +
                                            '[Unit] [Task] [Objective] [NLT DTG] in order to [Purpose]' +
                                        '</p>' +
                                    '</div>' +
                                '</div>' +
                            '</div>' +
                        '</div>' +
                    '</div>' +
                '</div>';
            }

            getExecutionContent() {
                return '<div class="space-y-6">' +
                    '<div class="section-card p-6 rounded-xl">' +
                        '<h3 class="text-2xl font-semibold mb-4 text-white flex items-center">' +
                            '<i class="fas fa-cogs mr-3 text-blue-400"></i><span data-translate="execution">3. Execution</span>' +
                        '</h3>' +
                        '<p class="text-gray-300 mb-6" data-translate="execution_desc">Describe how the unit will accomplish the mission. This is the heart of the OPORD and provides subordinates with the essential information needed for successful execution.</p>' +

                        '<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">' +
                            '<div class="space-y-4">' +
                                '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                    '<h4 class="text-lg font-semibold text-white mb-3 flex items-center">' +
                                        '<i class="fas fa-brain mr-2 text-purple-400"></i><span data-translate="commander_intent">Commander Intent</span>' +
                                    '</h4>' +
                                    '<div class="space-y-3">' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-purple-300" data-translate="purpose">Purpose:</h5>' +
                                            '<p class="text-gray-300 text-sm" data-translate="purpose_desc">Why the operation is being conducted - links to higher purpose</p>' +
                                        '</div>' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-purple-300" data-translate="key_tasks">Key Tasks:</h5>' +
                                            '<p class="text-gray-300 text-sm" data-translate="key_tasks_desc">Essential tasks that must be accomplished</p>' +
                                        '</div>' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-purple-300" data-translate="end_state">End State:</h5>' +
                                            '<p class="text-gray-300 text-sm" data-translate="end_state_desc">Desired conditions when operation concludes</p>' +
                                        '</div>' +
                                    '</div>' +
                                '</div>' +

                                '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                    '<h4 class="text-lg font-semibold text-white mb-3 flex items-center">' +
                                        '<i class="fas fa-route mr-2 text-green-400"></i><span data-translate="concept_operations">Concept of Operations</span>' +
                                    '</h4>' +
                                    '<ul class="list-disc ml-6 space-y-2 text-gray-300 text-sm">' +
                                        '<li><strong data-translate="scheme_maneuver">Scheme of Maneuver:</strong> <span data-translate="scheme_desc">How forces will be arranged and employed</span></li>' +
                                        '<li><strong data-translate="fire_support_concept">Fire Support Concept:</strong> <span data-translate="fire_support_desc">Integration of fires with maneuver</span></li>' +
                                        '<li><strong data-translate="phases_operation">Phases of Operation:</strong> <span data-translate="phases_desc">Logical sequence of activities</span></li>' +
                                        '<li><strong data-translate="main_effort">Main Effort:</strong> <span data-translate="main_effort_desc">Unit or activity that commander prioritizes</span></li>' +
                                        '<li><strong data-translate="reserve">Reserve:</strong> <span data-translate="reserve_desc">Forces held back for contingencies</span></li>' +
                                    '</ul>' +
                                '</div>' +
                            '</div>' +

                            '<div class="space-y-4">' +
                                '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                    '<h4 class="text-lg font-semibold text-white mb-3 flex items-center">' +
                                        '<i class="fas fa-tasks mr-2 text-blue-400"></i><span data-translate="tasks_subordinate">Tasks to Subordinate Units</span>' +
                                    '</h4>' +
                                    '<div class="space-y-3">' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-blue-300" data-translate="essential_tasks">Essential Tasks:</h5>' +
                                            '<p class="text-gray-300 text-sm" data-translate="essential_tasks_desc">Specific tasks each subordinate unit must accomplish</p>' +
                                        '</div>' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-blue-300" data-translate="task_organization">Task Organization:</h5>' +
                                            '<p class="text-gray-300 text-sm" data-translate="task_org_desc">How units are organized for the operation</p>' +
                                        '</div>' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-blue-300" data-translate="control_measures_exec">Control Measures:</h5>' +
                                            '<p class="text-gray-300 text-sm" data-translate="control_measures_exec_desc">Boundaries, phase lines, checkpoints, objectives</p>' +
                                        '</div>' +
                                    '</div>' +
                                '</div>' +

                                '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                    '<h4 class="text-lg font-semibold text-white mb-3 flex items-center">' +
                                        '<i class="fas fa-clipboard-list mr-2 text-yellow-400"></i><span data-translate="coordinating_instructions">Coordinating Instructions</span>' +
                                    '</h4>' +
                                    '<ul class="list-disc ml-6 space-y-1 text-gray-300 text-sm">' +
                                        '<li data-translate="time_sequence">Time and sequence of events</li>' +
                                        '<li data-translate="rules_engagement">Rules of engagement (ROE)</li>' +
                                        '<li data-translate="risk_mitigation">Risk mitigation measures</li>' +
                                        '<li data-translate="rehearsal_guidance">Rehearsal guidance</li>' +
                                        '<li data-translate="contingency_plans">Contingency plans</li>' +
                                    '</ul>' +
                                '</div>' +
                            '</div>' +
                        '</div>' +
                    '</div>' +

                    '<details class="section-card p-6 rounded-xl">' +
                        '<summary class="text-lg font-semibold text-blue-300 cursor-pointer hover:text-blue-200">' +
                            '<i class="fas fa-eye mr-2"></i><span data-translate="example_execution">Example: Execution Paragraph</span>' +
                        '</summary>' +
                        '<div class="mt-4 p-4 bg-gray-800 rounded-lg text-sm text-gray-300 space-y-3">' +
                            '<p><strong data-translate="example_exec_header">3. EXECUTION.</strong></p>' +
                            '<p><strong data-translate="example_exec_intent">a. Commander Intent.</strong> <span data-translate="example_exec_intent_text">Purpose: Seize OBJ BRAVO to enable 2nd BCT passage of lines and continuation of division attack. Method: 1-32 IN conducts deliberate attack in two phases - Phase 1: Breach enemy obstacles and seize HILL 405, Phase 2: Exploit success and secure OBJ BRAVO. Main effort shifts from A Co (Phase 1) to B Co (Phase 2). End State: OBJ BRAVO secured, enemy destroyed or withdrawn, 2nd BCT passage lanes established and marked.</span></p>' +
                            '<p><strong data-translate="example_exec_concept">b. Concept of Operations.</strong> <span data-translate="example_exec_concept_text">1-32 IN attacks in zone from AA TIGER to OBJ BRAVO. Phase 1 (H-Hour to H+4): A Co (Main Effort) breaches MINEFIELD X and seizes HILL 405. B Co supports by fire from BP ALPHA. C Co (Reserve) prepared to exploit or reinforce. Phase 2 (H+4 to H+8): B Co (Main Effort) passes through A Co and seizes OBJ BRAVO. A Co consolidates on HILL 405 and provides overwatch.</span></p>' +
                            '<p><strong data-translate="example_exec_tasks">c. Tasks to Subordinate Units.</strong> <span data-translate="example_exec_tasks_text">A Co: Breach MINEFIELD X NLT H+2, seize and secure HILL 405 NLT H+4, be prepared to support B Co advance. B Co: Support A Co by fire from BP ALPHA until H+4, pass through A Co and seize OBJ BRAVO NLT H+8. C Co: Reserve, be prepared to reinforce A Co or exploit B Co success, maintain 30-minute readiness.</span></p>' +
                        '</div>' +
                    '</details>' +
                '</div>';
            }

            getSustainmentContent() {
                return '<div class="space-y-6">' +
                    '<div class="section-card p-6 rounded-xl">' +
                        '<h3 class="text-2xl font-semibold mb-4 text-white flex items-center">' +
                            '<i class="fas fa-truck mr-3 text-blue-400"></i><span data-translate="sustainment">4. Sustainment</span>' +
                        '</h3>' +
                        '<p class="text-gray-300 mb-6" data-translate="sustainment_desc">Address logistics, personnel services, and health service support required for the operation.</p>' +

                        '<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">' +
                            '<div class="space-y-4">' +
                                '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                    '<h4 class="text-lg font-semibold text-white mb-3 flex items-center">' +
                                        '<i class="fas fa-boxes mr-2 text-green-400"></i><span data-translate="logistics">Logistics</span>' +
                                    '</h4>' +
                                    '<div class="space-y-3">' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-green-300" data-translate="supply">Supply:</h5>' +
                                            '<p class="text-gray-300 text-xs" data-translate="supply_desc">Classes of supply and distribution methods</p>' +
                                        '</div>' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-green-300" data-translate="maintenance">Maintenance:</h5>' +
                                            '<p class="text-gray-300 text-xs" data-translate="maintenance_desc">Equipment maintenance and recovery procedures</p>' +
                                        '</div>' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-green-300" data-translate="transportation">Transportation:</h5>' +
                                            '<p class="text-gray-300 text-xs" data-translate="transport_desc">Movement of personnel, equipment, and supplies</p>' +
                                        '</div>' +
                                    '</div>' +
                                '</div>' +
                            '</div>' +

                            '<div class="space-y-4">' +
                                '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                    '<h4 class="text-lg font-semibold text-white mb-3 flex items-center">' +
                                        '<i class="fas fa-users mr-2 text-blue-400"></i><span data-translate="personnel_services">Personnel Services</span>' +
                                    '</h4>' +
                                    '<div class="space-y-3">' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-blue-300" data-translate="human_resources">Human Resources:</h5>' +
                                            '<ul class="list-disc ml-4 text-gray-300 text-xs space-y-1">' +
                                                '<li data-translate="casualty_reporting">Casualty reporting</li>' +
                                                '<li data-translate="replacement_ops">Replacement operations</li>' +
                                                '<li data-translate="personnel_accountability">Personnel accountability</li>' +
                                            '</ul>' +
                                        '</div>' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-blue-300" data-translate="financial_mgmt">Financial Management:</h5>' +
                                            '<ul class="list-disc ml-4 text-gray-300 text-xs space-y-1">' +
                                                '<li data-translate="pay_operations">Pay operations</li>' +
                                                '<li data-translate="contracting_support">Contracting support</li>' +
                                                '<li data-translate="resource_management">Resource management</li>' +
                                            '</ul>' +
                                        '</div>' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-blue-300" data-translate="legal_religious">Legal/Religious:</h5>' +
                                            '<ul class="list-disc ml-4 text-gray-300 text-xs space-y-1">' +
                                                '<li data-translate="legal_support">Legal support</li>' +
                                                '<li data-translate="religious_services">Religious services</li>' +
                                                '<li data-translate="morale_support">Morale support</li>' +
                                            '</ul>' +
                                        '</div>' +
                                    '</div>' +
                                '</div>' +
                            '</div>' +

                            '<div class="space-y-4">' +
                                '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                    '<h4 class="text-lg font-semibold text-white mb-3 flex items-center">' +
                                        '<i class="fas fa-heartbeat mr-2 text-red-400"></i><span data-translate="health_service">Health Service Support</span>' +
                                    '</h4>' +
                                    '<div class="space-y-3">' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-red-300" data-translate="medical_treatment">Medical Treatment:</h5>' +
                                            '<ul class="list-disc ml-4 text-gray-300 text-xs space-y-1">' +
                                                '<li data-translate="role_1_unit">Role 1 (Unit level)</li>' +
                                                '<li data-translate="role_2_forward">Role 2 (Forward support)</li>' +
                                                '<li data-translate="triage_procedures">Triage procedures</li>' +
                                            '</ul>' +
                                        '</div>' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-red-300" data-translate="medical_evacuation">Medical Evacuation:</h5>' +
                                            '<ul class="list-disc ml-4 text-gray-300 text-xs space-y-1">' +
                                                '<li data-translate="medevac_procedures">MEDEVAC procedures</li>' +
                                                '<li data-translate="casualty_collection">Casualty collection</li>' +
                                                '<li data-translate="evacuation_routes">Evacuation routes</li>' +
                                            '</ul>' +
                                        '</div>' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-red-300" data-translate="preventive_medicine">Preventive Medicine:</h5>' +
                                            '<ul class="list-disc ml-4 text-gray-300 text-xs space-y-1">' +
                                                '<li data-translate="disease_prevention">Disease prevention</li>' +
                                                '<li data-translate="environmental_health">Environmental health</li>' +
                                                '<li data-translate="combat_stress_control">Combat stress control</li>' +
                                            '</ul>' +
                                        '</div>' +
                                    '</div>' +
                                '</div>' +
                            '</div>' +
                        '</div>' +

                        '<div class="mt-6 p-4 bg-gray-700 rounded-lg border border-gray-600">' +
                            '<h4 class="text-lg font-semibold text-white mb-3 flex items-center">' +
                                '<i class="fas fa-exclamation-triangle mr-2 text-yellow-400"></i><span data-translate="lsco_sustainment">LSCO Sustainment Considerations</span>' +
                            '</h4>' +
                            '<div class="grid grid-cols-1 md:grid-cols-2 gap-4">' +
                                '<div>' +
                                    '<h5 class="font-semibold text-yellow-300 mb-2" data-translate="high_consumption">High Consumption Items:</h5>' +
                                    '<ul class="list-disc ml-4 text-gray-300 text-sm space-y-1">' +
                                        '<li data-translate="ammo_precision">Ammunition (especially precision munitions)</li>' +
                                        '<li data-translate="fuel_extended">Fuel for extended operations</li>' +
                                        '<li data-translate="medical_mass_cas">Medical supplies for mass casualties</li>' +
                                        '<li data-translate="repair_parts">Repair parts for equipment degradation</li>' +
                                    '</ul>' +
                                '</div>' +
                                '<div>' +
                                    '<h5 class="font-semibold text-yellow-300 mb-2" data-translate="sustainment_challenges">Sustainment Challenges:</h5>' +
                                    '<ul class="list-disc ml-4 text-gray-300 text-sm space-y-1">' +
                                        '<li data-translate="extended_supply">Extended supply lines under threat</li>' +
                                        '<li data-translate="contested_logistics">Contested logistics operations</li>' +
                                        '<li data-translate="increased_maintenance">Increased maintenance requirements</li>' +
                                        '<li data-translate="mass_casualty_scenarios">Mass casualty scenarios</li>' +
                                    '</ul>' +
                                '</div>' +
                            '</div>' +
                        '</div>' +
                    '</div>' +

                    '<details class="section-card p-6 rounded-xl">' +
                        '<summary class="text-lg font-semibold text-blue-300 cursor-pointer hover:text-blue-200">' +
                            '<i class="fas fa-eye mr-2"></i><span data-translate="example_sustainment">Example: Sustainment Paragraph</span>' +
                        '</summary>' +
                        '<div class="mt-4 p-4 bg-gray-800 rounded-lg text-sm text-gray-300 space-y-3">' +
                            '<p><strong data-translate="example_sust_header">4. SUSTAINMENT.</strong></p>' +
                            '<p><strong data-translate="example_sust_logistics">a. Logistics.</strong> <span data-translate="example_sust_logistics_text">Supply: Class I and III resupply conducted daily at 1800Z at LOGPAC site vic grid AB345678. Class V resupply on order, emergency resupply available within 2 hours. Maintenance: A/3-7 FSB provides DS maintenance support. Unit maintenance teams co-located with maneuver companies. Recovery assets positioned at TAA CHARLIE. Transportation: MSR GOLD designated primary supply route, MSR SILVER alternate. Distribution points established at grid AB234567.</span></p>' +
                            '<p><strong data-translate="example_sust_personnel">b. Personnel.</strong> <span data-translate="example_sust_personnel_text">Human Resources: Casualty reporting IAW unit SOP, replacement personnel integrated at company level. S-1 maintains personnel accountability. Financial Management: Emergency pay available through S-1. Legal Support: 1st BCT SJA provides legal support as required. Religious Support: Chaplain available for religious services and counseling.</span></p>' +
                            '<p><strong data-translate="example_sust_medical">c. Health Service Support.</strong> <span data-translate="example_sust_medical_text">Medical Treatment: Company medics provide Role 1 care. B/3-7 FSB provides Role 2 care at BAS vic grid AB456789. Medical Evacuation: Ground MEDEVAC through 3-7 FSB, air MEDEVAC available with 15-minute response time. Preventive Medicine: Water testing conducted daily, combat stress control team available on request.</span></p>' +
                        '</div>' +
                    '</details>' +
                '</div>';
            }

            getCommandContent() {
                return '<div class="space-y-6">' +
                    '<div class="section-card p-6 rounded-xl">' +
                        '<h3 class="text-2xl font-semibold mb-4 text-white flex items-center">' +
                            '<i class="fas fa-headset mr-3 text-blue-400"></i><span data-translate="command_signal">5. Command and Signal</span>' +
                        '</h3>' +
                        '<p class="text-gray-300 mb-6" data-translate="command_signal_desc">Establish command relationships and communication procedures for the operation.</p>' +

                        '<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">' +
                            '<div class="space-y-4">' +
                                '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                    '<h4 class="text-lg font-semibold text-white mb-3 flex items-center">' +
                                        '<i class="fas fa-sitemap mr-2 text-purple-400"></i><span data-translate="command">Command</span>' +
                                    '</h4>' +
                                    '<div class="space-y-3">' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-purple-300" data-translate="command_relationships">Command Relationships:</h5>' +
                                            '<p class="text-gray-300 text-sm" data-translate="command_rel_desc">Chain of command and succession</p>' +
                                        '</div>' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-purple-300" data-translate="control_measures">Control Measures:</h5>' +
                                            '<p class="text-gray-300 text-sm" data-translate="control_desc">Boundaries, checkpoints, and coordination measures</p>' +
                                        '</div>' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-purple-300" data-translate="reports">Reports:</h5>' +
                                            '<p class="text-gray-300 text-sm" data-translate="reports_desc">Required reports and reporting procedures</p>' +
                                        '</div>' +
                                    '</div>' +
                                '</div>' +
                            '</div>' +

                            '<div class="space-y-4">' +
                                '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                    '<h4 class="text-lg font-semibold text-white mb-3 flex items-center">' +
                                        '<i class="fas fa-radio mr-2 text-green-400"></i><span data-translate="signal">Signal</span>' +
                                    '</h4>' +
                                    '<div class="space-y-3">' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-green-300" data-translate="communication_systems">Communication Systems:</h5>' +
                                            '<ul class="list-disc ml-4 text-gray-300 text-sm space-y-1">' +
                                                '<li data-translate="primary_alternate_freq">Primary and alternate frequencies</li>' +
                                                '<li data-translate="call_signs_auth">Call signs and authentication</li>' +
                                                '<li data-translate="communication_windows">Communication windows</li>' +
                                            '</ul>' +
                                        '</div>' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-green-300" data-translate="network_operations">Network Operations:</h5>' +
                                            '<ul class="list-disc ml-4 text-gray-300 text-sm space-y-1">' +
                                                '<li data-translate="digital_comm_systems">Digital communication systems</li>' +
                                                '<li data-translate="network_security_protocols">Network security protocols</li>' +
                                                '<li data-translate="cyber_defense_measures">Cyber defense measures</li>' +
                                            '</ul>' +
                                        '</div>' +
                                        '<div>' +
                                            '<h5 class="font-semibold text-green-300" data-translate="signal_operating">Signal Operating Instructions:</h5>' +
                                            '<ul class="list-disc ml-4 text-gray-300 text-sm space-y-1">' +
                                                '<li data-translate="communication_procedures">Communication procedures</li>' +
                                                '<li data-translate="emergency_procedures">Emergency procedures</li>' +
                                                '<li data-translate="comsec_requirements">COMSEC requirements</li>' +
                                            '</ul>' +
                                        '</div>' +
                                    '</div>' +
                                '</div>' +
                            '</div>' +
                        '</div>' +

                        '<div class="mt-6 grid grid-cols-1 lg:grid-cols-2 gap-6">' +
                            '<div class="bg-gray-700 p-4 rounded-lg border border-gray-600">' +
                                '<h4 class="text-lg font-semibold text-white mb-3 flex items-center">' +
                                    '<i class="fas fa-shield-alt mr-2 text-blue-400"></i><span data-translate="lsco_c2">LSCO C2 Considerations</span>' +
                                '</h4>' +
                                '<ul class="list-disc ml-4 text-gray-300 text-sm space-y-1">' +
                                    '<li data-translate="redundant_comm_systems">Redundant communication systems</li>' +
                                    '<li data-translate="ew_countermeasures">Electronic warfare countermeasures</li>' +
                                    '<li data-translate="distributed_command_posts">Distributed command posts</li>' +
                                    '<li data-translate="mission_command_philosophy">Mission command philosophy</li>' +
                                    '<li data-translate="rapid_decision_making">Rapid decision-making processes</li>' +
                                '</ul>' +
                            '</div>' +
                            '<div class="bg-gray-700 p-4 rounded-lg border border-gray-600">' +
                                '<h4 class="text-lg font-semibold text-white mb-3 flex items-center">' +
                                    '<i class="fas fa-exclamation-triangle mr-2 text-yellow-400"></i><span data-translate="communication_challenges">Communication Challenges</span>' +
                                '</h4>' +
                                '<ul class="list-disc ml-4 text-gray-300 text-sm space-y-1">' +
                                    '<li data-translate="enemy_electronic_warfare">Enemy electronic warfare</li>' +
                                    '<li data-translate="degraded_comm_environments">Degraded communication environments</li>' +
                                    '<li data-translate="extended_comm_ranges">Extended communication ranges</li>' +
                                    '<li data-translate="interoperability_requirements">Interoperability requirements</li>' +
                                    '<li data-translate="cyber_threats_networks">Cyber threats to networks</li>' +
                                '</ul>' +
                            '</div>' +
                        '</div>' +
                    '</div>' +

                    '<details class="section-card p-6 rounded-xl">' +
                        '<summary class="text-lg font-semibold text-blue-300 cursor-pointer hover:text-blue-200">' +
                            '<i class="fas fa-eye mr-2"></i><span data-translate="example_command">Example: Command and Signal Paragraph</span>' +
                        '</summary>' +
                        '<div class="mt-4 p-4 bg-gray-800 rounded-lg text-sm text-gray-300 space-y-3">' +
                            '<p><strong data-translate="example_cmd_header">5. COMMAND AND SIGNAL.</strong></p>' +
                            '<p><strong data-translate="example_cmd_command">a. Command.</strong> <span data-translate="example_cmd_command_text">Commander located with A Co during Phase 1, displaces to OBJ BRAVO during Phase 2. Succession of command: XO, S-3, A Co CDR. Main CP located vic grid AB567890, TAC CP displaces with main effort. Command relationships: A Co and B Co OPCON to 1-32 IN, C Co (3-7 CAV) TACON for reconnaissance missions. Decision points: DP 1 (H+2) - commit reserve if A Co cannot breach obstacles, DP 2 (H+6) - exploit success or consolidate positions.</span></p>' +
                            '<p><strong data-translate="example_cmd_signal">b. Signal.</strong> <span data-translate="example_cmd_signal_text">Primary frequencies: Command Net 54.000 MHz, Admin/Log Net 57.000 MHz, Fire Support Net 60.000 MHz. Alternate frequencies: Command Net 45.000 MHz. Call signs: STEEL 6 (CDR), STEEL 7 (XO), STEEL 3 (S-3), STEEL 1-6 (A Co CDR). Authentication: Challenge and password per current SOI. Communication windows: Hourly SITREP at 30 minutes past each hour. Emergency procedures: Any station may break radio silence for MEDEVAC or immediate threat.</span></p>' +
                        '</div>' +
                    '</details>' +
                '</div>';
            }

            getAnnexesContent() {
                return '<div class="space-y-6">' +
                    '<div class="section-card p-6 rounded-xl">' +
                        '<h3 class="text-2xl font-semibold text-white flex items-center mb-6">' +
                            '<i class="fas fa-folder-open mr-3 text-blue-400"></i><span data-translate="manage_annexes">Manage Annexes</span>' +
                        '</h3>' +
                        '<p class="text-gray-300 mb-6" data-translate="annexes_intro">Learn about FM 6-0 annexes and their proper usage. Each annex provides specialized information to support the main OPORD. Use the "Draft Your OPORD" section to actually create your annexes.</p>' +

                        '<div class="bg-blue-900 bg-opacity-30 border border-blue-500 rounded-lg p-4 mb-6">' +
                            '<div class="flex items-center mb-2">' +
                                '<i class="fas fa-info-circle text-blue-400 mr-2"></i>' +
                                '<h4 class="text-white font-semibold" data-translate="fm60_structure">FM 6-0 Annex Structure</h4>' +
                            '</div>' +
                            '<p class="text-blue-200 text-sm" data-translate="fm60_structure_desc">The following annexes follow current FM 6-0 doctrine. Not all annexes are required for every operation - include only those relevant to your mission.</p>' +
                        '</div>' +

                        '<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">' +
                            '<div class="space-y-4">' +
                                '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                    '<h4 class="text-lg font-semibold text-white mb-4 flex items-center">' +
                                        '<i class="fas fa-sitemap mr-2 text-blue-400"></i><span data-translate="annex_a">Annex A: Task Organization</span>' +
                                    '</h4>' +
                                    '<p class="text-gray-300 text-sm mb-3" data-translate="annex_a_desc">Detailed unit structure, attachments, and task assignments for the operation.</p>' +
                                    '<div class="bg-gray-700 p-3 rounded text-sm text-gray-300">' +
                                        '<strong data-translate="purpose">Purpose:</strong> <span data-translate="annex_a_purpose">Details the allocation of forces and command relationships for the operation.</span><br>' +
                                        '<strong data-translate="includes">Includes:</strong> <span data-translate="annex_a_includes">Unit task organization, attachments, detachments, and command relationships (OPCON, TACON, DS, etc.)</span>' +
                                    '</div>' +
                                    '<details class="mt-3 text-sm">' +
                                        '<summary class="text-blue-300 cursor-pointer" data-translate="example_content">Example Content</summary>' +
                                        '<div class="mt-2 text-gray-400">' +
                                            '<p><strong data-translate="task_organization_plan">1. Task Organization:</strong></p>' +
                                            '<p data-translate="main_effort_example">a. Main Effort: A Co, 1-32 IN</p>' +
                                            '<p data-translate="supporting_effort_example">b. Supporting Effort: B Co, 1-32 IN</p>' +
                                            '<p data-translate="reserve_example">c. Reserve: C Co, 1-32 IN</p>' +
                                            '<p data-translate="attachments_example">d. Attachments: 1st PLT, A Co, 3-7 CAV (OPCON)</p>' +
                                        '</div>' +
                                    '</details>' +
                                '</div>' +

                                '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                    '<h4 class="text-lg font-semibold text-white mb-4 flex items-center">' +
                                        '<i class="fas fa-search mr-2 text-purple-400"></i><span data-translate="annex_b">Annex B: Intelligence</span>' +
                                    '</h4>' +
                                    '<p class="text-gray-300 text-sm mb-3" data-translate="annex_b_desc">Intelligence preparation of the battlefield, enemy analysis, and collection requirements.</p>' +
                                    '<div class="bg-gray-700 p-3 rounded text-sm text-gray-300">' +
                                        '<strong data-translate="purpose">Purpose:</strong> <span data-translate="annex_b_purpose">Provides detailed enemy analysis and intelligence collection plan.</span><br>' +
                                        '<strong data-translate="includes">Includes:</strong> <span data-translate="annex_b_includes">PIR, collection assets, enemy SITTEMP, intelligence products, and dissemination procedures</span>' +
                                    '</div>' +
                                    '<details class="mt-3 text-sm">' +
                                        '<summary class="text-blue-300 cursor-pointer" data-translate="key_components">Key Components</summary>' +
                                        '<div class="mt-2 text-gray-400">' +
                                            '<p><strong data-translate="pir_requirements">• Priority Intelligence Requirements (PIR)</strong></p>' +
                                            '<p><strong data-translate="collection_plan_assets">• Collection Plan and Assets</strong></p>' +
                                            '<p><strong data-translate="enemy_sittemp">• Enemy Situation Template (SITTEMP)</strong></p>' +
                                            '<p><strong data-translate="intel_products_dissem">• Intelligence Products and Dissemination</strong></p>' +
                                        '</div>' +
                                    '</details>' +
                                '</div>' +

                                '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                    '<h4 class="text-lg font-semibold text-white mb-4 flex items-center">' +
                                        '<i class="fas fa-map mr-2 text-green-400"></i><span data-translate="annex_c">Annex C: Operations</span>' +
                                    '</h4>' +
                                    '<p class="text-gray-300 text-sm mb-3" data-translate="annex_c_desc">Detailed tactical plan with graphics, overlays, and operational procedures.</p>' +
                                    '<div class="bg-gray-700 p-3 rounded text-sm text-gray-300">' +
                                        '<strong data-translate="purpose">Purpose:</strong> <span data-translate="annex_c_purpose">Contains the operations overlay and detailed scheme of maneuver.</span><br>' +
                                        '<strong data-translate="includes">Includes:</strong> <span data-translate="annex_c_includes">Graphic depiction of the plan, control measures, phase lines, objectives, and boundaries</span>' +
                                    '</div>' +
                                    '<details class="mt-3 text-sm">' +
                                        '<summary class="text-blue-300 cursor-pointer" data-translate="key_components">Key Components</summary>' +
                                        '<div class="mt-2 text-gray-400">' +
                                            '<p><strong data-translate="operations_overlay">• Operations Overlay (Graphic)</strong></p>' +
                                            '<p><strong data-translate="scheme_maneuver_details">• Scheme of Maneuver Details</strong></p>' +
                                            '<p><strong data-translate="control_measures_boundaries">• Control Measures and Boundaries</strong></p>' +
                                            '<p><strong data-translate="phase_lines_objectives">• Phase Lines and Objectives</strong></p>' +
                                        '</div>' +
                                    '</details>' +
                                '</div>' +

                                '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                    '<h4 class="text-lg font-semibold text-white mb-4 flex items-center">' +
                                        '<i class="fas fa-crosshairs mr-2 text-red-400"></i><span data-translate="annex_d">Annex D: Fires</span>' +
                                    '</h4>' +
                                    '<p class="text-gray-300 text-sm mb-3" data-translate="annex_d_desc">Fire support plan, target lists, FSCMs, artillery tasks, and air support.</p>' +
                                    '<div class="bg-gray-700 p-3 rounded text-sm text-gray-300">' +
                                        '<strong data-translate="purpose">Purpose:</strong> <span data-translate="annex_d_purpose">Provides detailed fire support coordination and planning for the operation.</span><br>' +
                                        '<strong data-translate="includes">Includes:</strong> <span data-translate="annex_d_includes">Fire support coordination measures, target lists, artillery tasks, air support requests, and fire support execution matrix</span>' +
                                    '</div>' +
                                    '<details class="mt-3 text-sm">' +
                                        '<summary class="text-blue-300 cursor-pointer" data-translate="example_content">Example Content</summary>' +
                                        '<div class="mt-2 text-gray-400">' +
                                            '<p><strong data-translate="fire_support_coordination">1. Fire Support Coordination:</strong></p>' +
                                            '<p data-translate="supporting_units_example">a. Supporting Units: 1-77 FA (DS), 2-8 FA (GSR)</p>' +
                                            '<p data-translate="priority_fires_example">b. Priority of Fires: A Co (Main Effort)</p>' +
                                            '<p data-translate="fscl_example">c. Fire Support Coordination Line (FSCL): PL BLUE</p>' +
                                            '<p data-translate="nfa_example">d. No Fire Areas (NFA): Village KILO (AB234678)</p>' +
                                            '<p data-translate="target_list_example">e. Target List: TGT AA1001 (Enemy CP), TGT AA1002 (Mortar Position)</p>' +
                                        '</div>' +
                                    '</details>' +
                                '</div>' +
                            '</div>' +

                            '<div class="space-y-4">' +


                                '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                    '<h4 class="text-lg font-semibold text-white mb-4 flex items-center">' +
                                        '<i class="fas fa-shield-alt mr-2 text-blue-400"></i><span data-translate="annex_e">Annex E: Protection</span>' +
                                    '</h4>' +
                                    '<p class="text-gray-300 text-sm mb-3" data-translate="annex_e_desc">Air defense, survivability, OPSEC, personnel recovery, and ROE.</p>' +
                                    '<div class="bg-gray-700 p-3 rounded text-sm text-gray-300">' +
                                        '<strong data-translate="purpose">Purpose:</strong> <span data-translate="annex_e_purpose">Details protection measures to preserve combat power and ensure mission success.</span><br>' +
                                        '<strong data-translate="includes">Includes:</strong> <span data-translate="annex_e_includes">Air defense plan, survivability measures, OPSEC procedures, personnel recovery, ROE, and force protection measures</span>' +
                                    '</div>' +
                                    '<details class="mt-3 text-sm">' +
                                        '<summary class="text-blue-300 cursor-pointer" data-translate="example_content">Example Content</summary>' +
                                        '<div class="mt-2 text-gray-400">' +
                                            '<p><strong data-translate="protection_measures">1. Protection Measures:</strong></p>' +
                                            '<p data-translate="air_defense_example">a. Air Defense: Weapon Control Status WEAPONS TIGHT</p>' +
                                            '<p data-translate="opsec_example">b. OPSEC: Emission control, camouflage discipline</p>' +
                                            '<p data-translate="personnel_recovery_example">c. Personnel Recovery: CSAR procedures, isolated personnel</p>' +
                                            '<p data-translate="roe_example">d. ROE: Rules of Engagement per current directive</p>' +
                                            '<p data-translate="survivability_example_detailed">e. Survivability: Fighting positions, overhead cover</p>' +
                                        '</div>' +
                                    '</details>' +
                                '</div>' +

                                '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                    '<h4 class="text-lg font-semibold text-white mb-4 flex items-center">' +
                                        '<i class="fas fa-truck mr-2 text-green-400"></i><span data-translate="annex_f">Annex F: Sustainment</span>' +
                                    '</h4>' +
                                    '<p class="text-gray-300 text-sm mb-3" data-translate="annex_f_desc">Comprehensive logistics, personnel, and health service support plans.</p>' +
                                    '<div class="bg-gray-700 p-3 rounded text-sm text-gray-300">' +
                                        '<strong data-translate="purpose">Purpose:</strong> <span data-translate="annex_f_purpose">Provides detailed sustainment planning to maintain combat effectiveness throughout the operation.</span><br>' +
                                        '<strong data-translate="includes">Includes:</strong> <span data-translate="annex_f_includes">Logistics (classes of supply), personnel services, health service support, maintenance, and distribution plans</span>' +
                                    '</div>' +
                                    '<details class="mt-3 text-sm">' +
                                        '<summary class="text-blue-300 cursor-pointer" data-translate="example_content">Example Content</summary>' +
                                        '<div class="mt-2 text-gray-400">' +
                                            '<p><strong data-translate="sustainment_plan">1. Sustainment Plan:</strong></p>' +
                                            '<p data-translate="class_resupply_example">a. Class I/III resupply: Daily at 1800Z at LOG PAD</p>' +
                                            '<p data-translate="class_v_example">b. Class V: On order, 2-hour emergency resupply</p>' +
                                            '<p data-translate="maintenance_example">c. Maintenance: DS support from FSB, collection points</p>' +
                                            '<p data-translate="medical_example">d. Medical: Role 1/2 care, MEDEVAC procedures, CCP locations</p>' +
                                            '<p data-translate="personnel_example">e. Personnel: Replacement operations, casualty reporting</p>' +
                                        '</div>' +
                                    '</details>' +
                                '</div>' +

                                '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                    '<h4 class="text-lg font-semibold text-white mb-4 flex items-center">' +
                                        '<i class="fas fa-wrench mr-2 text-orange-400"></i><span data-translate="annex_g">Annex G: Engineer</span>' +
                                    '</h4>' +
                                    '<p class="text-gray-300 text-sm mb-3" data-translate="annex_g_desc">Engineer tasks for mobility, countermobility, and survivability.</p>' +
                                    '<div class="bg-gray-700 p-3 rounded text-sm text-gray-300">' +
                                        '<strong data-translate="purpose">Purpose:</strong> <span data-translate="annex_g_purpose">Details engineer support to enhance mobility, deny enemy mobility, and improve survivability.</span><br>' +
                                        '<strong data-translate="includes">Includes:</strong> <span data-translate="annex_g_includes">Mobility operations, countermobility measures, survivability construction, general engineering, and geospatial support</span>' +
                                    '</div>' +
                                    '<details class="mt-3 text-sm">' +
                                        '<summary class="text-blue-300 cursor-pointer" data-translate="example_content">Example Content</summary>' +
                                        '<div class="mt-2 text-gray-400">' +
                                            '<p><strong data-translate="engineer_tasks">1. Engineer Tasks:</strong></p>' +
                                            '<p data-translate="mobility_example">a. Mobility: Clear MINEFIELD X by H+2, breach operations</p>' +
                                            '<p data-translate="countermobility_example">b. Countermobility: Emplace obstacles on PL SILVER, deny routes</p>' +
                                            '<p data-translate="survivability_example">c. Survivability: Construct fighting positions, protective positions</p>' +
                                            '<p data-translate="supporting_unit_example">d. Supporting Unit: A Co, 3-7 EN (DS to TF)</p>' +
                                            '<p data-translate="general_engineering_example">e. General Engineering: Route maintenance, utilities</p>' +
                                        '</div>' +
                                    '</details>' +
                                '</div>' +

                                '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                    '<h4 class="text-lg font-semibold text-white mb-4 flex items-center">' +
                                        '<i class="fas fa-radio mr-2 text-yellow-400"></i><span data-translate="annex_h">Annex H: Signal</span>' +
                                    '</h4>' +
                                    '<p class="text-gray-300 text-sm mb-3" data-translate="annex_h_desc">Detailed communications plan, frequencies, call signs, and PACE plans.</p>' +
                                    '<div class="bg-gray-700 p-3 rounded text-sm text-gray-300">' +
                                        '<strong data-translate="purpose">Purpose:</strong> <span data-translate="annex_h_purpose">Provides comprehensive communications and information systems support for command and control.</span><br>' +
                                        '<strong data-translate="includes">Includes:</strong> <span data-translate="annex_h_includes">PACE plans, frequency assignments, call signs, EMCON procedures, and network operations</span>' +
                                    '</div>' +
                                    '<details class="mt-3 text-sm">' +
                                        '<summary class="text-blue-300 cursor-pointer" data-translate="example_content">Example Content</summary>' +
                                        '<div class="mt-2 text-gray-400">' +
                                            '<p><strong data-translate="signal_plan">1. Signal Plan:</strong></p>' +
                                            '<p data-translate="pace_plan_example">a. PACE Plan: Primary (FM), Alternate (SATCOM), Contingency (HF), Emergency (Visual)</p>' +
                                            '<p data-translate="frequencies_example">b. Frequencies: Command Net 54.000 MHz, Admin/Log 46.000 MHz</p>' +
                                            '<p data-translate="call_signs_example">c. Call Signs: STEEL 6 (CDR), STEEL 7 (XO), STEEL 3 (S3)</p>' +
                                            '<p data-translate="emcon_example">d. EMCON: Level III until H-Hour, then Level II</p>' +
                                            '<p data-translate="network_ops_example">e. Network Operations: SIPR/NIPR connectivity, cyber defense</p>' +
                                        '</div>' +
                                    '</details>' +
                                '</div>' +
                            '</div>' +
                        '</div>' +

                        '<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6">' +
                            '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                '<h4 class="text-lg font-semibold text-white mb-4 flex items-center">' +
                                    '<i class="fas fa-wifi mr-2 text-purple-400"></i><span data-translate="annex_k">Annex K: CEMA</span>' +
                                '</h4>' +
                                '<p class="text-gray-300 text-sm mb-3" data-translate="annex_k_desc">Cyber/Electronic Warfare and Electromagnetic Activities operations plan.</p>' +
                                '<div class="bg-gray-700 p-3 rounded text-sm text-gray-300">' +
                                    '<strong data-translate="purpose">Purpose:</strong> <span data-translate="annex_k_purpose">Details cyber operations, electronic warfare, and electromagnetic spectrum management for the operation.</span><br>' +
                                    '<strong data-translate="includes">Includes:</strong> <span data-translate="annex_k_includes">Cyber operations plan, EW targets, spectrum management, EMCON procedures, and defensive cyber measures</span>' +
                                '</div>' +
                                '<details class="mt-3 text-sm">' +
                                    '<summary class="text-blue-300 cursor-pointer" data-translate="example_content">Example Content</summary>' +
                                    '<div class="mt-2 text-gray-400">' +
                                        '<p><strong data-translate="cema_operations">1. CEMA Operations:</strong></p>' +
                                        '<p data-translate="cyber_ops_example">a. Cyber Operations: Network defense, offensive cyber</p>' +
                                        '<p data-translate="electronic_warfare_example">b. Electronic Warfare: Jamming, SIGINT, COMINT</p>' +
                                        '<p data-translate="spectrum_mgmt_example">c. Spectrum Management: Frequency deconfliction</p>' +
                                        '<p data-translate="emcon_example_detailed">d. EMCON: Emission control procedures</p>' +
                                        '<p data-translate="defensive_measures_example">e. Defensive Measures: Network security, OPSEC</p>' +
                                    '</div>' +
                                '</details>' +
                            '</div>' +

                            '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                '<h4 class="text-lg font-semibold text-white mb-4 flex items-center">' +
                                    '<i class="fas fa-search-plus mr-2 text-cyan-400"></i><span data-translate="annex_l">Annex L: Information Collection</span>' +
                                '</h4>' +
                                '<p class="text-gray-300 text-sm mb-3" data-translate="annex_l_desc">Information collection plan linking PIRs to collection assets and tasks.</p>' +
                                '<div class="bg-gray-700 p-3 rounded text-sm text-gray-300">' +
                                    '<strong data-translate="purpose">Purpose:</strong> <span data-translate="annex_l_purpose">Details the information collection plan to support decision-making and situational awareness.</span><br>' +
                                    '<strong data-translate="includes">Includes:</strong> <span data-translate="annex_l_includes">Priority Intelligence Requirements (PIR), collection assets, information flow procedures, and reporting timelines</span>' +
                                '</div>' +
                                '<details class="mt-3 text-sm">' +
                                    '<summary class="text-blue-300 cursor-pointer" data-translate="example_content">Example Content</summary>' +
                                    '<div class="mt-2 text-gray-400">' +
                                        '<p><strong data-translate="info_collection_plan">1. Information Collection Plan:</strong></p>' +
                                        '<p data-translate="pir_1_example">a. PIR 1: Enemy reserve locations and movement</p>' +
                                        '<p data-translate="pir_2_example">b. PIR 2: Civilian evacuation status in AO</p>' +
                                        '<p data-translate="collection_assets_example">c. Collection Assets: UAV, HUMINT, SIGINT</p>' +
                                        '<p data-translate="reporting_example">d. Reporting: SALUTE reports every 2 hours</p>' +
                                        '<p data-translate="info_flow_example">e. Information Flow: Collectors → S2 → CDR</p>' +
                                    '</div>' +
                                '</details>' +
                            '</div>' +
                        '</div>' +

                        '<div class="mt-6">' +
                            '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600">' +
                                '<h4 class="text-lg font-semibold text-white mb-4 flex items-center">' +
                                    '<i class="fas fa-plus-circle mr-2 text-gray-400"></i><span data-translate="misc_annexes">Miscellaneous Annexes</span>' +
                                '</h4>' +
                                '<p class="text-gray-300 text-sm mb-3" data-translate="misc_desc">Additional annexes as required for mission-specific needs.</p>' +
                                '<div class="bg-gray-700 p-3 rounded text-sm text-gray-300">' +
                                    '<strong data-translate="purpose">Purpose:</strong> <span data-translate="misc_purpose">Provides flexibility for mission-specific annexes not covered by standard A-L structure.</span><br>' +
                                    '<strong>Examples:</strong> <span data-translate="misc_examples">Annex P (Host Nation Support), Annex S (Special Technical Operations), Annex M (Assessment), custom annexes</span>' +
                                '</div>' +
                                '<details class="mt-3 text-sm">' +
                                    '<summary class="text-blue-300 cursor-pointer" data-translate="common_additional_annexes">Common Additional Annexes</summary>' +
                                    '<div class="mt-2 text-gray-400">' +
                                        '<p><strong data-translate="annex_p_desc">• Annex P (Host Nation Support): Local support coordination</strong></p>' +
                                        '<p><strong data-translate="annex_s_desc">• Annex S (Special Technical Operations): Specialized capabilities</strong></p>' +
                                        '<p><strong data-translate="annex_m_desc">• Annex M (Assessment): Mission assessment criteria</strong></p>' +
                                        '<p><strong data-translate="annex_r_desc">• Annex R (Reports): Reporting requirements and procedures</strong></p>' +
                                        '<p><strong data-translate="custom_annexes_desc">• Custom Annexes: Mission-specific requirements</strong></p>' +
                                    '</div>' +
                                '</details>' +
                            '</div>' +
                        '</div>' +

                        '<div class="mt-6 p-4 bg-blue-900 bg-opacity-30 border border-blue-500 rounded-lg">' +
                            '<div class="flex items-center mb-2">' +
                                '<i class="fas fa-lightbulb text-blue-400 mr-2"></i>' +
                                '<h4 class="text-white font-semibold" data-translate="how_to_use">How to Use These Annexes</h4>' +
                            '</div>' +
                            '<p class="text-blue-200 text-sm" data-translate="how_to_use_desc">These descriptions and examples are for reference and learning. To actually create your annexes, use the <strong>"Draft Your OPORD"</strong> section where you can input your specific annex content and generate complete OPORD documents.</p>' +
                        '</div>' +
                    '</div>' +
                '</div>';
            }

            getExampleContent() {
                return '<div class="space-y-6">' +
                    '<div class="section-card p-6 rounded-xl">' +
                        '<h3 class="text-2xl font-semibold mb-6 text-white flex items-center">' +
                            '<i class="fas fa-book mr-3 text-blue-400"></i><span data-translate="complete_example_opord">Complete Example OPORD</span>' +
                        '</h3>' +
                        '<div class="bg-gray-800 p-6 rounded-lg border border-gray-600">' +
                            '<div class="text-center mb-6">' +
                                '<div class="text-lg font-bold text-red-400 mb-2" data-translate="classification">[CLASSIFICATION]</div>' +
                                '<div class="text-xl font-bold text-white mb-2"><span data-translate="operation_order">OPERATION ORDER</span> 20241215120000Z</div>' +
                                '<div class="text-lg font-semibold text-blue-300" data-translate="battalion_ranger">2ND BATTALION, 75TH RANGER REGIMENT</div>' +
                            '</div>' +

                            '<div class="space-y-6 text-gray-300 text-sm">' +
                                '<div>' +
                                    '<h4 class="text-lg font-semibold text-white mb-3" data-translate="situation">1. SITUATION</h4>' +
                                    '<div class="space-y-3 ml-4">' +
                                        '<div>' +
                                            '<p class="font-semibold text-blue-300" data-translate="enemy_forces_header">a. Enemy Forces:</p>' +
                                            '<p class="ml-4" data-translate="enemy_forces_content">Enemy company-sized element (120-150 personnel) occupying defensive positions in OBJECTIVE ALPHA. Enemy forces consist of mechanized infantry with supporting mortars and anti-tank weapons. Enemy has established observation posts on high ground and prepared fighting positions with interlocking fields of fire. Enemy morale assessed as moderate with limited night vision capabilities.</p>' +
                                        '</div>' +
                                        '<div>' +
                                            '<p class="font-semibold text-blue-300" data-translate="friendly_forces_header">b. Friendly Forces:</p>' +
                                            '<p class="ml-4" data-translate="friendly_forces_content">1st Brigade Combat Team conducting supporting attack to the north. 3rd Battalion, 75th Rangers providing overwatch and fire support from the east. Aviation assets include 2x AH-64 Apache helicopters and 1x AC-130 gunship on station. Artillery support from 1-319th AFAR with priority of fires.</p>' +
                                        '</div>' +
                                        '<div>' +
                                            '<p class="font-semibold text-blue-300" data-translate="environment_header">c. Environment:</p>' +
                                            '<p class="ml-4" data-translate="environment_content">Terrain: Rolling hills with scattered vegetation, elevation 200-400m. Weather: Clear skies, temperature 68°F, wind 5-10 mph from northwest. Visibility unlimited during daylight, 2km at night. BMNT: 0630Z, EENT: 1830Z. Moon phase: 25% waning crescent.</p>' +
                                        '</div>' +
                                        '<div>' +
                                            '<p class="font-semibold text-blue-300" data-translate="attachments_header">d. Attachments/Detachments:</p>' +
                                            '<p class="ml-4" data-translate="attachments_content">Attached: 1x Forward Observer team, 1x Combat Engineer squad, 1x Military Working Dog team. Detached: None.</p>' +
                                        '</div>' +
                                    '</div>' +
                                '</div>' +

                                '<div>' +
                                    '<h4 class="text-lg font-semibold text-white mb-3" data-translate="key_locations_header">KEY LOCATIONS:</h4>' +
                                    '<div class="ml-4 font-mono text-xs bg-gray-700 p-3 rounded" data-translate="key_locations_content">' +
                                        'OBJ ALPHA: 32S 0123456 1234567 (MGRS)<br>' +
                                        'TAA BRAVO: 32S 0120000 1230000 (MGRS)<br>' +
                                        'PL CHARLIE: 32S 0121000 1232000 (MGRS)<br>' +
                                        'CP DELTA: 32S 0119000 1229000 (MGRS)' +
                                    '</div>' +
                                '</div>' +

                                '<div>' +
                                    '<h4 class="text-lg font-semibold text-white mb-3" data-translate="mission">2. MISSION</h4>' +
                                    '<div class="ml-4 bg-yellow-900 bg-opacity-30 p-4 rounded border-l-4 border-yellow-500">' +
                                        '<p class="font-semibold" data-translate="mission_content">2nd Battalion, 75th Ranger Regiment attacks to seize OBJECTIVE ALPHA NLT 151800Z DEC 24 in order to destroy enemy defensive positions and secure key terrain for follow-on operations.</p>' +
                                    '</div>' +
                                '</div>' +

                                '<div>' +
                                    '<h4 class="text-lg font-semibold text-white mb-3" data-translate="execution">3. EXECUTION</h4>' +
                                    '<div class="space-y-3 ml-4">' +
                                        '<div>' +
                                            '<p class="font-semibold text-blue-300" data-translate="commanders_intent_header">a. Commander\'s Intent:</p>' +
                                            '<div class="ml-4">' +
                                                '<p data-translate="commanders_intent_purpose"><span class="font-semibold">Purpose:</span> Destroy enemy defensive capability and secure key terrain.</p>' +
                                                '<p data-translate="commanders_intent_key_tasks"><span class="font-semibold">Key Tasks:</span> (1) Breach enemy defensive line, (2) Neutralize enemy strongpoints, (3) Secure OBJ ALPHA.</p>' +
                                                '<p data-translate="commanders_intent_end_state"><span class="font-semibold">End State:</span> Enemy forces destroyed or withdrawn, OBJ ALPHA secured, unit prepared for follow-on operations.</p>' +
                                            '</div>' +
                                        '</div>' +
                                        '<div>' +
                                            '<p class="font-semibold text-blue-300" data-translate="concept_ops_header">b. Concept of Operations:</p>' +
                                            '<div class="ml-4">' +
                                                '<p data-translate="concept_ops_phase1"><span class="font-semibold">Phase 1 (Movement):</span> Units move from TAA BRAVO to assault positions under cover of darkness.</p>' +
                                                '<p data-translate="concept_ops_phase2"><span class="font-semibold">Phase 2 (Assault):</span> Coordinated attack with supporting fires to breach enemy positions.</p>' +
                                                '<p data-translate="concept_ops_phase3"><span class="font-semibold">Phase 3 (Consolidation):</span> Secure objective and prepare defensive positions.</p>' +
                                            '</div>' +
                                        '</div>' +
                                        '<div>' +
                                            '<p class="font-semibold text-blue-300" data-translate="tasks_subordinate_header">c. Tasks to Subordinate Units:</p>' +
                                            '<div class="ml-4">' +
                                                '<p data-translate="tasks_alpha_company"><span class="font-semibold">Alpha Company:</span> Main effort. Attack along AXIS EAGLE to seize northern portion of OBJ ALPHA.</p>' +
                                                '<p data-translate="tasks_bravo_company"><span class="font-semibold">Bravo Company:</span> Supporting effort. Attack along AXIS FALCON to seize southern portion of OBJ ALPHA.</p>' +
                                                '<p data-translate="tasks_charlie_company"><span class="font-semibold">Charlie Company:</span> Battalion reserve. Prepared to exploit success or reinforce main effort.</p>' +
                                            '</div>' +
                                        '</div>' +
                                        '<div>' +
                                            '<p class="font-semibold text-blue-300" data-translate="coordinating_instructions_header">d. Coordinating Instructions:</p>' +
                                            '<div class="ml-4">' +
                                                '<p data-translate="coordinating_h_hour">• H-Hour: 151600Z DEC 24</p>' +
                                                '<p data-translate="coordinating_roe">• ROE: Positive identification required before engagement</p>' +
                                                '<p data-translate="coordinating_ccir">• CCIR: Enemy reinforcements, civilian presence, obstacle locations</p>' +
                                                '<p data-translate="coordinating_rehearsal">• Rehearsal: 141400Z at TAA BRAVO</p>' +
                                            '</div>' +
                                        '</div>' +
                                    '</div>' +
                                '</div>' +

                                '<div>' +
                                    '<h4 class="text-lg font-semibold text-white mb-3" data-translate="sustainment">4. SUSTAINMENT</h4>' +
                                    '<div class="space-y-3 ml-4">' +
                                        '<div>' +
                                            '<p class="font-semibold text-blue-300" data-translate="logistics_header">a. Logistics:</p>' +
                                            '<p class="ml-4" data-translate="logistics_content">Class I: 3 days on hand. Class III: Fuel point at TAA BRAVO. Class V: Basic load plus 50% additional. Resupply via ground convoy at PL CHARLIE.</p>' +
                                        '</div>' +
                                        '<div>' +
                                            '<p class="font-semibold text-blue-300" data-translate="personnel_services_header">b. Personnel Services:</p>' +
                                            '<p class="ml-4" data-translate="personnel_services_content">Replacement operations through S-1. EPW collection point at CP DELTA. Morale support via chaplain services.</p>' +
                                        '</div>' +
                                        '<div>' +
                                            '<p class="font-semibold text-blue-300" data-translate="health_service_header">c. Health Service Support:</p>' +
                                            '<p class="ml-4" data-translate="health_service_content">Battalion Aid Station at CP DELTA. MEDEVAC LZ at TAA BRAVO. Priority: Urgent, Priority, Routine. 9-line procedures in effect.</p>' +
                                        '</div>' +
                                    '</div>' +
                                '</div>' +

                                '<div>' +
                                    '<h4 class="text-lg font-semibold text-white mb-3" data-translate="command_signal">5. COMMAND AND SIGNAL</h4>' +
                                    '<div class="space-y-3 ml-4">' +
                                        '<div>' +
                                            '<p class="font-semibold text-blue-300" data-translate="command_header">a. Command:</p>' +
                                            '<p class="ml-4" data-translate="command_content">CP location: CP DELTA (32S 0119000 1229000). Succession of command: CO, XO, S-3, Alpha Company Commander.</p>' +
                                        '</div>' +
                                        '<div>' +
                                            '<p class="font-semibold text-blue-300" data-translate="control_header">b. Control:</p>' +
                                            '<p class="ml-4" data-translate="control_content">Reports: SITREP every 30 minutes. SPOTREP as required. Checkpoints: Alpha, Bravo, Charlie established.</p>' +
                                        '</div>' +
                                        '<div>' +
                                            '<p class="font-semibold text-blue-300" data-translate="signal_header">c. Signal:</p>' +
                                            '<p class="ml-4" data-translate="signal_content">Primary: FM radio net. Alternate: Satellite communications. Contingency: Visual signals. Emergency: Pyrotechnics. Frequencies: Command Net 45.000, Admin Net 46.000.</p>' +
                                        '</div>' +
                                    '</div>' +
                                '</div>' +

                                '<div>' +
                                    '<h4 class="text-lg font-semibold text-white mb-3" data-translate="annexes_header">ANNEXES:</h4>' +
                                    '<div class="space-y-2 ml-4 text-xs">' +
                                        '<p data-translate="annex_a_desc_example"><span class="font-semibold text-blue-300">Annex A (Task Organization):</span> Detailed unit assignments and attachments</p>' +
                                        '<p data-translate="annex_b_desc_example"><span class="font-semibold text-blue-300">Annex B (Intelligence):</span> Enemy situation, terrain analysis, weather data</p>' +
                                        '<p data-translate="annex_c_desc_example"><span class="font-semibold text-blue-300">Annex C (Operations):</span> Detailed tactical plan and graphics overlay</p>' +
                                        '<p data-translate="annex_d_desc_example"><span class="font-semibold text-blue-300">Annex D (Fires):</span> Artillery and close air support plan</p>' +
                                        '<p data-translate="annex_e_desc_example"><span class="font-semibold text-blue-300">Annex E (Protection):</span> Force protection and CBRN measures</p>' +
                                        '<p data-translate="annex_f_desc_example"><span class="font-semibold text-blue-300">Annex F (Sustainment):</span> Detailed logistics and medical support plan</p>' +
                                        '<p data-translate="annex_g_desc_example"><span class="font-semibold text-blue-300">Annex G (Engineer):</span> Obstacle reduction and mobility support</p>' +
                                        '<p data-translate="annex_h_desc_example"><span class="font-semibold text-blue-300">Annex H (Signal):</span> Communications plan and frequencies</p>' +
                                    '</div>' +
                                '</div>' +
                            '</div>' +

                            '<div class="text-center mt-6">' +
                                '<div class="text-lg font-bold text-red-400">[CLASSIFICATION]</div>' +
                            '</div>' +
                        '</div>' +

                        '<div class="mt-6 bg-blue-900 bg-opacity-30 p-4 rounded-lg border border-blue-500">' +
                            '<h4 class="text-lg font-semibold text-white mb-3 flex items-center">' +
                                '<i class="fas fa-info-circle mr-2 text-blue-400"></i><span data-translate="example_opord_notes_header">Example OPORD Notes</span>' +
                            '</h4>' +
                            '<div class="text-gray-300 text-sm space-y-2">' +
                                '<p data-translate="example_notes_purpose"><strong>Purpose:</strong> This example demonstrates a complete OPORD structure following FM 6-0 standards.</p>' +
                                '<p data-translate="example_notes_key_elements"><strong>Key Elements:</strong> Notice the detailed enemy situation, clear mission statement, comprehensive execution plan, and complete sustainment considerations.</p>' +
                                '<p data-translate="example_notes_coordinates"><strong>Coordinates:</strong> All tactical graphics use MGRS coordinates for precision and standardization.</p>' +
                                '<p data-translate="example_notes_classification"><strong>Classification:</strong> Replace [CLASSIFICATION] with appropriate security markings for your network.</p>' +
                                '<p data-translate="example_notes_customization"><strong>Customization:</strong> Adapt this format and level of detail for your specific operational requirements.</p>' +
                            '</div>' +
                        '</div>' +
                    '</div>' +
                '</div>';
            }

            getDraftContent() {
                return '<div class="space-y-6">' +
                    '<div class="section-card p-6 rounded-xl">' +
                        '<!-- Header Section with Title -->' +
                        '<div class="flex items-center justify-between mb-4">' +
                            '<div class="draft-title-container flex items-center">' +
                                '<h3 class="text-2xl font-semibold text-white flex items-center">' +
                                    '<i class="fas fa-pen-alt mr-3 text-blue-400"></i><span data-translate="draft_opord">Draft Your OPORD</span>' +
                                '</h3>' +
                            '</div>' +
                            '<div class="map-snippets-container flex space-x-3">' +
                                '<button class="btn-primary px-4 py-2 rounded-lg text-sm" onclick="app.openMapModal()">' +
                                    '<i class="fas fa-map mr-2"></i><span data-translate="map_weather">Map & Weather</span>' +
                                '</button>' +
                                '<button class="btn-secondary px-4 py-2 rounded-lg text-sm" onclick="app.showSnippets()">' +
                                    '<i class="fas fa-clipboard-list mr-2"></i><span data-translate="snippets">Snippets</span>' +
                                '</button>' +
                            '</div>' +
                        '</div>' +
                        '<!-- Generate OPORD Buttons - Centered Layout -->' +
                        '<div class="flex justify-center mb-6">' +
                            '<div class="generate-opord-horizontal">' +
                                '<button id="generate-opord" class="bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded-lg text-sm transition-all duration-200 transform hover:scale-105 shadow-lg flex items-center">' +
                                    '<i class="fas fa-magic mr-2"></i><span data-translate="generate_opord">Generate OPORD</span>' +
                                '</button>' +
                                '<button class="btn-secondary px-4 py-2 rounded-lg text-sm flex items-center" onclick="app.generateOPORD(\'txt\')" title="Export as Text File">' +
                                    '<i class="fas fa-file-text mr-2"></i><span data-translate="txt_format">.TXT</span>' +
                                '</button>' +
                                '<button class="btn-secondary px-4 py-2 rounded-lg text-sm flex items-center" onclick="app.generateOPORD(\'docx\')" title="Export as RTF Document">' +
                                    '<i class="fas fa-file-word mr-2"></i><span data-translate="rtf_format">.RTF</span>' +
                                '</button>' +
                                '<button class="btn-secondary px-4 py-2 rounded-lg text-sm flex items-center" onclick="app.generateOPORD(\'pdf\')" title="Export as PDF">' +
                                    '<i class="fas fa-file-pdf mr-2"></i><span data-translate="pdf_format">.PDF</span>' +
                                '</button>' +
                                '<button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm flex items-center" onclick="app.saveDraft()" title="Save Draft">' +
                                    '<i class="fas fa-save mr-2"></i><span data-translate="save_draft">Save Draft</span>' +
                                '</button>' +
                            '</div>' +
                        '</div>' +
                        '<p class="text-gray-300 mb-6" data-translate="draft_opord_description">Create your OPORD with integrated mapping and weather tools. Use the Map & Weather tool to get coordinates and tactical data for your operation.</p>' +

                        '<div class="space-y-6">' +
                            '<!-- Mission Statement Builder - Collapsible -->' +
                            '<div>' +
                                '<div class="collapsible-header cursor-pointer" data-target="mission-builder-content" aria-expanded="false" tabindex="0">' +
                                    '<i class="fas fa-chevron-right mr-3 transition-transform duration-200"></i>' +
                                    '<i class="fas fa-magic mr-3 text-blue-400"></i>' +
                                    '<span class="text-lg font-semibold text-white" data-translate="mission_builder">Mission Statement Builder</span>' +
                                '</div>' +
                                '<div id="mission-builder-content" class="collapsible-content hidden">' +
                                    '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600 mt-2">' +
                                '<div class="grid grid-cols-1 lg:grid-cols-5 gap-4 mb-4">' +
                                    '<div>' +
                                        '<label class="block text-sm font-medium text-gray-300 mb-2" data-translate="who">Who</label>' +
                                        '<input type="text" id="mission-who" class="form-input w-full p-2 rounded-md" data-translate-placeholder="placeholder_unit_designation" placeholder="Unit designation">' +
                                    '</div>' +
                                    '<div>' +
                                        '<label class="block text-sm font-medium text-gray-300 mb-2" data-translate="what">What</label>' +
                                        '<input type="text" id="mission-what" class="form-input w-full p-2 rounded-md" data-translate-placeholder="placeholder_tactical_task" placeholder="Tactical task">' +
                                    '</div>' +
                                    '<div>' +
                                        '<label class="block text-sm font-medium text-gray-300 mb-2" data-translate="when">When</label>' +
                                        '<input type="text" id="mission-when" class="form-input w-full p-2 rounded-md" data-translate-placeholder="placeholder_nlt_dtg" placeholder="NLT DTG">' +
                                    '</div>' +
                                    '<div>' +
                                        '<label class="block text-sm font-medium text-gray-300 mb-2" data-translate="where">Where</label>' +
                                        '<input type="text" id="mission-where" class="form-input w-full p-2 rounded-md" data-translate-placeholder="placeholder_objective_location" placeholder="Objective/Location">' +
                                    '</div>' +
                                    '<div>' +
                                        '<label class="block text-sm font-medium text-gray-300 mb-2" data-translate="why">Why</label>' +
                                        '<input type="text" id="mission-why" class="form-input w-full p-2 rounded-md" data-translate-placeholder="placeholder_purpose" placeholder="Purpose">' +
                                    '</div>' +
                                '</div>' +
                                '<div class="mb-4">' +
                                    '<label class="block text-sm font-medium text-gray-300 mb-2" data-translate="complete_mission_statement">Complete Mission Statement</label>' +
                                    '<textarea id="mission-statement" class="form-input w-full p-3 rounded-md h-24" data-translate-placeholder="placeholder_mission_statement" placeholder="[Unit] [Task] [Objective] [NLT DTG] in order to [Purpose]"></textarea>' +
                                '</div>' +
                                        '<button id="generate-mission" class="btn-primary px-4 py-2 rounded-md text-sm">' +
                                            '<i class="fas fa-magic mr-2"></i><span data-translate="auto_generate">Auto-Generate from 5 Ws</span>' +
                                        '</button>' +
                                    '</div>' +
                                '</div>' +
                            '</div>' +

                            '<!-- OPORD Sections - Individual Collapsible Sections -->' +
                            '<div class="space-y-4">' +
                                '<!-- Section 1: Situation - Collapsible -->' +
                                '<div>' +
                                    '<div class="collapsible-header cursor-pointer" data-target="situation-content" aria-expanded="false" tabindex="0">' +
                                        '<i class="fas fa-chevron-right mr-3 transition-transform duration-200"></i>' +
                                        '<i class="fas fa-map mr-3 text-green-400"></i>' +
                                        '<span class="text-lg font-semibold text-white" data-translate="situation">1. Situation</span>' +
                                    '</div>' +
                                    '<div id="situation-content" class="collapsible-content hidden">' +
                                        '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600 mt-2 space-y-4">' +
                                            '<textarea id="draft-situation" class="form-input w-full p-3 rounded-md h-32" data-translate-placeholder="placeholder_situation" placeholder="Enter situation details..."></textarea>' +
                                            '<div class="bg-gray-700 p-4 rounded-lg border border-blue-500">' +
                                                '<h5 class="text-white font-semibold mb-3 flex items-center">' +
                                                    '<i class="fas fa-map-marked-alt mr-2 text-blue-400"></i>Tactical Graphics & Coordinates' +
                                                '</h5>' +
                                                '<div class="space-y-3">' +
                                                    '<div>' +
                                                        '<label class="block text-sm font-medium text-gray-300 mb-2" data-translate="key_locations_coordinates">Key Locations & Coordinates</label>' +
                                                        '<textarea id="tactical-coordinates" class="form-input w-full p-3 rounded-md h-24" data-translate-placeholder="placeholder_coordinates" placeholder="Enter key locations with coordinates (e.g., OBJ ALPHA: 18TWL8396007523, CP BRAVO: 44R 206915 3009291)"></textarea>' +
                                                    '</div>' +
                                                    '<div class="flex space-x-2">' +
                                                        '<button class="btn-secondary px-3 py-2 text-sm flex-1" onclick="app.insertCurrentLocation()">' +
                                                            '<i class="fas fa-crosshairs mr-2"></i>Insert Current Map Location' +
                                                        '</button>' +
                                                        '<button class="btn-secondary px-3 py-2 text-sm flex-1" onclick="app.insertSavedLocations()">' +
                                                            '<i class="fas fa-bookmark mr-2"></i>Insert Saved Locations' +
                                                        '</button>' +
                                                    '</div>' +
                                                '</div>' +
                                            '</div>' +
                                        '</div>' +
                                    '</div>' +
                                '</div>' +

                                '<!-- Section 2: Mission - Collapsible -->' +
                                '<div>' +
                                    '<div class="collapsible-header cursor-pointer" data-target="mission-content" aria-expanded="false" tabindex="0">' +
                                        '<i class="fas fa-chevron-right mr-3 transition-transform duration-200"></i>' +
                                        '<i class="fas fa-bullseye mr-3 text-yellow-400"></i>' +
                                        '<span class="text-lg font-semibold text-white" data-translate="mission">2. Mission</span>' +
                                    '</div>' +
                                    '<div id="mission-content" class="collapsible-content hidden">' +
                                        '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600 mt-2">' +
                                            '<p class="text-gray-300 text-sm mb-3">Reference the Mission Statement Builder above or enter your mission statement directly:</p>' +
                                            '<textarea id="draft-mission" class="form-input w-full p-3 rounded-md h-32" placeholder="Enter mission statement using the 5 Ws format: [Unit] [Task] [Objective] [NLT DTG] in order to [Purpose]"></textarea>' +
                                        '</div>' +
                                    '</div>' +
                                '</div>' +

                                '<!-- Section 3: Execution - Collapsible -->' +
                                '<div>' +
                                    '<div class="collapsible-header cursor-pointer" data-target="execution-content" aria-expanded="false" tabindex="0">' +
                                        '<i class="fas fa-chevron-right mr-3 transition-transform duration-200"></i>' +
                                        '<i class="fas fa-cogs mr-3 text-orange-400"></i>' +
                                        '<span class="text-lg font-semibold text-white" data-translate="execution">3. Execution</span>' +
                                    '</div>' +
                                    '<div id="execution-content" class="collapsible-content hidden">' +
                                        '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600 mt-2">' +
                                            '<!-- 2x2 Grid Layout for Execution Subsections -->' +
                                            '<div class="grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4">' +

                                            '<!-- Commander\'s Intent Subsection -->' +
                                            '<div class="bg-gray-800 p-3 rounded-lg border border-gray-600">' +
                                                '<label class="block text-sm font-semibold text-blue-300 mb-2" data-translate="commanders_intent">a. Commander\'s Intent</label>' +
                                                '<p class="text-xs text-gray-400 mb-2" data-translate="commanders_intent_desc">Purpose, key tasks, and end state per FM 6-0.</p>' +
                                                '<textarea id="draft-commanders-intent" class="form-input w-full p-2 rounded-md h-20 text-sm" data-translate-placeholder="placeholder_commanders_intent" placeholder="Purpose: [Why this operation is being conducted]\nKey Tasks: [Essential tasks]\nEnd State: [Desired conditions]"></textarea>' +
                                            '</div>' +

                                            '<!-- Concept of Operations Subsection -->' +
                                            '<div class="bg-gray-800 p-3 rounded-lg border border-gray-600">' +
                                                '<label class="block text-sm font-semibold text-blue-300 mb-2" data-translate="concept_operations">b. Concept of Operations</label>' +
                                                '<p class="text-xs text-gray-400 mb-2" data-translate="concept_operations_desc">Sequence of actions and main effort.</p>' +
                                                '<textarea id="draft-concept-operations" class="form-input w-full p-2 rounded-md h-20 text-sm" data-translate-placeholder="placeholder_concept_operations" placeholder="Sequence: [How operation unfolds]\nMain Effort: [Primary focus]\nSupporting Efforts: [Support elements]"></textarea>' +
                                            '</div>' +

                                            '<!-- Tasks to Subordinate Units Subsection (Enhanced with Dynamic Management) -->' +
                                            '<div class="bg-gray-800 p-3 rounded-lg border border-gray-600">' +
                                                '<div class="flex justify-between items-center mb-2">' +
                                                    '<label class="block text-sm font-semibold text-blue-300" data-translate="tasks_subordinate_units">c. Tasks to Subordinate Units</label>' +
                                                    '<button type="button" id="add-unit-btn" class="bg-green-600 hover:bg-green-700 text-white text-xs px-2 py-1 rounded flex items-center gap-1" data-translate="add_unit_btn">' +
                                                        '<span>+</span> Add Unit' +
                                                    '</button>' +
                                                '</div>' +
                                                '<p class="text-xs text-gray-400 mb-3" data-translate="tasks_subordinate_desc">Assign tasks to subordinate units (Corps to Platoon level). FM 6-0 format.</p>' +
                                                '<div id="subordinate-units-container" class="space-y-2">' +
                                                    '<!-- Dynamic unit entries will be added here -->' +
                                                '</div>' +
                                            '</div>' +

                                            '<!-- Tasks to Staff Subsection -->' +
                                            '<div class="bg-gray-800 p-3 rounded-lg border border-gray-600">' +
                                                '<label class="block text-sm font-semibold text-blue-300 mb-2" data-translate="tasks_staff">d. Tasks to Staff</label>' +
                                                '<p class="text-xs text-gray-400 mb-2" data-translate="tasks_staff_desc">Staff tasks and responsibilities during operation.</p>' +
                                                '<textarea id="draft-tasks-staff" class="form-input w-full p-2 rounded-md h-20 text-sm" data-translate-placeholder="placeholder_tasks_staff" placeholder="S-1: [Personnel] S-2: [Intelligence] S-3: [Operations] S-4: [Logistics] S-6: [Communications]"></textarea>' +
                                            '</div>' +

                                            '</div>' +
                                        '</div>' +
                                    '</div>' +
                                '</div>' +

                                '<!-- Section 4: Sustainment - Collapsible -->' +
                                '<div>' +
                                    '<div class="collapsible-header cursor-pointer" data-target="sustainment-content" aria-expanded="false" tabindex="0">' +
                                        '<i class="fas fa-chevron-right mr-3 transition-transform duration-200"></i>' +
                                        '<i class="fas fa-truck mr-3 text-purple-400"></i>' +
                                        '<span class="text-lg font-semibold text-white" data-translate="sustainment">4. Sustainment</span>' +
                                    '</div>' +
                                    '<div id="sustainment-content" class="collapsible-content hidden">' +
                                        '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600 mt-2">' +
                                            '<textarea id="draft-sustainment" class="form-input w-full p-3 rounded-md h-32" data-translate-placeholder="placeholder_sustainment" placeholder="Enter sustainment details..."></textarea>' +
                                        '</div>' +
                                    '</div>' +
                                '</div>' +

                                '<!-- Section 5: Command and Signal - Collapsible -->' +
                                '<div>' +
                                    '<div class="collapsible-header cursor-pointer" data-target="command-content" aria-expanded="false" tabindex="0">' +
                                        '<i class="fas fa-chevron-right mr-3 transition-transform duration-200"></i>' +
                                        '<i class="fas fa-headset mr-3 text-cyan-400"></i>' +
                                        '<span class="text-lg font-semibold text-white" data-translate="command_signal">5. Command and Signal</span>' +
                                    '</div>' +
                                    '<div id="command-content" class="collapsible-content hidden">' +
                                        '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600 mt-2">' +
                                            '<textarea id="draft-command" class="form-input w-full p-3 rounded-md h-32" data-translate-placeholder="placeholder_command" placeholder="Enter command and signal details..."></textarea>' +
                                        '</div>' +
                                    '</div>' +
                                '</div>' +
                            '</div>' +

                            '<!-- Annexes Section - Collapsible -->' +
                            '<div>' +
                                '<div class="collapsible-header cursor-pointer" data-target="annexes-content" aria-expanded="false" tabindex="0">' +
                                    '<i class="fas fa-chevron-right mr-3 transition-transform duration-200"></i>' +
                                    '<i class="fas fa-folder-open mr-3 text-yellow-400"></i>' +
                                    '<span class="text-lg font-semibold text-white" data-translate="annexes_fm60_structure">Annexes (FM 6-0 Structure)</span>' +
                                '</div>' +
                                '<div id="annexes-content" class="collapsible-content hidden">' +
                                    '<div class="bg-gray-800 p-4 rounded-lg border border-gray-600 mt-2">' +
                                        '<div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">' +
                                            '<div class="space-y-4">' +
                                        '<div>' +
                                            '<label class="block text-sm font-medium text-gray-300 mb-2" data-translate="annex_a">Annex A: Task Organization</label>' +
                                            '<textarea id="draft-annex-a" class="form-input w-full p-3 rounded-md h-24" data-translate-placeholder="placeholder_task_organization" placeholder="Enter task organization..."></textarea>' +
                                        '</div>' +
                                        '<div>' +
                                            '<label class="block text-sm font-medium text-gray-300 mb-2" data-translate="annex_b">Annex B: Intelligence</label>' +
                                            '<textarea id="draft-annex-b" class="form-input w-full p-3 rounded-md h-24" data-translate-placeholder="placeholder_intelligence" placeholder="Enter intelligence requirements..."></textarea>' +
                                        '</div>' +
                                        '<div>' +
                                            '<label class="block text-sm font-medium text-gray-300 mb-2" data-translate="annex_c">Annex C: Operations</label>' +
                                            '<textarea id="draft-annex-c" class="form-input w-full p-3 rounded-md h-24" data-translate-placeholder="placeholder_operations" placeholder="Enter operations overlay details..."></textarea>' +
                                        '</div>' +
                                        '<div>' +
                                            '<label class="block text-sm font-medium text-gray-300 mb-2" data-translate="annex_d">Annex D: Fires</label>' +
                                            '<textarea id="draft-annex-d" class="form-input w-full p-3 rounded-md h-24" data-translate-placeholder="placeholder_fires" placeholder="Enter fire support plan..."></textarea>' +
                                        '</div>' +
                                    '</div>' +
                                    '<div class="space-y-4">' +
                                        '<div>' +
                                            '<label class="block text-sm font-medium text-gray-300 mb-2" data-translate="annex_e">Annex E: Protection</label>' +
                                            '<textarea id="draft-annex-e" class="form-input w-full p-3 rounded-md h-24" data-translate-placeholder="placeholder_protection" placeholder="Enter protection measures..."></textarea>' +
                                        '</div>' +
                                        '<div>' +
                                            '<label class="block text-sm font-medium text-gray-300 mb-2" data-translate="annex_f">Annex F: Sustainment</label>' +
                                            '<textarea id="draft-annex-f" class="form-input w-full p-3 rounded-md h-24" data-translate-placeholder="placeholder_sustainment_plan" placeholder="Enter sustainment plan..."></textarea>' +
                                        '</div>' +
                                        '<div>' +
                                            '<label class="block text-sm font-medium text-gray-300 mb-2" data-translate="annex_g">Annex G: Engineer</label>' +
                                            '<textarea id="draft-annex-g" class="form-input w-full p-3 rounded-md h-24" data-translate-placeholder="placeholder_engineer" placeholder="Enter engineer tasks..."></textarea>' +
                                        '</div>' +
                                        '<div>' +
                                            '<label class="block text-sm font-medium text-gray-300 mb-2" data-translate="annex_h">Annex H: Signal</label>' +
                                            '<textarea id="draft-annex-h" class="form-input w-full p-3 rounded-md h-24" data-translate-placeholder="placeholder_signal" placeholder="Enter signal plan..."></textarea>' +
                                        '</div>' +
                                    '</div>' +
                                    '<div class="space-y-4">' +
                                        '<div>' +
                                            '<label class="block text-sm font-medium text-gray-300 mb-2" data-translate="annex_k">Annex K: CEMA</label>' +
                                            '<textarea id="annex-k" class="form-input w-full p-3 rounded-md h-24" data-translate-placeholder="placeholder_cema" placeholder="Enter cyber/electronic warfare operations plan..."></textarea>' +
                                        '</div>' +
                                        '<div>' +
                                            '<label class="block text-sm font-medium text-gray-300 mb-2" data-translate="annex_l">Annex L: Information Collection</label>' +
                                            '<textarea id="annex-l" class="form-input w-full p-3 rounded-md h-24" data-translate-placeholder="placeholder_info_collection" placeholder="Enter information collection plan..."></textarea>' +
                                        '</div>' +
                                        '<div>' +
                                            '<label class="block text-sm font-medium text-gray-300 mb-2" data-translate="misc_annexes">Miscellaneous Annexes</label>' +
                                                '<textarea id="annex-misc" class="form-input w-full p-3 rounded-md h-24" data-translate-placeholder="placeholder_misc_annexes" placeholder="Enter additional annexes as required (e.g., Annex P - Host Nation Support, Annex S - Special Technical Operations, etc.)..."></textarea>' +
                                            '</div>' +
                                        '</div>' +
                                    '</div>' +
                                '</div>' +
                            '</div>' +
                        '</div>' +

                        '<!-- Bottom Generate OPORD Section - Clean Button Layout -->' +
                        '<div class="mt-8 pt-6 border-t border-gray-600">' +
                            '<div class="flex justify-center">' +
                                '<div class="generate-opord-horizontal">' +
                                    '<button id="generate-opord-bottom" class="bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded-lg text-sm transition-all duration-200 transform hover:scale-105 shadow-lg flex items-center">' +
                                        '<i class="fas fa-magic mr-2"></i><span data-translate="generate_opord">Generate OPORD</span>' +
                                    '</button>' +
                                    '<button class="btn-secondary px-4 py-2 rounded-lg text-sm flex items-center" onclick="app.generateOPORD(\'txt\')" title="Export as Text File">' +
                                        '<i class="fas fa-file-text mr-2"></i><span data-translate="txt_format">.TXT</span>' +
                                    '</button>' +
                                    '<button class="btn-secondary px-4 py-2 rounded-lg text-sm flex items-center" onclick="app.generateOPORD(\'docx\')" title="Export as RTF Document">' +
                                        '<i class="fas fa-file-word mr-2"></i><span data-translate="rtf_format">.RTF</span>' +
                                    '</button>' +
                                    '<button class="btn-secondary px-4 py-2 rounded-lg text-sm flex items-center" onclick="app.generateOPORD(\'pdf\')" title="Export as PDF">' +
                                        '<i class="fas fa-file-pdf mr-2"></i><span data-translate="pdf_format">.PDF</span>' +
                                    '</button>' +
                                    '<button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm flex items-center" onclick="app.saveDraft()" title="Save Draft">' +
                                        '<i class="fas fa-save mr-2"></i><span data-translate="save_draft">Save Draft</span>' +
                                    '</button>' +
                                '</div>' +
                            '</div>' +
                        '</div>' +

                        '</div>' +
                    '</div>' +
                '</div>';
            }

            // Utility methods
            handleFormChange(event) {
                // Auto-save functionality
                console.log('Form changed:', event.target.id, event.target.value);

                // Update progress when form fields change
                this.updateProgress();
            }

            saveFormData() {
                console.log('Saving form data...');
            }

            loadFormData() {
                console.log('Loading form data...');
            }

            startAutoSave() {
                console.log('Auto-save started...');
            }

            updateProgress() {
                try {
                    // Define required fields for each section
                    const requiredFields = {
                        situation: ['draft-situation'],
                        tactical: ['tactical-coordinates'],
                        mission: ['mission-who', 'mission-what', 'mission-when', 'mission-where', 'mission-why'],
                        execution: ['draft-commanders-intent', 'draft-concept-operations', 'subordinate-units-container', 'draft-tasks-staff'],
                        sustainment: ['draft-sustainment'],
                        command: ['draft-command'],
                        annexes: ['annex-a', 'annex-b', 'annex-c']
                    };

                    let totalFields = 0;
                    let completedFields = 0;

                    // Count total and completed fields
                    Object.values(requiredFields).forEach(fields => {
                        fields.forEach(fieldId => {
                            totalFields++;
                            const field = document.getElementById(fieldId);
                            if (field && field.value && field.value.trim().length > 0) {
                                completedFields++;
                            }
                        });
                    });

                    // Calculate percentage
                    const percentage = totalFields > 0 ? Math.round((completedFields / totalFields) * 100) : 0;

                    // Update progress bar
                    const progressBar = document.getElementById('completion-progress');
                    const progressText = document.getElementById('completion-percentage');

                    if (progressBar) {
                        progressBar.style.width = `${percentage}%`;
                    }

                    if (progressText) {
                        progressText.textContent = `${percentage}%`;
                    }

                    // Update progress bar color based on completion
                    if (progressBar) {
                        if (percentage >= 100) {
                            progressBar.style.background = 'linear-gradient(90deg, #10b981 0%, #059669 100%)'; // Green
                        } else if (percentage >= 75) {
                            progressBar.style.background = 'linear-gradient(90deg, #3b82f6 0%, #1d4ed8 100%)'; // Blue
                        } else if (percentage >= 50) {
                            progressBar.style.background = 'linear-gradient(90deg, #f59e0b 0%, #d97706 100%)'; // Orange
                        } else {
                            progressBar.style.background = 'linear-gradient(90deg, #ef4444 0%, #dc2626 100%)'; // Red
                        }
                    }

                    console.log(`OPORD Progress: ${completedFields}/${totalFields} fields completed (${percentage}%)`);
                } catch (error) {
                    console.error('Error updating progress:', error);
                }
            }

            showDonationModal() {
                // Create and show donation modal
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 modal-backdrop flex items-center justify-center z-50';
                modal.innerHTML = `
                    <div class="modal-content rounded-xl p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-2xl font-semibold text-white flex items-center">
                                <i class="fas fa-heart mr-3 text-red-400"></i>
                                <span data-translate="donate_title">Support Development</span>
                            </h3>
                            <div class="flex items-center space-x-4">
                                <select id="donation-language-select" class="bg-gray-700 text-white px-3 py-1 rounded border border-gray-600 text-sm">
                                    <option value="en">🇺🇸 English</option>
                                    <option value="es">🇪🇸 Español</option>
                                    <option value="fr">🇫🇷 Français</option>
                                    <option value="de">🇩🇪 Deutsch</option>
                                    <option value="ko">🇰🇷 한국어</option>
                                </select>
                                <button id="close-donation-modal" class="text-gray-400 hover:text-white">
                                    <i class="fas fa-times text-xl"></i>
                                </button>
                            </div>
                        </div>

                        <div class="space-y-6">
                            <!-- Introduction -->
                            <div class="bg-gradient-to-r from-blue-900 to-purple-900 p-6 rounded-lg border border-blue-500">
                                <h4 class="text-xl font-semibold text-white mb-3 flex items-center">
                                    <i class="fas fa-shield-alt mr-2 text-blue-400"></i>
                                    <span data-translate="donate_subtitle">Help Keep This Military Planning Tool Free</span>
                                </h4>
                                <p class="text-blue-100 mb-4" data-translate="donate_description">
                                    This OPORD tool is developed and maintained by military professionals for the military community.
                                    Your support helps us continue improving this free resource with new features, better accuracy,
                                    and enhanced functionality for military planning operations.
                                </p>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                                    <div class="bg-blue-800 bg-opacity-50 p-3 rounded">
                                        <i class="fas fa-code text-blue-300 mb-2"></i>
                                        <div class="text-blue-200" data-translate="donate_development">Continuous Development</div>
                                    </div>
                                    <div class="bg-blue-800 bg-opacity-50 p-3 rounded">
                                        <i class="fas fa-server text-blue-300 mb-2"></i>
                                        <div class="text-blue-200" data-translate="donate_costs">Server & API Costs</div>
                                    </div>
                                    <div class="bg-blue-800 bg-opacity-50 p-3 rounded">
                                        <i class="fas fa-users text-blue-300 mb-2"></i>
                                        <div class="text-blue-200" data-translate="donate_community">Community Support</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Payment Options -->
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <!-- Left Column: PayPal + Questions/Suggestions -->
                                <div class="space-y-6">
                                    <!-- PayPal/Credit Card Section -->
                                    <div class="bg-gray-800 p-6 rounded-lg border border-gray-600">
                                        <h4 class="text-lg font-semibold text-white mb-4 flex items-center">
                                            <i class="fas fa-credit-card mr-2 text-green-400"></i>
                                            <span data-translate="donate_card_title">Credit/Debit Card</span>
                                        </h4>
                                        <p class="text-gray-300 text-sm mb-4" data-translate="donate_card_desc">Secure payment processing via PayPal</p>

                                        <div class="space-y-4">
                                            <!-- Enhanced PayPal Donation Button -->
                                            <div class="text-center">
                                                <form action="https://www.paypal.com/donate" method="post" target="_blank" class="inline-block">
                                                    <input type="hidden" name="hosted_button_id" value="AJAY9AFD52PZA" />
                                                    <button type="submit" class="bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-4 px-8 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 flex items-center space-x-3 mx-auto">
                                                        <i class="fab fa-paypal text-2xl"></i>
                                                        <div class="text-left">
                                                            <div class="text-lg" data-translate="donate_paypal_btn">Donate with PayPal</div>
                                                            <div class="text-xs opacity-80" data-translate="donate_paypal_secure">Secure & Fast</div>
                                                        </div>
                                                    </button>
                                                    <img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" />
                                                </form>
                                            </div>

                                            <!-- Credit Card Icons -->
                                            <div class="text-center">
                                                <p class="text-gray-400 text-xs mb-2" data-translate="donate_cards_accepted">Accepted Payment Methods:</p>
                                                <div class="flex justify-center items-center space-x-3">
                                                    <i class="fab fa-cc-visa text-2xl text-blue-600" title="Visa"></i>
                                                    <i class="fab fa-cc-mastercard text-2xl text-red-500" title="Mastercard"></i>
                                                    <i class="fab fa-cc-amex text-2xl text-blue-400" title="American Express"></i>
                                                    <i class="fab fa-cc-discover text-2xl text-orange-500" title="Discover"></i>
                                                    <i class="fab fa-cc-paypal text-2xl text-blue-600" title="PayPal"></i>
                                                </div>
                                            </div>

                                            <!-- PayPal QR Code -->
                                            <div class="text-center">
                                                <p class="text-gray-300 text-sm mb-2" data-translate="donate_qr_scan">Or scan PayPal QR code:</p>
                                                <div class="inline-block bg-white p-3 rounded-lg">
                                                    <img src="PayPal_QR.png" alt="PayPal Donation QR Code" class="w-32 h-32 mx-auto" />
                                                </div>
                                                <p class="text-xs text-gray-400 mt-2" data-translate="donate_qr_mobile">Scan with mobile device for quick donation</p>
                                            </div>
                                        </div>

                                        <div class="mt-4 text-xs text-gray-400">
                                            <i class="fas fa-shield-alt mr-1"></i>
                                            <span data-translate="donate_secure">Secure SSL encrypted transactions</span>
                                        </div>
                                    </div>

                                    <!-- Questions/Suggestions Section -->
                                    <div class="bg-gray-800 p-4 rounded-lg border border-gray-600">
                                        <h4 class="text-white font-semibold mb-2 flex items-center">
                                            <i class="fas fa-envelope mr-2 text-blue-400"></i>
                                            <span data-translate="donate_contact_title">Questions or Suggestions?</span>
                                        </h4>
                                        <p class="text-gray-300 text-sm mb-3" data-translate="donate_contact_desc">
                                            Have ideas for new features or found a bug? We'd love to hear from you!
                                        </p>
                                        <!-- Simple Google Form Link -->
                                        <div class="text-center">
                                            <div class="mb-4">
                                                <i class="fas fa-external-link-alt text-3xl text-blue-400 mb-3"></i>
                                                <p class="text-gray-300 text-sm mb-4" data-translate="feedback_form_description">
                                                    Share your feedback, suggestions, or report bugs using our Google Form.
                                                </p>
                                            </div>

                                            <div class="bg-blue-900 bg-opacity-30 border border-blue-500 rounded-lg p-4 mb-4">
                                                <h4 class="text-white font-semibold mb-2" data-translate="feedback_categories_title">Feedback Categories:</h4>
                                                <div class="text-left space-y-1 text-sm text-blue-200">
                                                    <div><strong data-translate="feedback_sustains">Sustains:</strong> <span data-translate="feedback_sustains_desc">What did you like?</span></div>
                                                    <div><strong data-translate="feedback_improvements">Improves:</strong> <span data-translate="feedback_improvements_desc">What did you not like?</span></div>
                                                    <div><strong data-translate="feedback_bugs">Bugs/Features:</strong> <span data-translate="feedback_bugs_desc">Bug reports or feature requests</span></div>
                                                    <div><strong data-translate="feedback_contact">Contact:</strong> <span data-translate="feedback_contact_desc">Optional contact information</span></div>
                                                </div>
                                            </div>

                                            <button onclick="window.open('https://docs.google.com/forms/d/e/1FAIpQLSfYxqbbVi7CsTqB-XEUC8G75mv4jCNlD4qG3OlZ3XWJTjIyiQ/viewform?usp=dialog', '_blank')" class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-4 rounded text-sm transition-colors duration-200 shadow-lg">
                                                <i class="fab fa-google mr-2"></i>
                                                <span data-translate="open_feedback_form">Open Feedback Form</span>
                                            </button>

                                            <p class="text-xs text-gray-400 mt-3" data-translate="feedback_form_security">
                                                Opens in a new tab • Completely secure • No login required
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Right Column: Cryptocurrency Information -->
                                <div class="bg-gray-800 p-6 rounded-lg border border-gray-600">
                                    <h4 class="text-lg font-semibold text-white mb-4 flex items-center">
                                        <i class="fab fa-bitcoin mr-2 text-orange-400"></i>
                                        <span data-translate="donate_crypto_title">Cryptocurrency</span>
                                    </h4>
                                    <p class="text-gray-300 text-sm mb-4" data-translate="donate_crypto_desc">Direct crypto donations - no fees, maximum impact</p>

                                    <div class="space-y-4">
                                        <!-- Bitcoin -->
                                        <div class="bg-gray-700 p-4 rounded-lg">
                                            <div class="flex items-center justify-between mb-2">
                                                <div class="flex items-center">
                                                    <i class="fab fa-bitcoin text-orange-400 mr-2"></i>
                                                    <span class="font-semibold text-white">Bitcoin (BTC)</span>
                                                </div>
                                                <button class="text-xs bg-orange-600 hover:bg-orange-700 text-white px-2 py-1 rounded" onclick="app.copyToClipboard('38eqZXL2acxCSvm6JmSaP2rijdPWC5fpTK', app.getTranslation('donate_btc_copied'))">
                                                    <i class="fas fa-copy mr-1"></i><span data-translate="donate_copy">Copy</span>
                                                </button>
                                            </div>
                                            <div class="text-xs text-gray-300 font-mono break-all bg-gray-800 p-2 rounded mb-3">
                                                38eqZXL2acxCSvm6JmSaP2rijdPWC5fpTK
                                            </div>
                                            <div class="text-center">
                                                <div class="inline-block bg-white p-2 rounded-lg">
                                                    <img src="BTC_QR.png" alt="Bitcoin QR Code" class="w-24 h-24 mx-auto" />
                                                </div>
                                                <p class="text-xs text-gray-400 mt-1" data-translate="donate_qr_scan_crypto">Scan to send Bitcoin</p>
                                            </div>
                                        </div>

                                        <!-- Ethereum -->
                                        <div class="bg-gray-700 p-4 rounded-lg">
                                            <div class="flex items-center justify-between mb-2">
                                                <div class="flex items-center">
                                                    <i class="fab fa-ethereum text-blue-400 mr-2"></i>
                                                    <span class="font-semibold text-white">Ethereum (ETH)</span>
                                                </div>
                                                <button class="text-xs bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded" onclick="app.copyToClipboard('0xD3348Bb9eB3cFEC613B7c53Bd4f5756bCD8EDfD3', app.getTranslation('donate_eth_copied'))">
                                                    <i class="fas fa-copy mr-1"></i><span data-translate="donate_copy">Copy</span>
                                                </button>
                                            </div>
                                            <div class="text-xs text-gray-300 font-mono break-all bg-gray-800 p-2 rounded mb-3">
                                                0xD3348Bb9eB3cFEC613B7c53Bd4f5756bCD8EDfD3
                                            </div>
                                            <div class="text-center">
                                                <div class="inline-block bg-white p-2 rounded-lg">
                                                    <img src="ETH_QR.png" alt="Ethereum QR Code" class="w-24 h-24 mx-auto" />
                                                </div>
                                                <p class="text-xs text-gray-400 mt-1" data-translate="donate_qr_scan_crypto">Scan to send Ethereum</p>
                                            </div>
                                        </div>

                                        <!-- Solana -->
                                        <div class="bg-gray-700 p-4 rounded-lg">
                                            <div class="flex items-center justify-between mb-2">
                                                <div class="flex items-center">
                                                    <i class="fas fa-coins text-purple-400 mr-2"></i>
                                                    <span class="font-semibold text-white">Solana (SOL)</span>
                                                </div>
                                                <button class="text-xs bg-purple-600 hover:bg-purple-700 text-white px-2 py-1 rounded" onclick="app.copyToClipboard('5pwjzhcNHvGfR7uUsmHwDEdgr13rC5raj9d85rs1tmnk', app.getTranslation('donate_sol_copied'))">
                                                    <i class="fas fa-copy mr-1"></i><span data-translate="donate_copy">Copy</span>
                                                </button>
                                            </div>
                                            <div class="text-xs text-gray-300 font-mono break-all bg-gray-800 p-2 rounded mb-3">
                                                5pwjzhcNHvGfR7uUsmHwDEdgr13rC5raj9d85rs1tmnk
                                            </div>
                                            <div class="text-center">
                                                <div class="inline-block bg-white p-2 rounded-lg">
                                                    <img src="SOL_QR.png" alt="Solana QR Code" class="w-24 h-24 mx-auto" />
                                                </div>
                                                <p class="text-xs text-gray-400 mt-1" data-translate="donate_qr_scan_crypto">Scan to send Solana</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="mt-4 text-xs text-gray-400">
                                        <i class="fas fa-info-circle mr-1"></i>
                                        <span data-translate="donate_verify">Always verify addresses before sending</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Thank You Message -->
                            <div class="bg-green-900 bg-opacity-30 border border-green-500 rounded-lg p-4">
                                <div class="flex items-center mb-2">
                                    <i class="fas fa-heart text-red-400 mr-2"></i>
                                    <h4 class="text-white font-semibold" data-translate="donate_thanks_title">Thank You for Your Support!</h4>
                                </div>
                                <p class="text-green-200 text-sm" data-translate="donate_thanks_desc">
                                    Every donation, no matter the size, helps us maintain and improve this tool for the military community.
                                    Your support ensures we can continue providing accurate, up-to-date military planning resources completely free of charge.
                                </p>
                                <div class="mt-3 text-xs text-green-300">
                                    <i class="fas fa-shield-alt mr-1"></i>
                                    <span data-translate="donate_by_military">Developed by military professionals, for military professionals</span>
                                </div>
                            </div>


                        </div>
                    </div>
                `;

                document.body.appendChild(modal);

                // Set current language in dropdown
                const languageSelect = document.getElementById('donation-language-select');
                languageSelect.value = this.currentLanguage;

                // Add language change functionality
                languageSelect.addEventListener('change', (e) => {
                    const newLanguage = e.target.value;
                    this.currentLanguage = newLanguage;

                    // Update main language selector to match
                    const mainLanguageSelector = document.getElementById('language-selector');
                    if (mainLanguageSelector) {
                        mainLanguageSelector.value = newLanguage;
                    }

                    // Save language preference
                    localStorage.setItem('opord-language', newLanguage);

                    // Translate the page and donation modal
                    this.translatePage();
                    this.updateDonationModalTranslations();

                    // Show notification
                    this.showNotification(`Language changed to ${this.getLanguageName(newLanguage)}`, 'success');
                });

                // Add close functionality
                document.getElementById('close-donation-modal').addEventListener('click', () => {
                    modal.remove();
                });

                // Close on backdrop click
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });

                // Apply initial translations
                this.updateDonationModalTranslations();

                // Feedback form is now just a link - no submission handler needed
            }

            // Removed complex entry ID discovery - using simple Google Form link approach

            // Simple function to open Google Form - no complex submission logic needed
            openFeedbackForm() {
                const googleFormUrl = 'https://docs.google.com/forms/d/e/1FAIpQLSfYxqbbVi7CsTqB-XEUC8G75mv4jCNlD4qG3OlZ3XWJTjIyiQ/viewform?usp=dialog';

                console.log('🔗 Opening Google Form for feedback submission');
                console.log('Form URL:', googleFormUrl);

                // Open the Google Form in a new tab
                window.open(googleFormUrl, '_blank');

                // Show notification
                this.showNotification('✅ Feedback form opened in new tab. Thank you for sharing your input!', 'success');

                return true;
            }

            // Legacy function for compatibility - redirects to openFeedbackForm
            async submitFeedback() {
                console.log('📝 Feedback submission redirected to Google Form');
                return this.openFeedbackForm();
            }

            // Simplified feedback system - now uses direct Google Form link
            openGoogleFormFeedback() {
                const googleFormUrl = 'https://docs.google.com/forms/d/e/1FAIpQLSfYxqbbVi7CsTqB-XEUC8G75mv4jCNlD4qG3OlZ3XWJTjIyiQ/viewform?usp=dialog';
                window.open(googleFormUrl, '_blank');
                console.log('✅ Google Form opened for feedback submission');
                return 'Google Form opened successfully';
            }

            // Feedback system simplified - complex entry ID functions removed
            // Now using direct Google Form link for reliable feedback submission

            // Complex test functions removed - using simple Google Form link approach

            // Removed complex test functions - feedback now uses direct Google Form link

            // Complex testing functions removed - using simple Google Form link

            // All complex debugging and testing functions removed
            // Feedback system now uses simple, reliable Google Form link

            // Removed all complex test functions - feedback uses direct Google Form link

            // All complex test functions removed - using simple Google Form link approach

            showHelp() {
                // Create and show help modal
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 modal-backdrop flex items-center justify-center z-50';
                modal.innerHTML = `
                    <div class="modal-content rounded-xl p-6 max-w-4xl max-h-[90vh] overflow-y-auto w-full mx-4">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-semibold text-white">LSCO OPORD Tool - Help Guide</h3>
                            <div class="flex items-center space-x-3">
                                <div class="relative">
                                    <select id="help-language-selector" class="bg-gray-700 text-white px-3 py-2 rounded-lg text-sm border border-gray-600 focus:border-blue-500 appearance-none pr-8">
                                        <option value="en" data-flag="🇺🇸">🇺🇸 English</option>
                                        <option value="es" data-flag="🇪🇸">🇪🇸 Español</option>
                                        <option value="fr" data-flag="🇫🇷">🇫🇷 Français</option>
                                        <option value="de" data-flag="🇩🇪">🇩🇪 Deutsch</option>
                                        <option value="ko" data-flag="🇰🇷">🇰🇷 한국어</option>
                                    </select>
                                    <i class="fas fa-chevron-down absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                                </div>
                                <button id="close-help-modal" class="text-gray-400 hover:text-white">
                                    <i class="fas fa-times text-xl"></i>
                                </button>
                            </div>
                        </div>
                        <div class="space-y-6 text-gray-300">
                            <div class="bg-gray-800 p-4 rounded-lg">
                                <h4 class="text-lg font-semibold text-white mb-3" data-translate="getting_started">Getting Started</h4>
                                <ul class="list-disc ml-6 space-y-2 text-sm">
                                    <li><strong data-translate="help_navigation">Navigation:</strong> <span data-translate="help_navigation_desc">Use the sidebar tabs to access different sections</span></li>
                                    <li><strong data-translate="help_time_clocks">Time Clocks:</strong> <span data-translate="help_time_desc">Live Zulu, Eastern, Beijing, Moscow, Hawaii, Seoul, and Local time displays</span></li>
                                    <li><strong data-translate="help_copy_dtg">Copy DTG:</strong> <span data-translate="help_copy_desc">Click "Copy Zulu DTG" for military time format</span></li>
                                    <li><strong data-translate="help_shortcuts">Keyboard Shortcuts:</strong> <span data-translate="help_shortcuts_desc">Ctrl+S (save), Ctrl+H (help), Ctrl+M (map)</span></li>
                                </ul>
                            </div>

                            <div class="bg-gray-800 p-4 rounded-lg">
                                <h4 class="text-lg font-semibold text-white mb-3" data-translate="opord_structure">OPORD Sections (FM 6-0)</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <h5 class="font-semibold text-blue-300 mb-2" data-translate="help_main_sections">Main Sections:</h5>
                                        <ul class="list-disc ml-4 space-y-1">
                                            <li><strong data-translate="situation">Situation:</strong> <span data-translate="help_situation_desc">Enemy, friendly, environment (OAKOC), civil considerations</span></li>
                                            <li><strong data-translate="mission">Mission:</strong> <span data-translate="help_mission_desc">Use 5 Ws framework (Who, What, When, Where, Why)</span></li>
                                            <li><strong data-translate="execution">Execution:</strong> <span data-translate="help_execution_desc">Commander's intent, concept of operations, tasks</span></li>
                                            <li><strong data-translate="sustainment">Sustainment:</strong> <span data-translate="help_sustainment_desc">Logistics, personnel, health service support</span></li>
                                            <li><strong data-translate="command_signal">Command & Signal:</strong> <span data-translate="help_command_desc">C2 relationships, communications</span></li>
                                        </ul>
                                    </div>
                                    <div>
                                        <h5 class="font-semibold text-green-300 mb-2" data-translate="help_fm_annexes">FM 6-0 Annexes:</h5>
                                        <ul class="list-disc ml-4 space-y-1">
                                            <li><strong>A:</strong> <span data-translate="help_annex_a_short">Task Organization</span></li>
                                            <li><strong>B:</strong> <span data-translate="help_annex_b_short">Intelligence</span></li>
                                            <li><strong>C:</strong> <span data-translate="help_annex_c_short">Operations</span></li>
                                            <li><strong>D:</strong> <span data-translate="help_annex_d_short">Fires</span></li>
                                            <li><strong>E:</strong> <span data-translate="help_annex_e_short">Protection</span></li>
                                            <li><strong>F:</strong> <span data-translate="help_annex_f_short">Sustainment</span></li>
                                            <li><strong>G:</strong> <span data-translate="help_annex_g_short">Engineer</span></li>
                                            <li><strong>H:</strong> <span data-translate="help_annex_h_short">Signal</span></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-gray-800 p-4 rounded-lg">
                                <h4 class="text-lg font-semibold text-white mb-3" data-translate="help_draft_system">Using the Draft System</h4>
                                <ul class="list-disc ml-6 space-y-2 text-sm">
                                    <li><strong data-translate="help_mission_builder">Mission Builder:</strong> <span data-translate="help_mission_builder_desc">Fill in the 5 Ws, then click "Auto-Generate" for proper format</span></li>
                                    <li><strong data-translate="help_section_input">Section Input:</strong> <span data-translate="help_section_input_desc">Use text areas for each OPORD section</span></li>
                                    <li><strong data-translate="annexes">Annexes:</strong> <span data-translate="help_annexes_desc">Complete all 8 FM 6-0 annexes as needed</span></li>
                                    <li><strong data-translate="help_save_draft">Save Draft:</strong> <span data-translate="help_save_draft_desc">Automatically saves to local storage</span></li>
                                    <li><strong data-translate="help_export">Export:</strong> <span data-translate="help_export_desc">Downloads complete OPORD with all annexes</span></li>
                                </ul>
                            </div>

                            <div class="bg-gray-800 p-4 rounded-lg">
                                <h4 class="text-lg font-semibold text-white mb-3" data-translate="coordinate_systems">Map & Weather Tools</h4>
                                <ul class="list-disc ml-6 space-y-2 text-sm">
                                    <li><strong data-translate="help_coordinate_input">Coordinate Input:</strong> <span data-translate="help_coordinate_desc">Enter MGRS, UTM, or Lat/Long coordinates</span></li>
                                    <li><strong data-translate="help_search_location">Search Location:</strong> <span data-translate="help_search_desc">Find and display location with weather data</span></li>
                                    <li><strong data-translate="help_add_markers">Add Markers:</strong> <span data-translate="help_markers_desc">Place tactical markers on objectives</span></li>
                                    <li><strong data-translate="help_convert_coords">Convert Coordinates:</strong> <span data-translate="help_convert_desc">Switch between coordinate systems</span></li>
                                    <li><strong data-translate="help_saved_locations">Saved Locations:</strong> <span data-translate="help_saved_desc">Save and manage custom locations</span></li>
                                </ul>
                                <div class="mt-4 p-3 bg-gray-700 rounded-lg">
                                    <h5 class="text-white font-semibold mb-2 text-sm" data-translate="help_ref_coords">Reference Coordinate Test Points:</h5>
                                    <div class="space-y-1 text-xs">
                                        <div class="flex justify-between">
                                            <span class="text-purple-300" data-translate="help_taj_mahal">Taj Mahal, India (UTM):</span>
                                            <span class="font-mono text-gray-300">44R 206915 3009291</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-blue-300" data-translate="help_statue_liberty">Statue of Liberty, NY (UTM):</span>
                                            <span class="font-mono text-gray-300">18T 580732 4504719</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-green-300" data-translate="help_eiffel_tower">Eiffel Tower, France (MGRS):</span>
                                            <span class="font-mono text-gray-300">31UDQ4825111932</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-yellow-300" data-translate="help_sydney_opera">Sydney Opera House, Australia (Lat/Long):</span>
                                            <span class="font-mono text-gray-300">-33.856784, 151.215297</span>
                                        </div>
                                    </div>
                                    <p class="text-xs text-gray-400 mt-2" data-translate="help_coords_note">These coordinates are verified reference points for testing coordinate conversion accuracy.</p>
                                </div>
                            </div>

                            <div class="bg-gray-800 p-4 rounded-lg">
                                <h4 class="text-lg font-semibold text-white mb-3" data-translate="help_lsco_considerations">LSCO Considerations</h4>
                                <ul class="list-disc ml-6 space-y-2 text-sm">
                                    <li><strong data-translate="help_multi_domain">Multi-Domain Operations:</strong> <span data-translate="help_multi_domain_desc">Consider cyber, EW, space threats</span></li>
                                    <li><strong data-translate="help_high_consumption">High Consumption:</strong> <span data-translate="help_consumption_desc">Plan for increased ammunition and fuel usage</span></li>
                                    <li><strong data-translate="help_contested_env">Contested Environment:</strong> <span data-translate="help_contested_desc">Assume degraded communications</span></li>
                                    <li><strong data-translate="help_mass_casualties">Mass Casualties:</strong> <span data-translate="help_casualties_desc">Plan for significant medical requirements</span></li>
                                    <li><strong data-translate="help_extended_ops">Extended Operations:</strong> <span data-translate="help_extended_desc">Consider sustainment over time</span></li>
                                </ul>
                            </div>

                            <div class="bg-gray-800 p-4 rounded-lg">
                                <h4 class="text-lg font-semibold text-white mb-3" data-translate="help_tips_success">Tips for Success</h4>
                                <ul class="list-disc ml-6 space-y-2 text-sm">
                                    <li><strong data-translate="help_start_mission">Start with Mission:</strong> <span data-translate="help_start_desc">Clear mission statement drives everything else</span></li>
                                    <li><strong data-translate="help_use_examples">Use Examples:</strong> <span data-translate="help_examples_desc">Click "Example Content" for guidance</span></li>
                                    <li><strong data-translate="help_be_specific">Be Specific:</strong> <span data-translate="help_specific_desc">Include grid coordinates, times, and unit designations</span></li>
                                    <li><strong data-translate="help_check_doctrine">Check Doctrine:</strong> <span data-translate="help_doctrine_desc">All content based on FM 6-0 standards</span></li>
                                    <li><strong data-translate="help_save_often">Save Often:</strong> <span data-translate="help_save_often_desc">Use Ctrl+S or click save buttons regularly</span></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                `;

                document.body.appendChild(modal);

                // Set the help language selector to match current language
                const helpLanguageSelector = document.getElementById('help-language-selector');
                helpLanguageSelector.value = this.currentLanguage;

                // Add language change functionality for Help Guide
                helpLanguageSelector.addEventListener('change', (e) => {
                    const newLanguage = e.target.value;
                    this.currentLanguage = newLanguage;

                    // Update main language selector to match
                    const mainLanguageSelector = document.getElementById('language-selector');
                    if (mainLanguageSelector) {
                        mainLanguageSelector.value = newLanguage;
                    }

                    // Save language preference
                    localStorage.setItem('opord-language', newLanguage);

                    // Translate the Help Guide content
                    this.translatePage();

                    // Show success notification
                    this.showNotification(`Language changed to ${this.getLanguageName(newLanguage)}`, 'success');
                });

                // Translate the Help Guide content immediately
                this.translatePage();

                // Add close functionality
                document.getElementById('close-help-modal').addEventListener('click', () => {
                    modal.remove();
                });

                // Close on backdrop click
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });
            }

            showSnippets() {
                // Create and show snippets modal
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 modal-backdrop flex items-center justify-center z-50';
                modal.innerHTML = `
                    <div class="modal-content rounded-xl p-6 max-w-4xl max-h-[90vh] overflow-y-auto w-full mx-4">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-semibold text-white" data-translate="snippets_library">OPORD Snippets Library</h3>
                            <div class="flex items-center space-x-3">
                                <!-- Language Dropdown for Snippets -->
                                <div class="relative">
                                    <select id="snippets-language-select" class="form-input text-xs px-2 py-1 pr-6 bg-gray-700 border-gray-600 text-white rounded">
                                        <option value="en">🇺🇸 EN</option>
                                        <option value="es">🇪🇸 ES</option>
                                        <option value="fr">🇫🇷 FR</option>
                                        <option value="de">🇩🇪 DE</option>
                                        <option value="ko">🇰🇷 KO</option>
                                    </select>
                                </div>
                                <button id="close-snippets-modal" class="text-gray-400 hover:text-white">
                                    <i class="fas fa-times text-xl"></i>
                                </button>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div class="space-y-4">
                                <div class="bg-gray-800 p-4 rounded-lg">
                                    <h4 class="text-lg font-semibold text-white mb-3" data-translate="mission_statement_templates">Mission Statement Templates</h4>
                                    <div class="space-y-2 text-sm">
                                        <div class="bg-gray-700 p-2 rounded cursor-pointer hover:bg-gray-600" onclick="app.insertSnippet('mission-attack')">
                                            <strong class="text-blue-300">Attack Mission:</strong><br>
                                            <span class="text-gray-300">[Unit] attacks to seize [Objective] NLT [DTG] IOT [Purpose]</span>
                                        </div>
                                        <div class="bg-gray-700 p-2 rounded cursor-pointer hover:bg-gray-600" onclick="app.insertSnippet('mission-defend')">
                                            <strong class="text-green-300">Defend Mission:</strong><br>
                                            <span class="text-gray-300">[Unit] defends [Location] NLT [DTG] IOT [Purpose]</span>
                                        </div>
                                        <div class="bg-gray-700 p-2 rounded cursor-pointer hover:bg-gray-600" onclick="app.insertSnippet('mission-recon')">
                                            <strong class="text-yellow-300">Reconnaissance:</strong><br>
                                            <span class="text-gray-300">[Unit] conducts reconnaissance along [Axis/Area] NLT [DTG] IOT [Purpose]</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-gray-800 p-4 rounded-lg">
                                    <h4 class="text-lg font-semibold text-white mb-3" data-translate="section3_execution_snippets">Section 3: Execution Snippets</h4>
                                    <div class="space-y-2 text-sm">
                                        <div class="bg-gray-700 p-2 rounded cursor-pointer hover:bg-gray-600" onclick="app.insertSnippet('commander-intent')">
                                            <strong class="text-purple-300">Commander's Intent:</strong><br>
                                            <span class="text-gray-300">Purpose: [Why] Method: [How] End State: [What success looks like]</span>
                                        </div>
                                        <div class="bg-gray-700 p-2 rounded cursor-pointer hover:bg-gray-600" onclick="app.insertSnippet('concept-ops')">
                                            <strong class="text-blue-300">Concept of Operations:</strong><br>
                                            <span class="text-gray-300">Phase 1: [Initial actions] Phase 2: [Follow-on actions] Main Effort: [Unit]</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="space-y-4">
                                <div class="bg-gray-800 p-4 rounded-lg">
                                    <h4 class="text-lg font-semibold text-white mb-3" data-translate="section4_sustainment_snippets">Section 4: Sustainment Snippets</h4>
                                    <div class="space-y-2 text-sm">
                                        <div class="bg-gray-700 p-2 rounded cursor-pointer hover:bg-gray-600" onclick="app.insertSnippet('logistics')">
                                            <strong class="text-green-300">Logistics:</strong><br>
                                            <span class="text-gray-300">Class I/III resupply: [Time/Location] Class V: [Procedures] Maintenance: [Support]</span>
                                        </div>
                                        <div class="bg-gray-700 p-2 rounded cursor-pointer hover:bg-gray-600" onclick="app.insertSnippet('medical')">
                                            <strong class="text-red-300">Medical:</strong><br>
                                            <span class="text-gray-300">Role 1: [Unit level] Role 2: [Forward support] MEDEVAC: [Procedures]</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-gray-800 p-4 rounded-lg">
                                    <h4 class="text-lg font-semibold text-white mb-3" data-translate="annexh_signal_snippets">Annex H: Signal Snippets</h4>
                                    <div class="space-y-2 text-sm">
                                        <div class="bg-gray-700 p-2 rounded cursor-pointer hover:bg-gray-600" onclick="app.insertSnippet('pace-plan')">
                                            <strong class="text-yellow-300">PACE Plan:</strong><br>
                                            <span class="text-gray-300">Primary: [Method] Alternate: [Method] Contingency: [Method] Emergency: [Method]</span>
                                        </div>
                                        <div class="bg-gray-700 p-2 rounded cursor-pointer hover:bg-gray-600" onclick="app.insertSnippet('frequencies')">
                                            <strong class="text-blue-300">Frequencies:</strong><br>
                                            <span class="text-gray-300">Command Net: [Freq] Admin/Log Net: [Freq] Fire Support Net: [Freq]</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="space-y-4">
                                <div class="bg-gray-800 p-4 rounded-lg">
                                    <h4 class="text-lg font-semibold text-white mb-3" data-translate="annexa_task_organization_snippets">Annex A: Task Organization</h4>
                                    <div class="space-y-2 text-sm">
                                        <div class="bg-gray-700 p-2 rounded cursor-pointer hover:bg-gray-600" onclick="app.insertSnippet('task-org')">
                                            <strong class="text-orange-300">Task Organization:</strong><br>
                                            <span class="text-gray-300">[Unit] OPCON to [Higher Unit] for [Mission/Phase]</span>
                                        </div>
                                        <div class="bg-gray-700 p-2 rounded cursor-pointer hover:bg-gray-600" onclick="app.insertSnippet('attachments')">
                                            <strong class="text-orange-300">Attachments:</strong><br>
                                            <span class="text-gray-300">Attached: [Unit] from [Parent Unit] / Detached: [Unit] to [Receiving Unit]</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-gray-800 p-4 rounded-lg">
                                    <h4 class="text-lg font-semibold text-white mb-3" data-translate="annexd_fires_snippets">Annex D: Fires</h4>
                                    <div class="space-y-2 text-sm">
                                        <div class="bg-gray-700 p-2 rounded cursor-pointer hover:bg-gray-600" onclick="app.insertSnippet('fire-support')">
                                            <strong class="text-red-300">Fire Support:</strong><br>
                                            <span class="text-gray-300">Priority of Fires: [Unit] / FSCMs: [Boundaries/Restrictions] / CAS: [Procedures]</span>
                                        </div>
                                        <div class="bg-gray-700 p-2 rounded cursor-pointer hover:bg-gray-600" onclick="app.insertSnippet('target-list')">
                                            <strong class="text-red-300">Target List:</strong><br>
                                            <span class="text-gray-300">TGT [Number]: [Grid] [Description] [Munition] [Priority]</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-gray-800 p-4 rounded-lg border-2 border-blue-500">
                                    <div class="flex justify-between items-center mb-3">
                                        <h4 class="text-lg font-semibold text-white" data-translate="custom_snippets">Custom Snippets</h4>
                                        <button class="btn-primary px-3 py-1 text-xs" onclick="app.addCustomSnippet()">
                                            <i class="fas fa-plus mr-1"></i>Add New
                                        </button>
                                    </div>
                                    <div id="custom-snippets-list" class="space-y-2 text-sm">
                                        <!-- Custom snippets will be loaded here -->
                                    </div>
                                    <div id="no-custom-snippets" class="text-center text-gray-500 py-4">
                                        <i class="fas fa-info-circle mr-2"></i>
                                        No custom snippets yet. Click "Add New" to create your own reusable text templates.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

                document.body.appendChild(modal);

                // Set current language in dropdown
                const languageSelect = document.getElementById('snippets-language-select');
                languageSelect.value = this.currentLanguage;

                // Add language change functionality
                languageSelect.addEventListener('change', (e) => {
                    const newLanguage = e.target.value;
                    this.currentLanguage = newLanguage;

                    // Update main language selector to match
                    const mainLanguageSelector = document.getElementById('language-selector');
                    if (mainLanguageSelector) {
                        mainLanguageSelector.value = newLanguage;
                    }

                    // Save language preference
                    localStorage.setItem('opord-language', newLanguage);

                    // Translate the page and snippets
                    this.translatePage();
                    this.updateSnippetsTranslations();

                    // Show notification
                    this.showNotification(`Language changed to ${this.getLanguageName(newLanguage)}`, 'success');
                });

                // Add close functionality
                document.getElementById('close-snippets-modal').addEventListener('click', () => {
                    modal.remove();
                });

                // Close on backdrop click
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });

                // Load custom snippets
                this.loadCustomSnippets();

                // Apply initial translations
                this.updateSnippetsTranslations();
            }

            updateSnippetsTranslations() {
                // Update all translatable elements in the snippets modal
                const modal = document.querySelector('.fixed.inset-0.modal-backdrop');
                if (!modal) return;

                const elements = modal.querySelectorAll('[data-translate]');
                elements.forEach(element => {
                    const key = element.getAttribute('data-translate');
                    const translation = this.getTranslation(key);
                    if (translation) {
                        element.textContent = translation;
                    }
                });
            }

            insertSnippet(type) {
                const snippets = {
                    'mission-attack': '[Unit] attacks to seize [Objective] NLT [DTG] in order to [Purpose]',
                    'mission-defend': '[Unit] defends [Location] NLT [DTG] in order to [Purpose]',
                    'mission-recon': '[Unit] conducts reconnaissance along [Axis/Area] NLT [DTG] in order to [Purpose]',
                    'commander-intent': 'Purpose: [Why this operation is being conducted]\nMethod: [How the unit will accomplish the mission]\nEnd State: [Conditions that define mission success]',
                    'concept-ops': 'Phase 1: [Initial actions and timeline]\nPhase 2: [Follow-on actions]\nMain Effort: [Unit receiving priority]\nReserve: [Uncommitted forces]',
                    'logistics': 'Class I/III resupply: [Time and location]\nClass V: [Ammunition resupply procedures]\nMaintenance: [Support arrangements]\nTransportation: [Movement procedures]',
                    'medical': 'Role 1: [Unit level medical care]\nRole 2: [Forward support medical care]\nMEDEVAC: [Evacuation procedures and timelines]\nCasualty Collection: [Procedures]',
                    'pace-plan': 'Primary: [Primary communication method]\nAlternate: [Alternate method]\nContingency: [Contingency method]\nEmergency: [Emergency method]',
                    'frequencies': 'Command Net: [Frequency] MHz\nAdmin/Log Net: [Frequency] MHz\nFire Support Net: [Frequency] MHz\nCall Signs: [Unit call signs]',
                    'task-org': '[Unit] OPCON to [Higher Unit] for [Mission/Phase]\nAttached: [Supporting units]\nDetached: [Units sent to support others]\nDirect Support: [DS relationships]',
                    'attachments': 'Attached: [Unit] from [Parent Unit] effective [DTG]\nDetached: [Unit] to [Receiving Unit] effective [DTG]\nRevert: [Reversion instructions and timing]',
                    'fire-support': 'Priority of Fires: [Unit receiving priority]\nFSCMs: [Fire support coordination measures]\nCAS: [Close air support procedures]\nTargets: [High priority targets]',
                    'target-list': 'TGT [Number]: [Grid coordinates] [Target description] [Munition type] [Priority level]\nTGT [Number]: [Grid coordinates] [Target description] [Munition type] [Priority level]'
                };

                // Map snippet types to their corresponding form fields
                const fieldMapping = {
                    'mission-attack': 'mission-statement',
                    'mission-defend': 'mission-statement',
                    'mission-recon': 'mission-statement',
                    'commander-intent': 'draft-commanders-intent',
                    'concept-ops': 'draft-concept-operations',
                    'logistics': 'draft-sustainment',
                    'medical': 'draft-sustainment',
                    'pace-plan': 'draft-annex-h',
                    'frequencies': 'draft-annex-h',
                    'task-org': 'draft-annex-a',
                    'attachments': 'draft-annex-a',
                    'fire-support': 'draft-annex-d',
                    'target-list': 'draft-annex-d'
                };

                const snippet = snippets[type];
                const fieldId = fieldMapping[type];

                if (snippet && fieldId) {
                    // Check if we're in the Draft OPORD tab, if not switch to it
                    if (this.currentTab !== 'draft') {
                        this.switchTab('draft');
                        // Wait a moment for the tab to load
                        setTimeout(() => {
                            this.fillSnippetField(fieldId, snippet, type);
                        }, 300);
                    } else {
                        this.fillSnippetField(fieldId, snippet, type);
                    }
                } else if (snippet) {
                    // Fallback to clipboard copy for unmapped snippets
                    navigator.clipboard.writeText(snippet).then(() => {
                        this.showNotification('Snippet copied to clipboard!', 'success');
                    }).catch(() => {
                        this.showNotification('Failed to copy snippet', 'error');
                    });
                }
            }

            fillSnippetField(fieldId, snippet, type) {
                const field = document.getElementById(fieldId);

                if (!field) {
                    // Field not found, fallback to clipboard
                    navigator.clipboard.writeText(snippet).then(() => {
                        this.showNotification('Field not found. Snippet copied to clipboard!', 'warning');
                    }).catch(() => {
                        this.showNotification('Failed to copy snippet', 'error');
                    });
                    return;
                }

                // Check if field already has content
                const currentContent = field.value.trim();

                if (currentContent) {
                    // Ask user if they want to append or replace
                    const action = confirm('This field already has content. Click OK to append the snippet, or Cancel to replace the existing content.');

                    if (action) {
                        // Append with proper spacing
                        field.value = currentContent + '\n\n' + snippet;
                    } else {
                        // Replace content
                        field.value = snippet;
                    }
                } else {
                    // Field is empty, just insert
                    field.value = snippet;
                }

                // Trigger form change event to update progress
                this.handleFormChange({ target: field });

                // Close the snippets modal
                const modal = document.querySelector('.fixed.inset-0.modal-backdrop');
                if (modal) {
                    modal.remove();
                }

                // Show success notification with field name
                const fieldNames = {
                    'mission-statement': 'Mission Statement',
                    'draft-commanders-intent': 'Commander\'s Intent',
                    'draft-concept-operations': 'Concept of Operations',
                    'subordinate-units-container': 'Tasks to Subordinate Units',
                    'draft-tasks-staff': 'Tasks to Staff',
                    'draft-sustainment': 'Sustainment Section',
                    'draft-annex-h': 'Annex H: Signal',
                    'draft-annex-a': 'Annex A: Task Organization',
                    'draft-annex-d': 'Annex D: Fires'
                };

                const fieldName = fieldNames[fieldId] || 'form field';
                this.showNotification(`Snippet added to ${fieldName}!`, 'success');

                // Scroll to and highlight the field
                setTimeout(() => {
                    field.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    field.focus();

                    // Brief highlight effect
                    field.style.boxShadow = '0 0 10px #3b82f6';
                    setTimeout(() => {
                        field.style.boxShadow = '';
                    }, 2000);
                }, 500);
            }

            loadCustomSnippets() {
                const customSnippets = JSON.parse(localStorage.getItem('opord-custom-snippets') || '[]');
                const listContainer = document.getElementById('custom-snippets-list');
                const noSnippetsMsg = document.getElementById('no-custom-snippets');

                if (!listContainer) return;

                if (customSnippets.length === 0) {
                    listContainer.innerHTML = '';
                    if (noSnippetsMsg) noSnippetsMsg.style.display = 'block';
                    return;
                }

                if (noSnippetsMsg) noSnippetsMsg.style.display = 'none';

                listContainer.innerHTML = customSnippets.map((snippet, index) => `
                    <div class="bg-gray-700 p-2 rounded hover:bg-gray-600 group">
                        <div class="flex justify-between items-start">
                            <div class="flex-1 cursor-pointer" onclick="app.insertCustomSnippet(${index})">
                                <strong class="text-cyan-300">${snippet.name}:</strong><br>
                                <span class="text-gray-300 text-xs">${snippet.content.substring(0, 100)}${snippet.content.length > 100 ? '...' : ''}</span>
                            </div>
                            <div class="flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity">
                                <button class="text-blue-400 hover:text-blue-300 text-xs" onclick="app.editCustomSnippet(${index})" title="Edit">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="text-red-400 hover:text-red-300 text-xs" onclick="app.deleteCustomSnippet(${index})" title="Delete">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            addCustomSnippet() {
                const name = prompt('Enter snippet name (e.g., "Unit SOP", "ROE Template"):');
                if (!name || !name.trim()) return;

                const content = prompt('Enter snippet content:');
                if (!content || !content.trim()) return;

                const customSnippets = JSON.parse(localStorage.getItem('opord-custom-snippets') || '[]');
                customSnippets.push({
                    name: name.trim(),
                    content: content.trim(),
                    created: new Date().toISOString()
                });

                localStorage.setItem('opord-custom-snippets', JSON.stringify(customSnippets));
                this.loadCustomSnippets();
                this.showNotification('Custom snippet added successfully!', 'success');
            }

            editCustomSnippet(index) {
                const customSnippets = JSON.parse(localStorage.getItem('opord-custom-snippets') || '[]');
                if (index < 0 || index >= customSnippets.length) return;

                const snippet = customSnippets[index];
                const newName = prompt('Edit snippet name:', snippet.name);
                if (newName === null) return; // User cancelled

                const newContent = prompt('Edit snippet content:', snippet.content);
                if (newContent === null) return; // User cancelled

                if (!newName.trim() || !newContent.trim()) {
                    this.showNotification('Name and content cannot be empty', 'error');
                    return;
                }

                customSnippets[index] = {
                    ...snippet,
                    name: newName.trim(),
                    content: newContent.trim(),
                    modified: new Date().toISOString()
                };

                localStorage.setItem('opord-custom-snippets', JSON.stringify(customSnippets));
                this.loadCustomSnippets();
                this.showNotification('Custom snippet updated successfully!', 'success');
            }

            deleteCustomSnippet(index) {
                const customSnippets = JSON.parse(localStorage.getItem('opord-custom-snippets') || '[]');
                if (index < 0 || index >= customSnippets.length) return;

                const snippet = customSnippets[index];
                if (!confirm(`Delete snippet "${snippet.name}"?`)) return;

                customSnippets.splice(index, 1);
                localStorage.setItem('opord-custom-snippets', JSON.stringify(customSnippets));
                this.loadCustomSnippets();
                this.showNotification('Custom snippet deleted successfully!', 'success');
            }

            insertCustomSnippet(index) {
                const customSnippets = JSON.parse(localStorage.getItem('opord-custom-snippets') || '[]');
                if (index < 0 || index >= customSnippets.length) return;

                const snippet = customSnippets[index];
                navigator.clipboard.writeText(snippet.content).then(() => {
                    this.showNotification(`"${snippet.name}" copied to clipboard!`, 'success');
                }).catch(() => {
                    this.showNotification('Failed to copy snippet', 'error');
                });
            }

            insertCurrentLocation() {
                const coordInput = document.getElementById('coord-input');
                const coordSystem = document.getElementById('coord-system');
                const tacticalField = document.getElementById('tactical-coordinates');

                if (!tacticalField) {
                    this.showNotification('Tactical coordinates field not found', 'error');
                    return;
                }

                if (!coordInput || !coordInput.value.trim()) {
                    this.showNotification('No current location set. Please search for a location first.', 'warning');
                    return;
                }

                const coordinates = coordInput.value.trim();
                const system = coordSystem ? coordSystem.value.toUpperCase() : 'MGRS';
                const locationName = prompt('Enter location name (e.g., "OBJ ALPHA", "CP BRAVO"):');

                if (!locationName || !locationName.trim()) {
                    this.showNotification('Location name is required', 'warning');
                    return;
                }

                const locationEntry = `${locationName.trim()}: ${coordinates} (${system})`;

                // Add to existing content
                const currentContent = tacticalField.value;
                const newContent = currentContent ? `${currentContent}\n${locationEntry}` : locationEntry;
                tacticalField.value = newContent;

                // Trigger form change event to update progress
                this.handleFormChange({ target: tacticalField });

                this.showNotification(`Location "${locationName}" added to tactical coordinates`, 'success');
            }

            insertSavedLocations() {
                const savedLocations = JSON.parse(localStorage.getItem('opord-saved-locations') || '[]');
                const tacticalField = document.getElementById('tactical-coordinates');

                if (!tacticalField) {
                    this.showNotification('Tactical coordinates field not found', 'error');
                    return;
                }

                if (savedLocations.length === 0) {
                    this.showNotification('No saved locations found. Save some locations first.', 'warning');
                    return;
                }

                // Create selection modal
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                modal.innerHTML = `
                    <div class="bg-gray-800 p-6 rounded-lg max-w-md w-full mx-4 max-h-96 overflow-y-auto">
                        <h3 class="text-lg font-semibold text-white mb-4">Select Saved Locations</h3>
                        <div class="space-y-2 mb-4">
                            ${savedLocations.map((location, index) => `
                                <label class="flex items-center space-x-2 text-gray-300 hover:text-white cursor-pointer">
                                    <input type="checkbox" class="location-checkbox" data-index="${index}" class="form-checkbox">
                                    <span class="text-sm">
                                        <strong>${location.name}</strong><br>
                                        <span class="text-xs text-gray-400">${location.coordinates} (${location.system})</span>
                                    </span>
                                </label>
                            `).join('')}
                        </div>
                        <div class="flex space-x-3">
                            <button class="btn-primary flex-1" onclick="app.addSelectedLocations()">Add Selected</button>
                            <button class="btn-secondary flex-1" onclick="this.closest('.fixed').remove()">Cancel</button>
                        </div>
                    </div>
                `;

                document.body.appendChild(modal);

                // Close on backdrop click
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });
            }

            addSelectedLocations() {
                const checkboxes = document.querySelectorAll('.location-checkbox:checked');
                const savedLocations = JSON.parse(localStorage.getItem('opord-saved-locations') || '[]');
                const tacticalField = document.getElementById('tactical-coordinates');

                if (checkboxes.length === 0) {
                    this.showNotification('No locations selected', 'warning');
                    return;
                }

                const selectedEntries = Array.from(checkboxes).map(checkbox => {
                    const index = parseInt(checkbox.dataset.index);
                    const location = savedLocations[index];
                    return `${location.name}: ${location.coordinates} (${location.system})`;
                });

                // Add to existing content
                const currentContent = tacticalField.value;
                const newContent = currentContent ?
                    `${currentContent}\n${selectedEntries.join('\n')}` :
                    selectedEntries.join('\n');

                tacticalField.value = newContent;

                // Trigger form change event to update progress
                this.handleFormChange({ target: tacticalField });

                // Close modal
                document.querySelector('.fixed.inset-0').remove();

                this.showNotification(`${selectedEntries.length} location(s) added to tactical coordinates`, 'success');
            }

            addToOPORD() {
                const coordInput = document.getElementById('coord-input');
                const coordSystem = document.getElementById('coord-system');
                const tacticalField = document.getElementById('tactical-coordinates');

                // Check if we're in the Draft OPORD tab, if not switch to it
                if (this.currentTab !== 'draft') {
                    this.switchTab('draft');
                }

                if (!tacticalField) {
                    this.showNotification('Please go to Draft OPORD tab first', 'warning');
                    return;
                }

                if (!coordInput || !coordInput.value.trim()) {
                    this.showNotification('No location set. Please search for a location first.', 'warning');
                    return;
                }

                const coordinates = coordInput.value.trim();
                const system = coordSystem ? coordSystem.value.toUpperCase() : 'MGRS';

                // Simple prompt for location name
                const locationName = prompt('Enter location name (e.g., "OBJ ALPHA", "CP BRAVO", "LZ CHARLIE"):');

                if (!locationName || !locationName.trim()) {
                    return; // User cancelled or didn't enter a name
                }

                // Collect weather information
                const weatherData = this.collectWeatherData();

                // Capture map image and add to OPORD with weather
                this.captureMapAndAddToOPORD(locationName.trim(), coordinates, system, tacticalField, weatherData);
            }

            collectWeatherData() {
                // Collect current weather and forecast data from the mapping interface
                const weatherInfo = document.getElementById('weather-info');
                const tacticalInfo = document.getElementById('tactical-info');
                const forecastInfo = document.getElementById('forecast-info');

                let weatherSummary = '';

                // Current weather - extract structured data
                if (weatherInfo && weatherInfo.textContent.trim() !== '') {
                    const weatherText = weatherInfo.textContent.replace(/\s+/g, ' ').trim();
                    if (!weatherText.includes('--°F') && !weatherText.includes('--°C')) {
                        // Parse weather data for proper formatting
                        const tempMatch = weatherText.match(/Temp:\s*([^°]+°[FC])/);
                        const visMatch = weatherText.match(/Vis:\s*([^W]+)/);
                        const windMatch = weatherText.match(/Wind:\s*([^C]+)/);
                        const condMatch = weatherText.match(/Cond:\s*(.+)/);

                        weatherSummary += `c. Environment:\n`;
                        weatherSummary += `   (1) Weather:\n`;
                        if (tempMatch) weatherSummary += `       Temperature: ${tempMatch[1].trim()}\n`;
                        if (visMatch) weatherSummary += `       Visibility: ${visMatch[1].trim()}\n`;
                        if (windMatch) weatherSummary += `       Wind: ${windMatch[1].trim()}\n`;
                        if (condMatch) weatherSummary += `       Conditions: ${condMatch[1].trim()}\n`;
                    }
                }

                // Tactical data - format as military time data
                if (tacticalInfo && tacticalInfo.textContent.trim() !== '') {
                    const tacticalText = tacticalInfo.textContent.replace(/\s+/g, ' ').trim();
                    if (!tacticalText.includes('--:--Z')) {
                        const bmntMatch = tacticalText.match(/BMNT:\s*([^M]+)/);
                        const eentMatch = tacticalText.match(/EENT:\s*([^R]+)/);
                        const moonMatch = tacticalText.match(/Moon:\s*([^%]+%)/);
                        const riseMatch = tacticalText.match(/Rise:\s*(.+)/);

                        if (!weatherSummary.includes('c. Environment:')) {
                            weatherSummary += `c. Environment:\n`;
                        }
                        weatherSummary += `   (2) Light Data:\n`;
                        if (bmntMatch) weatherSummary += `       BMNT: ${bmntMatch[1].trim()}\n`;
                        if (eentMatch) weatherSummary += `       EENT: ${eentMatch[1].trim()}\n`;
                        if (riseMatch) weatherSummary += `       Sunrise: ${riseMatch[1].trim()}\n`;
                        if (moonMatch) weatherSummary += `       Moon Phase: ${moonMatch[1].trim()}\n`;
                    }
                }

                // 3-day forecast - format as operational weather
                if (forecastInfo && forecastInfo.children.length > 0) {
                    let forecastText = '';
                    Array.from(forecastInfo.children).forEach((dayElement, index) => {
                        const dayText = dayElement.textContent.replace(/\s+/g, ' ').trim();
                        if (!dayText.includes('--°/--°')) {
                            // Parse forecast data
                            const parts = dayText.split(/\s+/);
                            const dayName = parts[0] || `Day ${index + 1}`;
                            const date = parts[1] || '';
                            const tempMatch = dayText.match(/(\d+°[FC]\/\d+°[FC])/);
                            const condMatch = dayText.match(/[🌤️☀️⛅☁️🌦️🌧️⛈️🌩️❄️]\s*([a-zA-Z\s]+)\s*\d+/);

                            if (index === 0) {
                                if (!weatherSummary.includes('c. Environment:')) {
                                    weatherSummary += `c. Environment:\n`;
                                }
                                forecastText += `   (3) Forecast:\n`;
                            }

                            const displayDay = index === 0 ? 'Today' : index === 1 ? 'Tomorrow' : dayName;
                            forecastText += `       ${displayDay}`;
                            if (date) forecastText += ` (${date})`;
                            if (tempMatch) forecastText += `: ${tempMatch[1]}`;
                            if (condMatch) forecastText += `, ${condMatch[1].trim()}`;
                            forecastText += `\n`;
                        }
                    });
                    if (forecastText) {
                        weatherSummary += forecastText;
                    }
                }

                return weatherSummary.trim() || null;
            }

            async captureMapAndAddToOPORD(locationName, coordinates, system, tacticalField, weatherData = null) {
                try {
                    // Show capturing message
                    this.showNotification('Capturing map image...', 'info');

                    // Capture the map as an image
                    const mapImage = await this.captureMapImage();

                    // Store the map image data
                    if (!this.mapImages) {
                        this.mapImages = [];
                    }

                    const mapEntry = {
                        name: locationName,
                        coordinates: coordinates,
                        system: system,
                        image: mapImage,
                        timestamp: new Date().toISOString()
                    };

                    this.mapImages.push(mapEntry);

                    // Add text entry to tactical coordinates
                    const locationEntry = `${locationName}: ${coordinates} (${system})`;
                    const currentContent = tacticalField.value;
                    const newContent = currentContent ? `${currentContent}\n${locationEntry}` : locationEntry;
                    tacticalField.value = newContent;

                    // Add weather data to situation field if available
                    if (weatherData) {
                        const situationField = document.getElementById('draft-situation');
                        if (situationField) {
                            const currentSituation = situationField.value;

                            // Format weather data with proper military structure
                            let weatherSection = '';
                            if (currentSituation && currentSituation.trim()) {
                                // Check if situation already has environment section
                                if (currentSituation.includes('c. Environment:')) {
                                    // Append to existing environment section
                                    weatherSection = `\n\n   Weather data for ${locationName}:\n${weatherData.replace(/c\. Environment:\n/, '')}`;
                                } else {
                                    // Add as new environment section
                                    weatherSection = `\n\n${weatherData}`;
                                }
                            } else {
                                // Start with weather data
                                weatherSection = weatherData;
                            }

                            situationField.value = currentSituation ? `${currentSituation}${weatherSection}` : weatherSection;
                            this.handleFormChange({ target: situationField });
                        }
                    }

                    // Trigger form change event to update progress
                    this.handleFormChange({ target: tacticalField });

                    // Show success message
                    const message = weatherData ?
                        `"${locationName}" added to OPORD with map image and weather data` :
                        `"${locationName}" added to OPORD with map image`;
                    this.showNotification(message, 'success');

                    // Scroll to the tactical coordinates field
                    setTimeout(() => {
                        tacticalField.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        tacticalField.focus();
                    }, 500);

                } catch (error) {
                    console.error('Error capturing map:', error);

                    // Fallback: add coordinates without image
                    const locationEntry = `${locationName}: ${coordinates} (${system})`;
                    const currentContent = tacticalField.value;
                    const newContent = currentContent ? `${currentContent}\n${locationEntry}` : locationEntry;
                    tacticalField.value = newContent;

                    // Add weather data to situation field if available
                    if (weatherData) {
                        const situationField = document.getElementById('draft-situation');
                        if (situationField) {
                            const currentSituation = situationField.value;

                            // Format weather data with proper military structure
                            let weatherSection = '';
                            if (currentSituation && currentSituation.trim()) {
                                // Check if situation already has environment section
                                if (currentSituation.includes('c. Environment:')) {
                                    // Append to existing environment section
                                    weatherSection = `\n\n   Weather data for ${locationName}:\n${weatherData.replace(/c\. Environment:\n/, '')}`;
                                } else {
                                    // Add as new environment section
                                    weatherSection = `\n\n${weatherData}`;
                                }
                            } else {
                                // Start with weather data
                                weatherSection = weatherData;
                            }

                            situationField.value = currentSituation ? `${currentSituation}${weatherSection}` : weatherSection;
                            this.handleFormChange({ target: situationField });
                        }
                    }

                    this.handleFormChange({ target: tacticalField });
                    const message = weatherData ?
                        `"${locationName}" added to OPORD with weather data (map capture failed)` :
                        `"${locationName}" added to OPORD (map capture failed)`;
                    this.showNotification(message, 'warning');
                }
            }

            async captureMapImage() {
                return new Promise((resolve, reject) => {
                    if (!this.map) {
                        reject(new Error('No map available to capture'));
                        return;
                    }

                    try {
                        // Use leaflet-image library if available, otherwise use html2canvas approach
                        if (window.leafletImage) {
                            window.leafletImage(this.map, (err, canvas) => {
                                if (err) {
                                    reject(err);
                                    return;
                                }
                                resolve(canvas.toDataURL('image/png'));
                            });
                        } else {
                            // Fallback: capture the map container
                            const mapContainer = document.getElementById('leaflet-map');
                            if (!mapContainer) {
                                reject(new Error('Map container not found'));
                                return;
                            }

                            // Use html2canvas if available
                            if (window.html2canvas) {
                                window.html2canvas(mapContainer, {
                                    useCORS: true,
                                    allowTaint: true,
                                    scale: 1,
                                    width: mapContainer.offsetWidth,
                                    height: mapContainer.offsetHeight
                                }).then(canvas => {
                                    resolve(canvas.toDataURL('image/png'));
                                }).catch(reject);
                            } else {
                                // Simple canvas capture as fallback
                                const canvas = document.createElement('canvas');
                                const ctx = canvas.getContext('2d');
                                canvas.width = 400;
                                canvas.height = 300;

                                // Draw a simple map placeholder
                                ctx.fillStyle = '#2d3748';
                                ctx.fillRect(0, 0, canvas.width, canvas.height);
                                ctx.fillStyle = '#4a5568';
                                ctx.fillRect(10, 10, canvas.width - 20, canvas.height - 20);

                                // Add text
                                ctx.fillStyle = '#ffffff';
                                ctx.font = '16px Arial';
                                ctx.textAlign = 'center';
                                ctx.fillText('Map Image', canvas.width / 2, canvas.height / 2 - 10);
                                ctx.fillText('(Capture not available)', canvas.width / 2, canvas.height / 2 + 10);

                                resolve(canvas.toDataURL('image/png'));
                            }
                        }
                    } catch (error) {
                        reject(error);
                    }
                });
            }

            clearDraft() {
                // Check if there's any content to save
                const hasContent = this.checkForDraftContent();

                if (hasContent) {
                    // Ask if user wants to save before clearing
                    const saveFirst = confirm('You have unsaved content. Would you like to save your draft before clearing?');
                    if (saveFirst) {
                        this.saveDraft();
                    }
                }

                // Confirm clearing
                const confirmClear = confirm('Are you sure you want to clear all draft content? This cannot be undone.');
                if (confirmClear) {
                    this.performClearDraft();
                    this.showNotification('Draft cleared successfully!', 'success');
                }
            }

            checkForDraftContent() {
                // Check all form fields for content
                const fieldIds = [
                    'mission-who', 'mission-what', 'mission-when', 'mission-where', 'mission-why',
                    'mission-statement', 'draft-situation', 'tactical-coordinates',
                    'draft-commanders-intent', 'draft-concept-operations', 'draft-tasks-staff',
                    'draft-sustainment', 'draft-command', 'draft-annex-a', 'draft-annex-b',
                    'draft-annex-c', 'draft-annex-d', 'draft-annex-e', 'draft-annex-f',
                    'draft-annex-g', 'draft-annex-h', 'annex-k', 'annex-l', 'annex-misc'
                ];

                for (const fieldId of fieldIds) {
                    const field = document.getElementById(fieldId);
                    if (field && field.value && field.value.trim().length > 0) {
                        return true;
                    }
                }

                // Also check for subordinate units data
                try {
                    const hasSubordinateUnits = window.getSubordinateUnitsData && window.getSubordinateUnitsData().length > 0;
                    if (hasSubordinateUnits) {
                        return true;
                    }
                } catch (error) {
                    console.log('Subordinate units check not available yet');
                }

                return false;
            }

            performClearDraft() {
                try {
                    // Clear all form fields
                    const fieldIds = [
                        'mission-who', 'mission-what', 'mission-when', 'mission-where', 'mission-why',
                        'mission-statement', 'draft-situation', 'tactical-coordinates',
                        'draft-commanders-intent', 'draft-concept-operations', 'draft-tasks-staff',
                        'draft-sustainment', 'draft-command', 'draft-annex-a', 'draft-annex-b',
                        'draft-annex-c', 'draft-annex-d', 'draft-annex-e', 'draft-annex-f',
                        'draft-annex-g', 'draft-annex-h', 'annex-k', 'annex-l', 'annex-misc'
                    ];

                    fieldIds.forEach(fieldId => {
                        const field = document.getElementById(fieldId);
                        if (field) {
                            field.value = '';
                        }
                    });

                    // Clear subordinate units
                    const subordinateContainer = document.getElementById('subordinate-units-container');
                    if (subordinateContainer) {
                        subordinateContainer.innerHTML = '';
                        // Re-initialize with default units
                        setTimeout(() => {
                            if (window.initializeSubordinateUnits) {
                                window.initializeSubordinateUnits();
                            }
                        }, 100);
                    }

                    // Clear saved draft from localStorage
                    localStorage.removeItem('opord-draft');

                    // Update progress
                    this.updateProgress();

                    console.log('Draft cleared successfully');
                } catch (error) {
                    console.error('Error clearing draft:', error);
                    this.showNotification('Error clearing draft', 'error');
                }
            }

            openMapModal() {
                // Create and show map modal
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 modal-backdrop flex items-center justify-center z-50';
                modal.innerHTML = `
                    <div class="modal-content rounded-xl p-6 max-w-6xl max-h-[90vh] overflow-y-auto w-full mx-4">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-semibold text-white" data-translate="enhanced_map_weather">Enhanced Map & Weather Integration</h3>
                            <div class="flex items-center space-x-3">
                                <!-- Language Dropdown for Mapping -->
                                <div class="relative">
                                    <select id="mapping-language-select" class="form-input text-xs px-2 py-1 pr-6 bg-gray-700 border-gray-600 text-white rounded">
                                        <option value="en">🇺🇸 EN</option>
                                        <option value="es">🇪🇸 ES</option>
                                        <option value="fr">🇫🇷 FR</option>
                                        <option value="de">🇩🇪 DE</option>
                                        <option value="ko">🇰🇷 KO</option>
                                    </select>
                                </div>
                                <button id="close-map-modal" class="text-gray-400 hover:text-white">
                                    <i class="fas fa-times text-xl"></i>
                                </button>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 lg:grid-cols-4 gap-4 mb-4">
                            <div>
                                <label class="block text-sm text-gray-300 mb-1" data-translate="enter_coordinates">Enter Coordinates</label>
                                <input type="text" id="coord-input" class="form-input w-full p-2 text-sm" data-translate-placeholder="coord_placeholder_mgrs" placeholder="e.g., 32S 0123456 1234567">
                            </div>
                            <div>
                                <label class="block text-sm text-gray-300 mb-1" data-translate="coordinate_system">Coordinate System</label>
                                <select id="coord-system" class="form-input w-full p-2 text-sm">
                                    <option value="mgrs">MGRS</option>
                                    <option value="utm">UTM</option>
                                    <option value="latlon">Lat/Long</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm text-gray-300 mb-1" data-translate="weather_units">Weather Units</label>
                                <select id="weather-units" class="form-input w-full p-2 text-sm">
                                    <option value="imperial" data-translate="imperial_units">Imperial (°F)</option>
                                    <option value="metric" data-translate="metric_units">Metric (°C)</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm text-gray-300 mb-1" data-translate="execute_search">Execute Search</label>
                                <button class="btn-primary w-full px-4 py-2 text-sm" onclick="app.searchLocation()">
                                    <i class="fas fa-search mr-2"></i><span data-translate="search_location">Search Location</span>
                                </button>
                            </div>
                        </div>
                        <div class="h-96 bg-gray-700 rounded-lg mb-4 relative border-2 border-gray-600">
                            <div id="map-display" class="w-full h-full rounded-lg relative overflow-hidden">
                                <div id="map-placeholder" class="w-full h-full flex items-center justify-center text-center text-gray-300">
                                    <div>
                                        <i class="fas fa-map-marked-alt text-6xl mb-4 text-blue-400"></i>
                                        <p class="text-lg font-semibold mb-2" data-translate="tactical_map_interface">Tactical Map Interface</p>
                                        <p class="text-sm mb-4" data-translate="enter_coords_above">Enter coordinates above and click "Search Location"</p>
                                        <div class="space-x-2">
                                            <button class="btn-primary px-4 py-2 text-sm" onclick="app.searchLocation()">
                                                <i class="fas fa-search mr-2"></i><span data-translate="search_location">Search Location</span>
                                            </button>
                                            <button class="btn-secondary px-4 py-2 text-sm" onclick="app.addMarker()">
                                                <i class="fas fa-map-pin mr-2"></i><span data-translate="add_marker">Add Marker</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="map-overlay" class="absolute top-2 right-2 bg-gray-900 bg-opacity-90 p-3 rounded-lg text-xs text-white border border-gray-600" style="display: none;">
                                <div class="space-y-1">
                                    <div><strong>Grid:</strong> <span id="current-grid">--</span></div>
                                    <div><strong>Elevation:</strong> <span id="current-elevation">-- m</span></div>
                                    <div><strong>System:</strong> <span id="current-system">--</span></div>
                                </div>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div class="bg-gray-800 p-3 rounded-lg">
                                <div class="flex justify-between items-center mb-2">
                                    <h6 class="text-white font-semibold text-sm" data-translate="saved_locations">Saved Locations</h6>
                                    <button class="btn-primary px-2 py-1 text-xs" onclick="app.saveCurrentLocation()">
                                        <i class="fas fa-save mr-1"></i><span data-translate="save_current">Save Current</span>
                                    </button>
                                </div>
                                <div id="saved-locations" class="text-gray-300 text-xs space-y-1 max-h-32 overflow-y-auto">
                                    <div class="text-center text-gray-500 py-2">
                                        <i class="fas fa-info-circle mr-1"></i>
                                        No saved locations yet. Use "Save Current" to add locations.
                                    </div>
                                </div>
                            </div>
                            <div class="bg-gray-800 p-3 rounded-lg">
                                <h6 class="text-white font-semibold mb-2 text-sm" data-translate="coordinate_tools">Coordinate Tools</h6>
                                <div class="space-y-2">
                                    <button class="bg-green-600 hover:bg-green-700 text-white w-full px-2 py-1 text-xs rounded font-semibold" onclick="app.addToOPORD()">
                                        <i class="fas fa-plus mr-1"></i><span data-translate="add_to_opord">Add to OPORD</span>
                                    </button>
                                    <button class="btn-secondary w-full px-2 py-1 text-xs" onclick="app.convertCoordinates()">
                                        <i class="fas fa-exchange-alt mr-1"></i><span data-translate="convert_format">Convert Format</span>
                                    </button>
                                    <button class="btn-secondary w-full px-2 py-1 text-xs" onclick="app.copyCoordinates()">
                                        <i class="fas fa-copy mr-1"></i><span data-translate="copy_to_clipboard">Copy to Clipboard</span>
                                    </button>
                                    <button class="btn-secondary w-full px-2 py-1 text-xs" onclick="app.clearSavedLocations()">
                                        <i class="fas fa-trash mr-1"></i><span data-translate="clear_saved">Clear Saved</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <!-- Compact Weather & Tactical Information -->
                            <div class="bg-gray-800 p-3 rounded-lg">
                                <h5 class="text-white font-semibold mb-2 flex items-center text-sm">
                                    <i class="fas fa-cloud-sun mr-2 text-blue-400"></i><span data-translate="current_weather">Weather</span>
                                    <span class="mx-2 text-gray-500">|</span>
                                    <i class="fas fa-moon mr-2 text-yellow-400"></i><span data-translate="tactical_data">Tactical</span>
                                    <span class="mx-2 text-gray-500">|</span>
                                    <i class="fas fa-calendar-alt mr-2 text-green-400"></i><span data-translate="forecast_3day">3-Day Forecast</span>
                                </h5>

                                <!-- Current Weather & Tactical Data Row -->
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-3 mb-3">
                                    <div id="weather-info" class="text-gray-300 text-xs">
                                        <div class="flex items-center space-x-3">
                                            <div id="weather-icon" class="text-2xl">🌤️</div>
                                            <div class="flex-1 space-y-1">
                                                <div class="flex justify-between">
                                                    <span><span data-translate="temperature">Temp</span>: --°F</span>
                                                    <span><span data-translate="visibility">Vis</span>: -- km</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span><span data-translate="wind">Wind</span>: -- kph</span>
                                                    <span><span data-translate="conditions">Cond</span>: --</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="tactical-info" class="text-gray-300 text-xs">
                                        <div class="grid grid-cols-2 gap-2">
                                            <div class="space-y-1">
                                                <div><span data-translate="bmnt">BMNT</span>: --:--Z</div>
                                                <div><span data-translate="eent">EENT</span>: --:--Z</div>
                                            </div>
                                            <div class="space-y-1">
                                                <div><span data-translate="moon_phase">Moon</span>: --%</div>
                                                <div><span data-translate="sunrise">Rise</span>: --:--Z</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 3-Day Forecast Row -->
                                <div id="forecast-info" class="flex gap-2 text-xs">
                                    <div class="flex-1 p-2 bg-gray-700 rounded">
                                        <div class="flex items-center justify-between text-xs">
                                            <div class="flex flex-col items-center">
                                                <div class="text-gray-300 font-semibold" data-translate="forecast_today">Today</div>
                                                <div class="text-gray-400">--</div>
                                            </div>
                                            <div class="text-2xl">🌤️</div>
                                            <div class="flex flex-col items-center">
                                                <div class="text-white font-bold">--°/--°</div>
                                                <div class="text-gray-300">--</div>
                                            </div>
                                            <div class="flex flex-col items-center text-gray-400">
                                                <div>-- --</div>
                                                <div>--%</div>
                                                <div>-- hPa</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex-1 p-2 bg-gray-700 rounded">
                                        <div class="flex items-center justify-between text-xs">
                                            <div class="flex flex-col items-center">
                                                <div class="text-gray-300 font-semibold" data-translate="forecast_tomorrow">Tomorrow</div>
                                                <div class="text-gray-400">--</div>
                                            </div>
                                            <div class="text-2xl">🌤️</div>
                                            <div class="flex flex-col items-center">
                                                <div class="text-white font-bold">--°/--°</div>
                                                <div class="text-gray-300">--</div>
                                            </div>
                                            <div class="flex flex-col items-center text-gray-400">
                                                <div>-- --</div>
                                                <div>--%</div>
                                                <div>-- hPa</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex-1 p-2 bg-gray-700 rounded">
                                        <div class="flex items-center justify-between text-xs">
                                            <div class="flex flex-col items-center">
                                                <div class="text-gray-300 font-semibold" data-translate="forecast_day3">Day 3</div>
                                                <div class="text-gray-400">--</div>
                                            </div>
                                            <div class="text-2xl">🌤️</div>
                                            <div class="flex flex-col items-center">
                                                <div class="text-white font-bold">--°/--°</div>
                                                <div class="text-gray-300">--</div>
                                            </div>
                                            <div class="flex flex-col items-center text-gray-400">
                                                <div>-- --</div>
                                                <div>--%</div>
                                                <div>-- hPa</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

                document.body.appendChild(modal);

                // Set the mapping language selector to match current language
                const mappingLanguageSelector = document.getElementById('mapping-language-select');
                mappingLanguageSelector.value = this.currentLanguage;

                // Add language change functionality for mapping
                mappingLanguageSelector.addEventListener('change', (e) => {
                    const newLanguage = e.target.value;
                    this.currentLanguage = newLanguage;

                    // Update main language selector to match
                    const mainLanguageSelector = document.getElementById('language-selector');
                    if (mainLanguageSelector) {
                        mainLanguageSelector.value = newLanguage;
                    }

                    // Save language preference
                    localStorage.setItem('opord-language', newLanguage);

                    // Translate the page
                    this.translatePage();

                    // Show notification
                    this.showNotification(`Language changed to ${this.getLanguageName(newLanguage)}`, 'success');
                });

                // Add weather units change event listener
                const weatherUnitsSelector = document.getElementById('weather-units');
                if (weatherUnitsSelector) {
                    weatherUnitsSelector.addEventListener('change', async () => {
                        // Check if we have a current location to refresh weather for
                        if (this.map && this.map.getCenter) {
                            const center = this.map.getCenter();
                            const units = weatherUnitsSelector.value;

                            this.showNotification('Updating weather units...', 'info');

                            try {
                                // Refresh weather data with new units
                                await this.fetchWeatherData(center.lat, center.lng, units);
                                await this.fetchForecastData(center.lat, center.lng, units);
                                this.showNotification('Weather units updated successfully', 'success');
                            } catch (error) {
                                console.error('Error updating weather units:', error);
                                this.showNotification('Error updating weather units', 'error');
                            }
                        } else {
                            this.showNotification('Please search for a location first', 'info');
                        }
                    });
                }

                // Add close functionality
                document.getElementById('close-map-modal').addEventListener('click', () => {
                    modal.remove();
                });

                // Close on backdrop click
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });

                // Initialize saved locations display
                this.updateSavedLocations();
            }

            async searchLocation() {
                const coordInput = document.getElementById('coord-input');
                const coordinates = coordInput ? coordInput.value : '';
                const coordSystem = document.getElementById('coord-system')?.value || 'mgrs';

                if (!coordinates) {
                    this.showNotification('Please enter coordinates first', 'error');
                    return;
                }

                this.showNotification('Processing coordinates: ' + coordinates, 'info');

                // Process and validate coordinates
                const processedCoords = this.processCoordinates(coordinates, coordSystem);
                if (!processedCoords) {
                    this.showNotification('Invalid coordinate format', 'error');
                    return;
                }

                try {
                    // Initialize Leaflet map
                    this.initializeLeafletMap(processedCoords.lat, processedCoords.lon, processedCoords);

                    // Get weather units preference
                    const units = document.getElementById('weather-units')?.value || 'imperial';

                    // Fetch real weather data (current and forecast)
                    await this.fetchWeatherData(processedCoords.lat, processedCoords.lon, units);
                    await this.fetchForecastData(processedCoords.lat, processedCoords.lon, units);

                    // Update tactical data
                    this.updateTacticalData(processedCoords);

                    this.showNotification('Location and weather data loaded successfully', 'success');
                } catch (error) {
                    console.error('Error loading map/weather data:', error);
                    this.showNotification('Error loading map or weather data', 'error');
                }
            }



            initializeLeafletMap(centerLat, centerLon, fullParsedCoord) {
                const mapContainer = document.getElementById('map-display');
                if (!mapContainer) {
                    throw new Error("Map container element not found.");
                }

                // Clear existing content
                mapContainer.innerHTML = '';

                // Create map div
                const mapDiv = document.createElement('div');
                mapDiv.id = 'leaflet-map';
                mapDiv.style.width = '100%';
                mapDiv.style.height = '100%';
                mapContainer.appendChild(mapDiv);

                // Remove existing map and layer control if they exist
                if (this.layerControl) {
                    this.layerControl.remove();
                    this.layerControl = null;
                }
                if (this.map) {
                    this.map.remove();
                    this.map = null;
                }

                // Initialize new map
                this.map = L.map('leaflet-map').setView([centerLat, centerLon], 13);

                // Add scale control (accurate distance measurement)
                L.control.scale({
                    position: 'bottomleft',
                    metric: true,
                    imperial: true,
                    maxWidth: 200
                }).addTo(this.map);

                // Add north arrow control
                const northArrow = L.control({ position: 'topright' });
                northArrow.onAdd = function(map) {
                    const div = L.DomUtil.create('div', 'north-arrow-control');
                    div.innerHTML = `
                        <div style="
                            background: rgba(0,0,0,0.8);
                            color: white;
                            padding: 8px;
                            border-radius: 4px;
                            text-align: center;
                            font-weight: bold;
                            border: 2px solid #fff;
                            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
                        ">
                            <div style="font-size: 18px; margin-bottom: 2px;">↑</div>
                            <div style="font-size: 10px;">N</div>
                        </div>
                    `;
                    return div;
                };
                northArrow.addTo(this.map);

                // Add base layers with translated names
                const baseLayers = {};
                baseLayers[this.getTranslation('geoapify_street')] = L.tileLayer(`https://maps.geoapify.com/v1/tile/osm-bright/{z}/{x}/{y}.png?apiKey=${GEOAPIFY_API_KEY}`, {
                    attribution: '© Geoapify | © OpenStreetMap contributors',
                    maxZoom: 18
                });
                baseLayers[this.getTranslation('geoapify_carto')] = L.tileLayer(`https://maps.geoapify.com/v1/tile/osm-carto/{z}/{x}/{y}.png?apiKey=${GEOAPIFY_API_KEY}`, {
                    attribution: '© Geoapify | © OpenStreetMap contributors',
                    maxZoom: 18
                });
                baseLayers[this.getTranslation('geoapify_liberty')] = L.tileLayer(`https://maps.geoapify.com/v1/tile/osm-liberty/{z}/{x}/{y}.png?apiKey=${GEOAPIFY_API_KEY}`, {
                    attribution: '© Geoapify | © OpenStreetMap contributors',
                    maxZoom: 18
                });
                baseLayers[this.getTranslation('esri_satellite')] = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
                    attribution: 'Tiles &copy; <a href="https://www.esri.com/">Esri</a> &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community',
                    maxZoom: 19
                });

                // Add default layer
                baseLayers[this.getTranslation('geoapify_street')].addTo(this.map);

                // Add layer control with collapsed option
                this.layerControl = L.control.layers(baseLayers, null, {
                    collapsed: true,
                    position: 'topright'
                }).addTo(this.map);

                // Add marker for the location
                const marker = L.marker([centerLat, centerLon]).addTo(this.map);
                marker.bindPopup(`<strong>${fullParsedCoord.original}</strong><br>Lat: ${centerLat.toFixed(6)}<br>Lon: ${centerLon.toFixed(6)}`).openPopup();

                // Initialize drawing tools
                this.initializeDrawingTools();

                // Update overlay info
                const mapOverlay = document.getElementById('map-overlay');
                if (mapOverlay) {
                    mapOverlay.style.display = 'block';
                    const gridSpan = document.getElementById('current-grid');
                    const elevSpan = document.getElementById('current-elevation');
                    const systemSpan = document.getElementById('current-system');

                    if (gridSpan) gridSpan.textContent = fullParsedCoord.original;
                    if (elevSpan) elevSpan.textContent = Math.floor(200 + Math.random() * 300) + ' m';
                    if (systemSpan) systemSpan.textContent = fullParsedCoord.system;
                }
            }

            async fetchWeatherData(lat, lon, units = 'imperial') {
                try {
                    const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${WEATHER_API_KEY}&units=${units}`);

                    if (!response.ok) {
                        throw new Error(`Weather API error: ${response.status}`);
                    }

                    const weatherData = await response.json();
                    this.updateWeatherDataFromAPI(weatherData, units);
                } catch (error) {
                    console.error('Error fetching weather data:', error);
                    // Fall back to simulated data
                    this.updateWeatherData({ lat, lon }, units);
                }
            }

            async fetchForecastData(lat, lon, units = 'imperial') {
                try {
                    const response = await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&appid=${WEATHER_API_KEY}&units=${units}`);

                    if (!response.ok) {
                        throw new Error(`Forecast API error: ${response.status}`);
                    }

                    const forecastData = await response.json();
                    this.updateForecastDataFromAPI(forecastData, units);
                } catch (error) {
                    console.error('Error fetching forecast data:', error);
                    // Fall back to simulated data
                    this.updateForecastData(units);
                }
            }

            updateWeatherDataFromAPI(weatherData, units) {
                const weatherDiv = document.getElementById('weather-info');
                const weatherIcon = document.getElementById('weather-icon');

                if (weatherDiv && weatherData) {
                    const temp = Math.round(weatherData.main.temp);
                    const tempUnit = units === 'imperial' ? '°F' : '°C';
                    const visibility = weatherData.visibility ? Math.round(weatherData.visibility / 1000) : 'N/A';
                    const windSpeed = weatherData.wind ? Math.round(weatherData.wind.speed) : 0;
                    const windUnit = units === 'imperial' ? 'mph' : 'm/s';
                    const windDir = weatherData.wind ? this.getWindDirection(weatherData.wind.deg) : 'N/A';
                    const conditions = weatherData.weather[0].description;

                    // Update weather icon
                    if (weatherIcon) {
                        weatherIcon.textContent = this.getWeatherIcon(weatherData.weather[0].icon);
                    }

                    weatherDiv.innerHTML = `
                        <div class="flex items-center space-x-3">
                            <div id="weather-icon" class="text-2xl">${this.getWeatherIcon(weatherData.weather[0].icon)}</div>
                            <div class="flex-1 space-y-1">
                                <div class="flex justify-between">
                                    <span>Temp: ${temp}${tempUnit}</span>
                                    <span>Vis: ${visibility} km</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Wind: ${windSpeed} ${windUnit} ${windDir}</span>
                                    <span>Cond: ${conditions}</span>
                                </div>
                            </div>
                        </div>
                    `;
                }
            }

            updateForecastDataFromAPI(forecastData, units) {
                const forecastDiv = document.getElementById('forecast-info');
                if (forecastDiv && forecastData && forecastData.list) {
                    const tempUnit = units === 'imperial' ? '°F' : '°C';
                    const windUnit = units === 'imperial' ? 'mph' : 'm/s';

                    // Get daily forecasts (every 8th item = 24 hours apart)
                    const dailyForecasts = [];
                    for (let i = 0; i < 3 && i * 8 < forecastData.list.length; i++) {
                        const forecast = forecastData.list[i * 8];
                        dailyForecasts.push(forecast);
                    }

                    const forecastHTML = dailyForecasts.map((forecast, index) => {
                        const forecastDate = new Date(forecast.dt * 1000);
                        const dayName = index === 0 ? 'Today' :
                                       index === 1 ? 'Tomorrow' :
                                       forecastDate.toLocaleDateString('en-US', { weekday: 'short' });
                        const dateStr = forecastDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });

                        const tempMax = Math.round(forecast.main.temp_max);
                        const tempMin = Math.round(forecast.main.temp_min);
                        const icon = this.getWeatherIcon(forecast.weather[0].icon);
                        const condition = forecast.weather[0].description;
                        const humidity = forecast.main.humidity;
                        const windSpeed = Math.round(forecast.wind ? forecast.wind.speed : 0);
                        const windDir = forecast.wind ? this.getWindDirection(forecast.wind.deg) : 'N/A';
                        const pressure = forecast.main.pressure;

                        return `
                            <div class="flex-1 p-3 bg-gray-700 rounded">
                                <div class="flex items-center justify-between text-xs">
                                    <div class="flex flex-col items-center">
                                        <div class="text-gray-300 font-semibold">${dayName}</div>
                                        <div class="text-gray-400">${dateStr}</div>
                                    </div>
                                    <div class="text-2xl">${icon}</div>
                                    <div class="flex flex-col items-center">
                                        <div class="text-white font-bold">${tempMax}${tempUnit}/${tempMin}${tempUnit}</div>
                                        <div class="text-gray-300 capitalize">${condition}</div>
                                    </div>
                                    <div class="flex flex-col items-center text-gray-400">
                                        <div><i class="fas fa-wind mr-1"></i>${windSpeed} ${windUnit} ${windDir}</div>
                                        <div><i class="fas fa-tint mr-1"></i>${humidity}%</div>
                                        <div><i class="fas fa-thermometer-half mr-1"></i>${pressure} hPa</div>
                                    </div>
                                </div>
                            </div>
                        `;
                    }).join('');

                    forecastDiv.innerHTML = forecastHTML;
                }
            }

            updateForecastData(units = 'imperial') {
                // Show API failure message when forecast data fails to load
                const forecastDiv = document.getElementById('forecast-info');
                if (forecastDiv) {
                    forecastDiv.innerHTML = `
                        <div class="flex-1 text-center p-4 bg-red-900 bg-opacity-50 border border-red-600 rounded">
                            <div class="text-red-400 mb-2">
                                <i class="fas fa-exclamation-triangle text-2xl"></i>
                            </div>
                            <div class="text-red-300 font-semibold mb-1">Weather API Failed</div>
                            <div class="text-xs text-red-400">Unable to load forecast data</div>
                        </div>
                    `;
                }
            }

            getWeatherIcon(iconCode) {
                const iconMap = {
                    '01d': '☀️', '01n': '🌙',
                    '02d': '⛅', '02n': '☁️',
                    '03d': '☁️', '03n': '☁️',
                    '04d': '☁️', '04n': '☁️',
                    '09d': '🌧️', '09n': '🌧️',
                    '10d': '🌦️', '10n': '🌧️',
                    '11d': '⛈️', '11n': '⛈️',
                    '13d': '❄️', '13n': '❄️',
                    '50d': '🌫️', '50n': '🌫️'
                };
                return iconMap[iconCode] || '🌤️';
            }

            getWindDirection(degrees) {
                const directions = ['N', 'NNE', 'NE', 'ENE', 'E', 'ESE', 'SE', 'SSE', 'S', 'SSW', 'SW', 'WSW', 'W', 'WNW', 'NW', 'NNW'];
                const index = Math.round(degrees / 22.5) % 16;
                return directions[index];
            }

            processCoordinates(coords, system) {
                if (!coords || !coords.trim()) {
                    return null;
                }

                const cleanCoords = coords.trim();

                // Use the working coordinate processing from Updated OPORD Drafting Training Aid
                const parsedCoordData = window.opordUtils ? window.opordUtils.parseCoord(cleanCoords, system) : null;

                if (parsedCoordData && typeof parsedCoordData.lat === 'number' && typeof parsedCoordData.lon === 'number') {
                    return {
                        original: cleanCoords,
                        system: system.toUpperCase(),
                        valid: true,
                        lat: parsedCoordData.lat,
                        lon: parsedCoordData.lon
                    };
                }

                return this.processCoordinatesBasic(cleanCoords, system);
            }

            processCoordinatesBasic(coords, system) {
                // Simple fallback coordinate processing
                console.log('Using basic coordinate processing for:', coords, system);

                if (system === 'latlon') {
                    let lat, lon;

                    // Handle degree symbol format: 48.8584°N, 2.2945°E
                    if (coords.includes('°') || coords.match(/[NSEW]/i)) {
                        const degreePattern = /(-?\d+\.?\d*)°?([NS])?[,\s]*(-?\d+\.?\d*)°?([EW])?/i;
                        const match = coords.match(degreePattern);

                        if (match) {
                            lat = parseFloat(match[1]);
                            lon = parseFloat(match[3]);

                            // Apply direction (S = negative lat, W = negative lon)
                            if (match[2] && match[2].toUpperCase() === 'S') lat = -Math.abs(lat);
                            if (match[4] && match[4].toUpperCase() === 'W') lon = -Math.abs(lon);
                        }
                    } else {
                        // Try parsing as decimal degrees
                        const parts = coords.split(/[,\s]+/);
                        if (parts.length === 2) {
                            lat = parseFloat(parts[0]);
                            lon = parseFloat(parts[1]);
                        }
                    }

                    // Validate coordinates
                    if (!isNaN(lat) && !isNaN(lon) && lat >= -90 && lat <= 90 && lon >= -180 && lon <= 180) {
                        return {
                            original: coords,
                            system: 'Lat/Long',
                            valid: true,
                            lat: lat,
                            lon: lon
                        };
                    }
                }

                console.log('Basic coordinate processing failed for:', coords, system);
                return null;
            }




            updateMapDisplay(coords) {
                const mapDisplay = document.getElementById('map-display');
                const mapOverlay = document.getElementById('map-overlay');

                if (mapDisplay && coords.valid) {
                    mapDisplay.innerHTML = `
                        <div class="w-full h-full bg-gradient-to-br from-green-800 to-green-900 rounded-lg relative flex items-center justify-center">
                            <div class="absolute inset-0 opacity-20">
                                <div class="grid grid-cols-8 grid-rows-6 h-full w-full">
                                    ${Array(48).fill().map(() => '<div class="border border-green-600"></div>').join('')}
                                </div>
                            </div>
                            <div class="relative z-10 text-center text-white">
                                <div class="w-4 h-4 bg-red-500 rounded-full mx-auto mb-2 animate-pulse"></div>
                                <p class="text-sm font-semibold">${coords.original}</p>
                                <p class="text-xs">${coords.lat.toFixed(6)}, ${coords.lon.toFixed(6)}</p>
                            </div>
                            <div class="absolute top-2 left-2 text-xs text-white bg-black bg-opacity-50 p-1 rounded">
                                Grid: ${coords.system}
                            </div>
                        </div>
                    `;

                    if (mapOverlay) {
                        mapOverlay.style.display = 'block';
                        const gridSpan = document.getElementById('current-grid');
                        const elevSpan = document.getElementById('current-elevation');
                        const systemSpan = document.getElementById('current-system');

                        if (gridSpan) gridSpan.textContent = coords.original;
                        if (elevSpan) elevSpan.textContent = Math.floor(200 + Math.random() * 300) + ' m';
                        if (systemSpan) systemSpan.textContent = coords.system;
                    }
                }
            }

            updateWeatherData(coords) {
                const weatherDiv = document.getElementById('weather-info');
                if (weatherDiv) {
                    // Show API failure message when weather data fails to load
                    weatherDiv.innerHTML = `
                        <div class="text-center p-3 bg-red-900 bg-opacity-50 border border-red-600 rounded">
                            <div class="text-red-400 mb-2">
                                <i class="fas fa-exclamation-triangle text-xl"></i>
                            </div>
                            <div class="text-red-300 font-semibold mb-1">Weather API Failed</div>
                            <div class="text-xs text-red-400">Unable to load current weather data</div>
                        </div>
                    `;
                }
            }

            updateTacticalData(coords) {
                const tacticalDiv = document.getElementById('tactical-info');

                if (tacticalDiv) {
                    const now = new Date();
                    const bmnt = new Date(now);
                    bmnt.setHours(5, 30, 0, 0); // Approximate BMNT
                    const eent = new Date(now);
                    eent.setHours(19, 0, 0, 0); // Approximate EENT

                    const moonPhase = Math.floor(Math.random() * 100);

                    tacticalDiv.innerHTML = `
                        <div class="grid grid-cols-2 gap-2">
                            <div class="space-y-1">
                                <div>BMNT: ${bmnt.getUTCHours().toString().padStart(2, '0')}${bmnt.getUTCMinutes().toString().padStart(2, '0')}Z</div>
                                <div>EENT: ${eent.getUTCHours().toString().padStart(2, '0')}${eent.getUTCMinutes().toString().padStart(2, '0')}Z</div>
                            </div>
                            <div class="space-y-1">
                                <div>Moon: ${moonPhase}%</div>
                                <div>Rise: ${(bmnt.getUTCHours() + 1).toString().padStart(2, '0')}${bmnt.getUTCMinutes().toString().padStart(2, '0')}Z</div>
                            </div>
                        </div>
                    `;
                }
            }

            addMarker() {
                const coordInput = document.getElementById('coord-input');
                const coordinates = coordInput ? coordInput.value : '';
                const coordSystem = document.getElementById('coord-system')?.value || 'mgrs';

                if (!coordinates) {
                    this.showNotification('Please enter coordinates first', 'error');
                    return;
                }

                const processedCoords = this.processCoordinates(coordinates, coordSystem);
                if (!processedCoords) {
                    this.showNotification('Invalid coordinate format for marker', 'error');
                    return;
                }

                // Store marker in local storage
                const markers = JSON.parse(localStorage.getItem('opord-markers') || '[]');
                const markerName = prompt('Enter marker name (e.g., OBJ ALPHA, TAA BRAVO):') || `Marker ${markers.length + 1}`;

                const newMarker = {
                    name: markerName,
                    coordinates: coordinates,
                    system: coordSystem,
                    timestamp: new Date().toISOString()
                };

                markers.push(newMarker);
                localStorage.setItem('opord-markers', JSON.stringify(markers));

                this.updateSavedLocations();
                this.showNotification(`Marker "${markerName}" added at: ${coordinates}`, 'success');
            }

            saveCurrentLocation() {
                const coordInput = document.getElementById('coord-input');
                const coordinates = coordInput ? coordInput.value : '';
                const coordSystem = document.getElementById('coord-system')?.value || 'mgrs';

                if (!coordinates) {
                    this.showNotification('Please enter coordinates first', 'error');
                    return;
                }

                const processedCoords = this.processCoordinates(coordinates, coordSystem);
                if (!processedCoords) {
                    this.showNotification('Invalid coordinate format', 'error');
                    return;
                }

                const locationName = prompt('Enter location name (e.g., OBJ DELTA, TAA ECHO):');
                if (!locationName) return;

                // Store location in local storage
                const savedLocations = JSON.parse(localStorage.getItem('opord-saved-locations') || '[]');

                const newLocation = {
                    name: locationName.toUpperCase(),
                    coordinates: coordinates,
                    system: coordSystem,
                    timestamp: new Date().toISOString()
                };

                savedLocations.push(newLocation);
                localStorage.setItem('opord-saved-locations', JSON.stringify(savedLocations));

                this.updateSavedLocations();
                this.showNotification(`Location "${locationName}" saved successfully`, 'success');
            }

            updateSavedLocations() {
                const savedDiv = document.getElementById('saved-locations');
                if (savedDiv) {
                    const savedLocations = JSON.parse(localStorage.getItem('opord-saved-locations') || '[]');

                    if (savedLocations.length === 0) {
                        savedDiv.innerHTML = `
                            <div class="text-center text-gray-500 py-2">
                                <i class="fas fa-info-circle mr-1"></i>
                                No saved locations yet. Use "Save Current" to add locations.
                            </div>
                        `;
                    } else {
                        savedDiv.innerHTML = savedLocations.map(loc =>
                            `<div class="cursor-pointer hover:text-blue-300 p-1 rounded hover:bg-gray-700 flex items-center justify-between" onclick="app.loadLocation('${loc.coordinates}')">
                                <div class="flex items-center">
                                    <i class="fas fa-map-pin mr-1 text-blue-400"></i>
                                    <span>${loc.name}: ${loc.coordinates}</span>
                                </div>
                                <button class="text-red-400 hover:text-red-300 ml-2" onclick="event.stopPropagation(); app.deleteSavedLocation('${loc.name}')" title="Delete">
                                    <i class="fas fa-trash text-xs"></i>
                                </button>
                            </div>`
                        ).join('');
                    }
                }
            }

            deleteSavedLocation(locationName) {
                if (confirm(`Delete saved location "${locationName}"?`)) {
                    const savedLocations = JSON.parse(localStorage.getItem('opord-saved-locations') || '[]');
                    const filteredLocations = savedLocations.filter(loc => loc.name !== locationName);
                    localStorage.setItem('opord-saved-locations', JSON.stringify(filteredLocations));
                    this.updateSavedLocations();
                    this.showNotification(`Location "${locationName}" deleted`, 'success');
                }
            }

            clearSavedLocations() {
                if (confirm('Clear all saved locations?')) {
                    localStorage.removeItem('opord-saved-locations');
                    this.updateSavedLocations();
                    this.showNotification('Saved locations cleared', 'success');
                }
            }

            calculateDistance() {
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 modal-backdrop flex items-center justify-center z-50';
                modal.innerHTML = `
                    <div class="modal-content rounded-xl p-6 max-w-md w-full mx-4">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-white">Distance Calculator</h3>
                            <button id="close-distance-modal" class="text-gray-400 hover:text-white">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm text-gray-300 mb-1">Point A Coordinates</label>
                                <input type="text" id="point-a" class="form-input w-full p-2 text-sm" placeholder="e.g., 32S 0123456 1234567">
                            </div>
                            <div>
                                <label class="block text-sm text-gray-300 mb-1">Point B Coordinates</label>
                                <input type="text" id="point-b" class="form-input w-full p-2 text-sm" placeholder="e.g., 32S 0234567 2345678">
                            </div>
                            <button id="calculate-btn" class="btn-primary w-full px-4 py-2 text-sm">
                                <i class="fas fa-calculator mr-2"></i>Calculate Distance
                            </button>
                            <div id="distance-result" class="text-center text-gray-300 text-sm"></div>
                        </div>
                    </div>
                `;

                document.body.appendChild(modal);

                document.getElementById('close-distance-modal').addEventListener('click', () => modal.remove());
                document.getElementById('calculate-btn').addEventListener('click', () => {
                    const pointA = document.getElementById('point-a').value;
                    const pointB = document.getElementById('point-b').value;

                    if (pointA && pointB) {
                        const distance = this.calculateCoordinateDistance(pointA, pointB);
                        document.getElementById('distance-result').innerHTML = `
                            <strong>Distance: ${distance.km.toFixed(2)} km (${distance.miles.toFixed(2)} miles)</strong><br>
                            <small>Bearing: ${distance.bearing}°</small>
                        `;
                    } else {
                        this.showNotification('Please enter both coordinates', 'error');
                    }
                });

                modal.addEventListener('click', (e) => {
                    if (e.target === modal) modal.remove();
                });
            }

            calculateCoordinateDistance(coordA, coordB) {
                try {
                    // Process coordinates to get lat/lon
                    const coordsA = this.processCoordinates(coordA, 'mgrs') || { lat: 35, lon: -85 };
                    const coordsB = this.processCoordinates(coordB, 'mgrs') || { lat: 36, lon: -84 };

                    // Use geodesy library for accurate distance calculation
                    const result = window.opordUtils.calculateDistance(
                        coordsA.lat, coordsA.lon,
                        coordsB.lat, coordsB.lon
                    );

                    if (result) {
                        console.log(`[Geodesy] Distance calculated: ${result.formatted}`);
                        return {
                            km: result.kilometers,
                            miles: result.miles,
                            bearing: result.bearing.toString()
                        };
                    } else {
                        // Fallback to simple calculation
                        console.log('[Geodesy] Using fallback distance calculation');
                        const R = 6371; // Earth's radius in km
                        const dLat = (coordsB.lat - coordsA.lat) * Math.PI / 180;
                        const dLon = (coordsB.lon - coordsA.lon) * Math.PI / 180;
                        const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                                 Math.cos(coordsA.lat * Math.PI / 180) * Math.cos(coordsB.lat * Math.PI / 180) *
                                 Math.sin(dLon/2) * Math.sin(dLon/2);
                        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
                        const distance = R * c;

                        const bearing = Math.atan2(
                            Math.sin(dLon) * Math.cos(coordsB.lat * Math.PI / 180),
                            Math.cos(coordsA.lat * Math.PI / 180) * Math.sin(coordsB.lat * Math.PI / 180) -
                            Math.sin(coordsA.lat * Math.PI / 180) * Math.cos(coordsB.lat * Math.PI / 180) * Math.cos(dLon)
                        ) * 180 / Math.PI;

                        return {
                            km: distance,
                            miles: distance * 0.621371,
                            bearing: ((bearing + 360) % 360).toFixed(0)
                        };
                    }
                } catch (error) {
                    console.error('[Geodesy] Error calculating distance:', error);
                    return { km: 0, miles: 0, bearing: '0' };
                }
            }

            initializeDrawingTools() {
                if (!this.map) return;

                // Create feature group for drawn items
                this.drawnItems = new L.FeatureGroup();
                this.map.addLayer(this.drawnItems);

                // Drawing control options
                const drawControl = new L.Control.Draw({
                    position: 'topleft',
                    draw: {
                        polygon: {
                            allowIntersection: false,
                            drawError: {
                                color: '#e1e100',
                                message: '<strong>Error:</strong> Shape edges cannot cross!'
                            },
                            shapeOptions: {
                                color: '#ff0000',
                                weight: 3,
                                opacity: 0.8,
                                fillOpacity: 0.2
                            }
                        },
                        polyline: {
                            shapeOptions: {
                                color: '#0000ff',
                                weight: 4,
                                opacity: 0.8
                            }
                        },
                        rectangle: {
                            shapeOptions: {
                                color: '#00ff00',
                                weight: 3,
                                opacity: 0.8,
                                fillOpacity: 0.2
                            }
                        },
                        circle: {
                            shapeOptions: {
                                color: '#ff8800',
                                weight: 3,
                                opacity: 0.8,
                                fillOpacity: 0.2
                            }
                        },
                        marker: {
                            icon: L.divIcon({
                                className: 'tactical-marker',
                                html: '<div style="background: red; width: 12px; height: 12px; border-radius: 50%; border: 2px solid white;"></div>',
                                iconSize: [16, 16],
                                iconAnchor: [8, 8]
                            })
                        },
                        circlemarker: false
                    },
                    edit: {
                        featureGroup: this.drawnItems,
                        remove: true
                    }
                });

                this.map.addControl(drawControl);

                // Event handlers for drawing
                this.map.on(L.Draw.Event.CREATED, (e) => {
                    const layer = e.layer;
                    const type = e.layerType;

                    // Add popup with shape info
                    if (type === 'marker') {
                        const markerName = prompt('Enter marker name:') || 'Tactical Marker';
                        layer.bindPopup(`<strong>${markerName}</strong><br>Type: Tactical Marker`);
                    } else if (type === 'polygon') {
                        const area = L.GeometryUtil.geodesicArea(layer.getLatLngs()[0]);
                        layer.bindPopup(`<strong>Area</strong><br>Size: ${(area / 1000000).toFixed(2)} km²`);
                    } else if (type === 'polyline') {
                        const distance = this.calculatePolylineDistance(layer.getLatLngs());
                        layer.bindPopup(`<strong>Line</strong><br>Length: ${distance.toFixed(2)} km`);
                    } else if (type === 'rectangle') {
                        const bounds = layer.getBounds();
                        const area = this.calculateRectangleArea(bounds);
                        layer.bindPopup(`<strong>Rectangle</strong><br>Area: ${area.toFixed(2)} km²`);
                    } else if (type === 'circle') {
                        const radius = layer.getRadius();
                        const area = Math.PI * Math.pow(radius / 1000, 2);
                        layer.bindPopup(`<strong>Circle</strong><br>Radius: ${(radius / 1000).toFixed(2)} km<br>Area: ${area.toFixed(2)} km²`);
                    }

                    this.drawnItems.addLayer(layer);
                });

                this.map.on(L.Draw.Event.EDITED, (e) => {
                    // Handle edited shapes
                    console.log('Shapes edited');
                });

                this.map.on(L.Draw.Event.DELETED, (e) => {
                    // Handle deleted shapes
                    console.log('Shapes deleted');
                });
            }

            calculatePolylineDistance(latlngs) {
                let totalDistance = 0;
                for (let i = 0; i < latlngs.length - 1; i++) {
                    const from = latlngs[i];
                    const to = latlngs[i + 1];
                    totalDistance += this.calculateDistanceBetweenPoints(from.lat, from.lng, to.lat, to.lng);
                }
                return totalDistance;
            }

            calculateRectangleArea(bounds) {
                const ne = bounds.getNorthEast();
                const sw = bounds.getSouthWest();
                const nw = L.latLng(ne.lat, sw.lng);
                const se = L.latLng(sw.lat, ne.lng);

                const width = this.calculateDistanceBetweenPoints(nw.lat, nw.lng, ne.lat, ne.lng);
                const height = this.calculateDistanceBetweenPoints(sw.lat, sw.lng, nw.lat, nw.lng);

                return width * height;
            }

            calculateDistanceBetweenPoints(lat1, lon1, lat2, lon2) {
                const R = 6371; // Earth's radius in km
                const dLat = (lat2 - lat1) * Math.PI / 180;
                const dLon = (lon2 - lon1) * Math.PI / 180;
                const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                         Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                         Math.sin(dLon/2) * Math.sin(dLon/2);
                const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
                return R * c;
            }

            loadLocation(coordinates) {
                const coordInput = document.getElementById('coord-input');
                if (coordInput) {
                    coordInput.value = coordinates;
                    this.searchLocation();
                }
            }

            convertCoordinates() {
                const coordInput = document.getElementById('coord-input');
                const coordinates = coordInput ? coordInput.value : '';
                const currentSystem = document.getElementById('coord-system')?.value || 'mgrs';

                if (!coordinates) {
                    this.showNotification('Please enter coordinates first', 'error');
                    return;
                }

                const processedCoords = this.processCoordinates(coordinates, currentSystem);
                if (!processedCoords) {
                    this.showNotification('Invalid coordinate format', 'error');
                    return;
                }

                // Show conversion modal
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 modal-backdrop flex items-center justify-center z-50';
                modal.innerHTML = `
                    <div class="modal-content rounded-xl p-6 max-w-md w-full mx-4">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-white">Coordinate Conversion</h3>
                            <button id="close-convert-modal" class="text-gray-400 hover:text-white">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="space-y-3 text-sm">
                            <div class="bg-gray-800 p-3 rounded">
                                <strong class="text-blue-300">MGRS:</strong><br>
                                <span class="font-mono">${this.toMGRS(processedCoords)}</span>
                                <button class="ml-2 text-xs text-blue-400 hover:text-blue-300" onclick="navigator.clipboard.writeText('${this.toMGRS(processedCoords)}')">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                            <div class="bg-gray-800 p-3 rounded">
                                <strong class="text-green-300">Lat/Long:</strong><br>
                                <span class="font-mono">${processedCoords.lat.toFixed(6)}, ${processedCoords.lon.toFixed(6)}</span>
                                <button class="ml-2 text-xs text-green-400 hover:text-green-300" onclick="navigator.clipboard.writeText('${processedCoords.lat.toFixed(6)}, ${processedCoords.lon.toFixed(6)}')">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                            <div class="bg-gray-800 p-3 rounded">
                                <strong class="text-yellow-300">UTM:</strong><br>
                                <span class="font-mono">${this.toUTM(processedCoords)}</span>
                                <button class="ml-2 text-xs text-yellow-400 hover:text-yellow-300" onclick="navigator.clipboard.writeText('${this.toUTM(processedCoords)}')">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;

                document.body.appendChild(modal);

                document.getElementById('close-convert-modal').addEventListener('click', () => modal.remove());
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) modal.remove();
                });

                this.showNotification('Coordinates converted to multiple formats', 'success');
            }

            toMGRS(coords) {
                try {
                    // Use window.mgrs library for accurate MGRS conversion
                    if (!window.mgrs || typeof window.mgrs.forward !== 'function') {
                        console.error('[Convert] MGRS library not available');
                        return coords.originalMgrs || 'MGRS library not available';
                    }

                    // mgrs.forward expects [longitude, latitude] and precision
                    const mgrsString = window.mgrs.forward([coords.lon, coords.lat], 5); // 5 = 1m precision
                    return mgrsString || 'MGRS conversion error';
                } catch (error) {
                    console.error('[Convert] MGRS conversion error:', error);
                    return coords.originalMgrs || 'MGRS conversion error';
                }
            }

            toUTM(coords) {
                try {
                    // Use proj4js for accurate UTM conversion
                    if (!window.proj4) {
                        console.error('[Convert] Proj4js library not available');
                        return 'Proj4js library not available';
                    }

                    // Calculate UTM zone from longitude
                    const zoneNumber = Math.floor((coords.lon + 180) / 6) + 1;
                    const isSouthern = coords.lat < 0;

                    // Define projections
                    const wgs84Proj = `+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs`;
                    const utmProj = `+proj=utm +zone=${zoneNumber} ${isSouthern ? '+south' : ''} +ellps=WGS84 +datum=WGS84 +units=m +no_defs`;

                    // Convert lat/lon to UTM
                    const [easting, northing] = proj4(wgs84Proj, utmProj, [coords.lon, coords.lat]);

                    // Calculate zone letter
                    const zoneLetters = 'CDEFGHJKLMNPQRSTUVWX';
                    const latIndex = Math.floor((coords.lat + 80) / 8);
                    let zoneLetter = zoneLetters[latIndex] || (coords.lat > 0 ? 'X' : 'C');

                    return `${zoneNumber}${zoneLetter} ${Math.round(easting)} ${Math.round(northing)}`;
                } catch (error) {
                    console.error('[Convert] UTM conversion error:', error);
                    return 'UTM conversion error';
                }
            }

            copyCoordinates() {
                const coordInput = document.getElementById('coord-input');
                const coordinates = coordInput ? coordInput.value : '';

                if (!coordinates) {
                    this.showNotification('Please enter coordinates first', 'error');
                    return;
                }

                // Copy to clipboard
                navigator.clipboard.writeText(coordinates).then(() => {
                    this.showNotification('Coordinates copied to clipboard', 'success');
                }).catch(() => {
                    this.showNotification('Failed to copy coordinates', 'error');
                });
            }





            calculateDistance(lat1, lon1, lat2, lon2) {
                const R = 6371000; // Earth's radius in meters
                const dLat = (lat2 - lat1) * Math.PI / 180;
                const dLon = (lon2 - lon1) * Math.PI / 180;
                const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                         Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                         Math.sin(dLon/2) * Math.sin(dLon/2);
                const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
                return R * c; // Distance in meters
            }

            saveAnnexes() {
                try {
                    const annexData = {};
                    const annexFields = [
                        'annex_a_task_org', 'annex_b_fire_support', 'annex_c_air_defense',
                        'annex_d_intelligence', 'annex_e_communications', 'annex_f_engineer'
                    ];

                    annexFields.forEach(field => {
                        const element = document.querySelector(`[name="${field}"]`);
                        if (element) {
                            annexData[field] = element.value;
                        }
                    });

                    localStorage.setItem('opord-annexes', JSON.stringify(annexData));
                    this.showNotification('All annexes saved successfully!', 'success');
                } catch (error) {
                    console.error('Error saving annexes:', error);
                    this.showNotification('Error saving annexes', 'error');
                }
            }

            exportAnnexes() {
                try {
                    const annexData = {
                        taskOrg: document.querySelector('[name="annex_a_task_org"]')?.value || '',
                        fireSupport: document.querySelector('[name="annex_b_fire_support"]')?.value || '',
                        airDefense: document.querySelector('[name="annex_c_air_defense"]')?.value || '',
                        intelligence: document.querySelector('[name="annex_d_intelligence"]')?.value || '',
                        communications: document.querySelector('[name="annex_e_communications"]')?.value || '',
                        engineer: document.querySelector('[name="annex_f_engineer"]')?.value || ''
                    };

                    const exportText = `OPORD ANNEXES\n\n` +
                        `ANNEX A - TASK ORGANIZATION\n${annexData.taskOrg}\n\n` +
                        `ANNEX B - FIRE SUPPORT\n${annexData.fireSupport}\n\n` +
                        `ANNEX C - AIR DEFENSE\n${annexData.airDefense}\n\n` +
                        `ANNEX D - INTELLIGENCE\n${annexData.intelligence}\n\n` +
                        `ANNEX E - COMMUNICATIONS\n${annexData.communications}\n\n` +
                        `ANNEX F - ENGINEER\n${annexData.engineer}`;

                    const blob = new Blob([exportText], { type: 'text/plain' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'opord-annexes.txt';
                    a.click();
                    URL.revokeObjectURL(url);

                    this.showNotification('Annexes exported successfully!', 'success');
                } catch (error) {
                    console.error('Error exporting annexes:', error);
                    this.showNotification('Error exporting annexes', 'error');
                }
            }

            setupDraftEventListeners() {
                try {
                    // Mission generation
                    const generateBtn = document.getElementById('generate-mission');
                    if (generateBtn) {
                        generateBtn.addEventListener('click', () => this.generateMissionStatement());
                    }

                    // Note: Save Draft button is now integrated in Generate OPORD section
                } catch (error) {
                    console.error('Error setting up draft event listeners:', error);
                }
            }

            generateMissionStatement() {
                try {
                    const who = document.getElementById('mission-who')?.value || '';
                    const what = document.getElementById('mission-what')?.value || '';
                    const when = document.getElementById('mission-when')?.value || '';
                    const where = document.getElementById('mission-where')?.value || '';
                    const why = document.getElementById('mission-why')?.value || '';

                    if (who && what && when && where && why) {
                        const statement = `${who} ${what} ${where} ${when} in order to ${why}`;
                        const statementEl = document.getElementById('mission-statement');
                        if (statementEl) {
                            statementEl.value = statement;
                            this.saveFormData();
                        }
                        this.showNotification('Mission statement generated successfully!', 'success');
                    } else {
                        this.showNotification('Please fill in all 5 Ws first', 'error');
                    }
                } catch (error) {
                    console.error('Error generating mission statement:', error);
                    this.showNotification('Error generating mission statement', 'error');
                }
            }





            updateDonationModalTranslations() {
                // Update all elements with data-translate attributes in the donation modal
                const modal = document.querySelector('.modal-backdrop');
                if (modal) {
                    // Translate text content
                    const translatableElements = modal.querySelectorAll('[data-translate]');
                    translatableElements.forEach(element => {
                        const key = element.getAttribute('data-translate');
                        const translation = this.getTranslation(key);
                        if (translation) {
                            element.textContent = translation;
                        }
                    });

                    // Translate placeholders
                    const placeholderElements = modal.querySelectorAll('[data-translate-placeholder]');
                    placeholderElements.forEach(element => {
                        const key = element.getAttribute('data-translate-placeholder');
                        const translation = this.getTranslation(key);
                        if (translation) {
                            element.placeholder = translation;
                        }
                    });

                    // Translate select options
                    const selectOptions = modal.querySelectorAll('option[data-translate]');
                    selectOptions.forEach(option => {
                        const key = option.getAttribute('data-translate');
                        const translation = this.getTranslation(key);
                        if (translation) {
                            option.textContent = translation;
                        }
                    });
                }
            }

            copyToClipboard(text, successMessage = 'Copied to clipboard!') {
                navigator.clipboard.writeText(text).then(() => {
                    this.showNotification(successMessage, 'success');
                }).catch(() => {
                    // Fallback for older browsers
                    const textArea = document.createElement('textarea');
                    textArea.value = text;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    this.showNotification(successMessage, 'success');
                });
            }

            showNotification(message, type = 'info') {
                console.log(`${type.toUpperCase()}: ${message}`);

                // Simple notification display
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.innerHTML = `
                    <div class="flex items-center">
                        <i class="fas fa-info-circle mr-2"></i>
                        <span>${message}</span>
                    </div>
                `;

                document.body.appendChild(notification);

                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 3000);
            }

            showGenerateModal() {
                // Create and show generate OPORD modal
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 modal-backdrop flex items-center justify-center z-50';
                modal.innerHTML = `
                    <div class="modal-content rounded-xl p-6 max-w-2xl w-full mx-4">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-semibold text-white flex items-center">
                                <i class="fas fa-file-alt mr-3 text-green-400"></i>Generate Complete OPORD
                            </h3>
                            <button id="close-generate-modal" class="text-gray-400 hover:text-white">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>

                        <div class="space-y-6">
                            <div class="bg-gray-800 p-4 rounded-lg">
                                <h4 class="text-lg font-semibold text-white mb-3">Choose Output Format</h4>
                                <p class="text-gray-300 text-sm mb-4">Select your preferred format for the complete OPORD document. All formats include the full FM 6-0 structure with annexes.</p>

                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <button class="generate-format-btn bg-blue-700 hover:bg-blue-600 p-4 rounded-lg text-center transition-all" onclick="app.generateOPORD('txt')">
                                        <i class="fas fa-file-text text-3xl mb-2 text-blue-300"></i>
                                        <div class="text-white font-semibold">Text File</div>
                                        <div class="text-blue-200 text-xs">.TXT Format</div>
                                        <div class="text-blue-200 text-xs mt-1">Plain text, universal compatibility</div>
                                    </button>

                                    <button class="generate-format-btn bg-blue-700 hover:bg-blue-600 p-4 rounded-lg text-center transition-all" onclick="app.generateOPORD('docx')">
                                        <i class="fas fa-file-word text-3xl mb-2 text-blue-300"></i>
                                        <div class="text-white font-semibold">Word Document</div>
                                        <div class="text-blue-200 text-xs">.DOCX Format</div>
                                        <div class="text-blue-200 text-xs mt-1">Professional formatting, editable</div>
                                    </button>

                                    <button class="generate-format-btn bg-blue-700 hover:bg-blue-600 p-4 rounded-lg text-center transition-all" onclick="app.generateOPORD('pdf')">
                                        <i class="fas fa-file-pdf text-3xl mb-2 text-blue-300"></i>
                                        <div class="text-white font-semibold">PDF Document</div>
                                        <div class="text-blue-200 text-xs">.PDF Format</div>
                                        <div class="text-blue-200 text-xs mt-1">Print-ready, secure format</div>
                                    </button>
                                </div>
                            </div>

                            <div class="bg-green-900 bg-opacity-30 border border-green-500 rounded-lg p-4">
                                <div class="flex items-center mb-2">
                                    <i class="fas fa-check-circle text-green-400 mr-2"></i>
                                    <h4 class="text-white font-semibold">What's Included</h4>
                                </div>
                                <ul class="text-green-200 text-sm space-y-1">
                                    <li>• Complete OPORD structure per FM 6-0</li>
                                    <li>• All 5 main sections (Situation, Mission, Execution, Sustainment, Command & Signal)</li>
                                    <li>• All 8 annexes (A through H) with content</li>
                                    <li>• Professional military formatting</li>
                                    <li>• Coordinate and weather data integration</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                `;

                document.body.appendChild(modal);

                // Add close functionality
                document.getElementById('close-generate-modal').addEventListener('click', () => {
                    modal.remove();
                });

                // Close on backdrop click
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });
            }

            async generateOPORD(format) {
                try {
                    this.showNotification(`Generating OPORD in ${format.toUpperCase()} format...`, 'info');

                    // Collect all OPORD data
                    const opordData = this.collectOPORDData();

                    // Generate based on format
                    switch (format.toLowerCase()) {
                        case 'txt':
                            this.generateTextOPORD(opordData);
                            break;
                        case 'docx':
                            await this.generateWordOPORD(opordData);
                            break;
                        case 'pdf':
                            await this.generatePDFOPORD(opordData);
                            break;
                        default:
                            throw new Error('Unsupported format');
                    }

                    // Close modal if open
                    const modal = document.querySelector('.modal-backdrop');
                    if (modal) modal.remove();

                    this.showNotification(`OPORD generated successfully in ${format.toUpperCase()} format!`, 'success');

                } catch (error) {
                    console.error('Error generating OPORD:', error);
                    this.showNotification(`Error generating OPORD: ${error.message}`, 'error');
                }
            }

            collectOPORDData() {
                // Collect all form data for OPORD generation
                const data = {
                    // Header information
                    classification: '[CLASSIFICATION]',
                    unit: document.getElementById('mission-who')?.value || '[UNIT]',
                    dtg: new Date().toISOString().replace(/[-:]/g, '').slice(0, 15) + 'Z',

                    // Mission elements
                    mission: {
                        who: document.getElementById('mission-who')?.value || '[UNIT]',
                        what: document.getElementById('mission-what')?.value || '[TASK]',
                        when: document.getElementById('mission-when')?.value || '[TIME]',
                        where: document.getElementById('mission-where')?.value || '[LOCATION]',
                        why: document.getElementById('mission-why')?.value || '[PURPOSE]'
                    },

                    // Main sections
                    situation: document.getElementById('draft-situation')?.value || 'Situation information to be provided.',
                    tacticalCoordinates: document.getElementById('tactical-coordinates')?.value || '',
                    mapImages: this.mapImages || [],
                    execution: {
                        commandersIntent: document.getElementById('draft-commanders-intent')?.value || 'Commander\'s intent to be provided.',
                        conceptOfOperations: document.getElementById('draft-concept-operations')?.value || 'Concept of operations to be provided.',
                        tasksToSubordinateUnits: window.formatSubordinateUnitsForExport() || 'Tasks to subordinate units to be provided.',
                        tasksToStaff: document.getElementById('draft-tasks-staff')?.value || 'Tasks to staff to be provided.'
                    },
                    sustainment: document.getElementById('draft-sustainment')?.value || 'Sustainment information to be provided.',
                    commandSignal: document.getElementById('draft-command')?.value || 'Command and signal information to be provided.',

                    // Annexes
                    annexes: {
                        A: document.getElementById('draft-annex-a')?.value || 'Task Organization details to be provided.',
                        B: document.getElementById('draft-annex-b')?.value || 'Intelligence information to be provided.',
                        C: document.getElementById('draft-annex-c')?.value || 'Operations overlay and graphics to be provided.',
                        D: document.getElementById('draft-annex-d')?.value || 'Fires plan to be provided.',
                        E: document.getElementById('draft-annex-e')?.value || 'Protection measures to be provided.',
                        F: document.getElementById('draft-annex-f')?.value || 'Sustainment plan to be provided.',
                        G: document.getElementById('draft-annex-g')?.value || 'Engineer support to be provided.',
                        H: document.getElementById('draft-annex-h')?.value || 'Signal plan to be provided.',
                        K: document.getElementById('annex-k')?.value || 'CEMA operations plan to be provided.',
                        L: document.getElementById('annex-l')?.value || 'Information Collection plan to be provided.',
                        MISC: document.getElementById('annex-misc')?.value || 'Additional annexes as required.'
                    }
                };

                return data;
            }

            generateTextOPORD(data) {
                // Generate formatted text OPORD
                const missionStatement = `${data.mission.who} ${data.mission.what} ${data.mission.when} at ${data.mission.where} in order to ${data.mission.why}`;

                // Format situation with tactical coordinates
                let situationText = data.situation;
                if (data.tacticalCoordinates && data.tacticalCoordinates.trim()) {
                    situationText += `\n\nKEY LOCATIONS:\n${data.tacticalCoordinates}`;
                }

                const opordText = `OPERATION ORDER ${data.dtg}

${data.unit}

1. SITUATION
${situationText}

2. MISSION
${missionStatement}

3. EXECUTION

a. Commander's Intent
${data.execution.commandersIntent}

b. Concept of Operations
${data.execution.conceptOfOperations}

c. Tasks to Subordinate Units
${data.execution.tasksToSubordinateUnits}

d. Tasks to Staff
${data.execution.tasksToStaff}

4. SUSTAINMENT
${data.sustainment}

5. COMMAND AND SIGNAL
${data.commandSignal}

ANNEXES:

ANNEX A - TASK ORGANIZATION
${data.annexes.A}

ANNEX B - INTELLIGENCE
${data.annexes.B}

ANNEX C - OPERATIONS
${data.annexes.C}

ANNEX D - FIRES
${data.annexes.D}

ANNEX E - PROTECTION
${data.annexes.E}

ANNEX F - SUSTAINMENT
${data.annexes.F}

ANNEX G - ENGINEER
${data.annexes.G}

ANNEX H - SIGNAL
${data.annexes.H}

ANNEX K - CEMA
${data.annexes.K}

ANNEX L - INFORMATION COLLECTION
${data.annexes.L}

MISCELLANEOUS ANNEXES
${data.annexes.MISC}`;

                // Download as text file
                const blob = new Blob([opordText], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `OPORD_${data.dtg}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }

            async generateWordOPORD(data) {
                try {
                    // Alternative approach: Generate RTF format (Rich Text Format)
                    // RTF is much more reliable and opens perfectly in Word
                    const missionStatement = `${data.mission.who} ${data.mission.what} ${data.mission.when} at ${data.mission.where} in order to ${data.mission.why}`;

                    // Format situation with tactical coordinates
                    let situationText = data.situation;
                    if (data.tacticalCoordinates && data.tacticalCoordinates.trim()) {
                        situationText += `\n\nKEY LOCATIONS:\n${data.tacticalCoordinates}`;
                    }

                    // Add map images if available
                    if (data.mapImages && data.mapImages.length > 0) {
                        situationText += `\n\nTACTICAL GRAPHICS:\n`;
                        data.mapImages.forEach((mapEntry, index) => {
                            situationText += `Map ${index + 1}: ${mapEntry.name} - ${mapEntry.coordinates} (${mapEntry.system})\n`;
                        });
                    }

                    // Create RTF content (Rich Text Format - opens in Word)
                    const rtfContent = `{\\rtf1\\ansi\\deff0 {\\fonttbl {\\f0 Times New Roman;}}
\\f0\\fs24
\\qc\\b OPERATION ORDER ${data.dtg}\\b0\\par
\\par
\\qc\\b ${data.unit}\\b0\\par
\\par
\\ql\\b 1. SITUATION\\b0\\par
${this.escapeRTF(situationText)}\\par
\\par
\\b 2. MISSION\\b0\\par
${this.escapeRTF(missionStatement)}\\par
\\par
\\b 3. EXECUTION\\b0\\par
\\par
\\b a. Commander's Intent\\b0\\par
${this.escapeRTF(data.execution.commandersIntent)}\\par
\\par
\\b b. Concept of Operations\\b0\\par
${this.escapeRTF(data.execution.conceptOfOperations)}\\par
\\par
\\b c. Tasks to Subordinate Units\\b0\\par
${this.escapeRTF(data.execution.tasksToSubordinateUnits)}\\par
\\par
\\b d. Tasks to Staff\\b0\\par
${this.escapeRTF(data.execution.tasksToStaff)}\\par
\\par
\\b 4. SUSTAINMENT\\b0\\par
${this.escapeRTF(data.sustainment)}\\par
\\par
\\b 5. COMMAND AND SIGNAL\\b0\\par
${this.escapeRTF(data.commandSignal)}\\par
\\par
\\b ANNEXES:\\b0\\par
\\par
\\b ANNEX A - TASK ORGANIZATION\\b0\\par
${this.escapeRTF(data.annexes.A)}\\par
\\par
\\b ANNEX B - INTELLIGENCE\\b0\\par
${this.escapeRTF(data.annexes.B)}\\par
\\par
\\b ANNEX C - OPERATIONS\\b0\\par
${this.escapeRTF(data.annexes.C)}\\par
\\par
\\b ANNEX D - FIRES\\b0\\par
${this.escapeRTF(data.annexes.D)}\\par
\\par
\\b ANNEX E - PROTECTION\\b0\\par
${this.escapeRTF(data.annexes.E)}\\par
\\par
\\b ANNEX F - SUSTAINMENT\\b0\\par
${this.escapeRTF(data.annexes.F)}\\par
\\par
\\b ANNEX G - ENGINEER\\b0\\par
${this.escapeRTF(data.annexes.G)}\\par
\\par
\\b ANNEX H - SIGNAL\\b0\\par
${this.escapeRTF(data.annexes.H)}\\par
\\par
\\b ANNEX K - CEMA\\b0\\par
${this.escapeRTF(data.annexes.K)}\\par
\\par
\\b ANNEX L - INFORMATION COLLECTION\\b0\\par
${this.escapeRTF(data.annexes.L)}\\par
\\par
\\b MISCELLANEOUS ANNEXES\\b0\\par
${this.escapeRTF(data.annexes.MISC)}\\par
}`;

                    // Create and download RTF file (opens in Word)
                    const blob = new Blob([rtfContent], { type: 'application/rtf' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `OPORD_${data.dtg}.rtf`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);

                    this.showNotification('OPORD generated as RTF format (opens in Word)', 'success');

                } catch (error) {
                    console.error('Word generation error:', error);

                    // Fallback: Generate HTML format that can be opened in Word
                    try {
                        const htmlContent = this.generateHTMLForWord(data);
                        const blob = new Blob([htmlContent], { type: 'text/html' });
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `OPORD_${data.dtg}.html`;
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        URL.revokeObjectURL(url);

                        this.showNotification('OPORD generated as HTML format (can be opened in Word)', 'success');
                    } catch (fallbackError) {
                        console.error('Fallback generation error:', fallbackError);
                        throw new Error('Failed to generate Word-compatible document');
                    }
                }
            }

            escapeRTF(text) {
                if (!text) return '';
                return text.replace(/\\/g, '\\\\')
                          .replace(/\{/g, '\\{')
                          .replace(/\}/g, '\\}')
                          .replace(/\n/g, '\\par ');
            }

            generateHTMLForWord(data) {
                const missionStatement = `${data.mission.who} ${data.mission.what} ${data.mission.when} at ${data.mission.where} in order to ${data.mission.why}`;

                // Format situation with tactical coordinates
                let situationText = data.situation;
                if (data.tacticalCoordinates && data.tacticalCoordinates.trim()) {
                    situationText += `\n\nKEY LOCATIONS:\n${data.tacticalCoordinates}`;
                }

                // Add map images if available
                if (data.mapImages && data.mapImages.length > 0) {
                    situationText += `\n\nTACTICAL GRAPHICS:\n`;
                    data.mapImages.forEach((mapEntry, index) => {
                        situationText += `Map ${index + 1}: ${mapEntry.name} - ${mapEntry.coordinates} (${mapEntry.system})\n`;
                    });
                }

                return `<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>OPORD ${data.dtg}</title>
    <style>
        body { font-family: 'Times New Roman', serif; font-size: 12pt; margin: 1in; }
        .center { text-align: center; }
        .bold { font-weight: bold; }
        .section { margin-top: 12pt; }
        .annex { margin-top: 12pt; }
        p { margin: 6pt 0; }
    </style>
</head>
<body>
    <div class="center bold">
        <p>OPERATION ORDER ${data.dtg}</p>
        <p>${data.unit}</p>
    </div>

    <div class="section">
        <p class="bold">1. SITUATION</p>
        <p>${situationText.replace(/\n/g, '<br>')}</p>
    </div>

    <div class="section">
        <p class="bold">2. MISSION</p>
        <p>${missionStatement}</p>
    </div>

    <div class="section">
        <p class="bold">3. EXECUTION</p>

        <div class="subsection">
            <p class="bold">a. Commander's Intent</p>
            <p>${data.execution.commandersIntent.replace(/\n/g, '<br>')}</p>
        </div>

        <div class="subsection">
            <p class="bold">b. Concept of Operations</p>
            <p>${data.execution.conceptOfOperations.replace(/\n/g, '<br>')}</p>
        </div>

        <div class="subsection">
            <p class="bold">c. Tasks to Subordinate Units</p>
            <p>${data.execution.tasksToSubordinateUnits.replace(/\n/g, '<br>')}</p>
        </div>

        <div class="subsection">
            <p class="bold">d. Tasks to Staff</p>
            <p>${data.execution.tasksToStaff.replace(/\n/g, '<br>')}</p>
        </div>
    </div>

    <div class="section">
        <p class="bold">4. SUSTAINMENT</p>
        <p>${data.sustainment.replace(/\n/g, '<br>')}</p>
    </div>

    <div class="section">
        <p class="bold">5. COMMAND AND SIGNAL</p>
        <p>${data.commandSignal.replace(/\n/g, '<br>')}</p>
    </div>

    <div class="section">
        <p class="bold">ANNEXES:</p>
    </div>

    <div class="annex">
        <p class="bold">ANNEX A - TASK ORGANIZATION</p>
        <p>${data.annexes.A.replace(/\n/g, '<br>')}</p>
    </div>

    <div class="annex">
        <p class="bold">ANNEX B - INTELLIGENCE</p>
        <p>${data.annexes.B.replace(/\n/g, '<br>')}</p>
    </div>

    <div class="annex">
        <p class="bold">ANNEX C - OPERATIONS</p>
        <p>${data.annexes.C.replace(/\n/g, '<br>')}</p>
    </div>

    <div class="annex">
        <p class="bold">ANNEX D - FIRES</p>
        <p>${data.annexes.D.replace(/\n/g, '<br>')}</p>
    </div>

    <div class="annex">
        <p class="bold">ANNEX E - PROTECTION</p>
        <p>${data.annexes.E.replace(/\n/g, '<br>')}</p>
    </div>

    <div class="annex">
        <p class="bold">ANNEX F - SUSTAINMENT</p>
        <p>${data.annexes.F.replace(/\n/g, '<br>')}</p>
    </div>

    <div class="annex">
        <p class="bold">ANNEX G - ENGINEER</p>
        <p>${data.annexes.G.replace(/\n/g, '<br>')}</p>
    </div>

    <div class="annex">
        <p class="bold">ANNEX H - SIGNAL</p>
        <p>${data.annexes.H.replace(/\n/g, '<br>')}</p>
    </div>

    <div class="annex">
        <p class="bold">ANNEX K - CEMA</p>
        <p>${data.annexes.K.replace(/\n/g, '<br>')}</p>
    </div>

    <div class="annex">
        <p class="bold">ANNEX L - INFORMATION COLLECTION</p>
        <p>${data.annexes.L.replace(/\n/g, '<br>')}</p>
    </div>

    <div class="annex">
        <p class="bold">MISCELLANEOUS ANNEXES</p>
        <p>${data.annexes.MISC.replace(/\n/g, '<br>')}</p>
    </div>
</body>
</html>`;
            }

            saveDraft() {
                try {
                    const data = this.collectOPORDData();

                    // Save to localStorage for session recovery
                    const draftData = {
                        ...data,
                        savedAt: new Date().toISOString(),
                        version: '1.0'
                    };

                    localStorage.setItem('opord-draft', JSON.stringify(draftData));

                    // Create a human-readable draft text file
                    const missionStatement = `${data.mission.who} ${data.mission.what} ${data.mission.when} at ${data.mission.where} in order to ${data.mission.why}`;

                    // Format situation with tactical coordinates
                    let situationText = data.situation;
                    if (data.tacticalCoordinates && data.tacticalCoordinates.trim()) {
                        situationText += `\n\nKEY LOCATIONS:\n${data.tacticalCoordinates}`;
                    }

                    // Add map images if available
                    if (data.mapImages && data.mapImages.length > 0) {
                        situationText += `\n\nTACTICAL GRAPHICS:\n`;
                        data.mapImages.forEach((mapEntry, index) => {
                            situationText += `Map ${index + 1}: ${mapEntry.name} - ${mapEntry.coordinates} (${mapEntry.system})\n`;
                        });
                    }

                    const draftContent = `OPORD DRAFT - SAVED ${new Date().toLocaleString()}

OPERATION ORDER ${data.dtg}

${data.unit}

1. SITUATION
${situationText}

2. MISSION
${missionStatement}

3. EXECUTION

a. Commander's Intent
${data.execution.commandersIntent}

b. Concept of Operations
${data.execution.conceptOfOperations}

c. Tasks to Subordinate Units
${data.execution.tasksToSubordinateUnits}

d. Tasks to Staff
${data.execution.tasksToStaff}

4. SUSTAINMENT
${data.sustainment}

5. COMMAND AND SIGNAL
${data.commandSignal}

ANNEXES:

ANNEX A - TASK ORGANIZATION
${data.annexes.A}

ANNEX B - INTELLIGENCE
${data.annexes.B}

ANNEX C - OPERATIONS
${data.annexes.C}

ANNEX D - FIRES
${data.annexes.D}

ANNEX E - PROTECTION
${data.annexes.E}

ANNEX F - SUSTAINMENT
${data.annexes.F}

ANNEX G - ENGINEER
${data.annexes.G}

ANNEX H - SIGNAL
${data.annexes.H}

ANNEX K - CEMA
${data.annexes.K}

ANNEX L - INFORMATION COLLECTION
${data.annexes.L}

MISCELLANEOUS ANNEXES
${data.annexes.MISC}

--- END OF DRAFT ---
This is a working draft. Use "Generate OPORD" for final formatted documents.`;

                    // Create and download readable text file
                    const blob = new Blob([draftContent], { type: 'text/plain' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `OPORD_Draft_${data.dtg}.txt`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);

                    this.showNotification('Draft saved as readable text file and stored locally', 'success');

                } catch (error) {
                    console.error('Error saving draft:', error);
                    this.showNotification('Failed to save draft', 'error');
                }
            }

            loadDraft() {
                try {
                    const savedDraft = localStorage.getItem('opord-draft');
                    if (!savedDraft) {
                        this.showNotification('No saved draft found', 'warning');
                        return;
                    }

                    const draftData = JSON.parse(savedDraft);

                    // Populate form fields
                    if (draftData.unit) document.getElementById('draft-unit').value = draftData.unit;
                    if (draftData.dtg) document.getElementById('draft-dtg').value = draftData.dtg;
                    if (draftData.situation) document.getElementById('draft-situation').value = draftData.situation;
                    if (draftData.tacticalCoordinates) document.getElementById('tactical-coordinates').value = draftData.tacticalCoordinates;
                    // Handle both old and new execution format
                    if (draftData.execution) {
                        if (typeof draftData.execution === 'string') {
                            // Legacy format - put in commander's intent
                            document.getElementById('draft-commanders-intent').value = draftData.execution;
                        } else {
                            // New format with subsections
                            if (draftData.execution.commandersIntent) document.getElementById('draft-commanders-intent').value = draftData.execution.commandersIntent;
                            if (draftData.execution.conceptOfOperations) document.getElementById('draft-concept-operations').value = draftData.execution.conceptOfOperations;
                            if (draftData.execution.tasksToStaff) document.getElementById('draft-tasks-staff').value = draftData.execution.tasksToStaff;

                            // Handle subordinate units data
                            if (draftData.execution.tasksToSubordinateUnits) {
                                // Clear existing units and load saved ones
                                const container = document.getElementById('subordinate-units-container');
                                if (container) {
                                    container.innerHTML = '';

                                    // Parse the saved subordinate units data
                                    const lines = draftData.execution.tasksToSubordinateUnits.split('\n');
                                    lines.forEach(line => {
                                        if (line.trim()) {
                                            const colonIndex = line.indexOf(':');
                                            if (colonIndex > 0) {
                                                const unit = line.substring(0, colonIndex).trim();
                                                const task = line.substring(colonIndex + 1).trim();

                                                // Add unit entry
                                                if (window.addSubordinateUnit) {
                                                    window.addSubordinateUnit();

                                                    // Find the last added unit and populate it
                                                    const lastUnitEntry = container.lastElementChild;
                                                    if (lastUnitEntry) {
                                                        const id = lastUnitEntry.id.split('-')[2];
                                                        const select = document.getElementById(`unit-select-${id}`);
                                                        const customInput = document.getElementById(`unit-custom-${id}`);
                                                        const taskInput = document.getElementById(`unit-task-${id}`);

                                                        // Check if unit is in common units list
                                                        if (window.commonUnits && window.commonUnits.includes(unit)) {
                                                            select.value = unit;
                                                        } else {
                                                            select.value = 'custom';
                                                            customInput.style.display = 'block';
                                                            customInput.value = unit;
                                                        }
                                                        taskInput.value = task;
                                                    }
                                                }
                                            }
                                        }
                                    });
                                }
                            }
                        }
                    }
                    if (draftData.sustainment) document.getElementById('draft-sustainment').value = draftData.sustainment;
                    if (draftData.commandSignal) document.getElementById('draft-command').value = draftData.commandSignal;

                    // Populate mission fields
                    if (draftData.mission) {
                        if (draftData.mission.who) document.getElementById('mission-who').value = draftData.mission.who;
                        if (draftData.mission.what) document.getElementById('mission-what').value = draftData.mission.what;
                        if (draftData.mission.when) document.getElementById('mission-when').value = draftData.mission.when;
                        if (draftData.mission.where) document.getElementById('mission-where').value = draftData.mission.where;
                        if (draftData.mission.why) document.getElementById('mission-why').value = draftData.mission.why;
                    }

                    // Populate annexes
                    if (draftData.annexes) {
                        Object.keys(draftData.annexes).forEach(key => {
                            let elementId;
                            if (key === 'MISC') {
                                elementId = 'annex-misc';
                            } else if (['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H'].includes(key)) {
                                elementId = `draft-annex-${key.toLowerCase()}`;
                            } else {
                                elementId = `annex-${key.toLowerCase()}`;
                            }
                            const element = document.getElementById(elementId);
                            if (element) element.value = draftData.annexes[key];
                        });
                    }

                    // Restore map images if available
                    if (draftData.mapImages) {
                        this.mapImages = draftData.mapImages;
                    }

                    this.showNotification(`Draft loaded from ${new Date(draftData.savedAt).toLocaleString()}`, 'success');

                } catch (error) {
                    console.error('Error loading draft:', error);
                    this.showNotification('Failed to load draft', 'error');
                }
            }

            async generatePDFOPORD(data) {
                try {
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF();

                    const missionStatement = `${data.mission.who} ${data.mission.what} ${data.mission.when} at ${data.mission.where} in order to ${data.mission.why}`;

                    let yPosition = 25; // Increased top margin
                    const lineHeight = 7;
                    const pageHeight = doc.internal.pageSize.height;

                    // Helper function to add text with page breaks
                    const addText = (text, fontSize = 12, isBold = false) => {
                        if (yPosition > pageHeight - 30) {
                            doc.addPage();
                            yPosition = 25;
                        }

                        doc.setFontSize(fontSize);
                        if (isBold) {
                            doc.setFont(undefined, 'bold');
                        } else {
                            doc.setFont(undefined, 'normal');
                        }

                        const lines = doc.splitTextToSize(text, 160); // Reduced width for better margins
                        lines.forEach(line => {
                            if (yPosition > pageHeight - 30) {
                                doc.addPage();
                                yPosition = 25;
                            }
                            doc.text(line, 25, yPosition); // Increased left margin
                            yPosition += lineHeight;
                        });
                        yPosition += 3; // Extra spacing
                    };

                    // Document content with centered headers
                    const pageWidth = doc.internal.pageSize.width;

                    // Center the operation order header (no classification)
                    doc.setFontSize(16);
                    doc.setFont(undefined, 'bold');
                    const opordText = `OPERATION ORDER ${data.dtg}`;
                    const opordWidth = doc.getTextWidth(opordText);
                    doc.text(opordText, (pageWidth - opordWidth) / 2, yPosition);
                    yPosition += 10;

                    // Center the unit header
                    doc.setFontSize(14);
                    const unitText = data.unit;
                    const unitWidth = doc.getTextWidth(unitText);
                    doc.text(unitText, (pageWidth - unitWidth) / 2, yPosition);
                    yPosition += 15;

                    addText("1. SITUATION", 14, true);
                    addText(data.situation);

                    if (data.tacticalCoordinates && data.tacticalCoordinates.trim()) {
                        addText("KEY LOCATIONS:", 12, true);
                        addText(data.tacticalCoordinates);
                    }

                    // Add map images if available
                    if (data.mapImages && data.mapImages.length > 0) {
                        addText("TACTICAL GRAPHICS:", 12, true);

                        data.mapImages.forEach((mapEntry, index) => {
                            addText(`Map ${index + 1}: ${mapEntry.name} - ${mapEntry.coordinates} (${mapEntry.system})`);

                            // Add map image to PDF
                            try {
                                // Calculate optimal image size to fit within margins
                                const pageWidth = doc.internal.pageSize.width;
                                const maxImgWidth = pageWidth - 50; // 25px margin on each side
                                const maxImgHeight = 80; // Reasonable height for document flow

                                // Check if we need a new page for the image
                                if (yPosition > pageHeight - maxImgHeight - 20) {
                                    doc.addPage();
                                    yPosition = 25;
                                }

                                // Center the image horizontally
                                const imgWidth = Math.min(maxImgWidth, 140);
                                const imgHeight = Math.min(maxImgHeight, 80);
                                const xPosition = (pageWidth - imgWidth) / 2;

                                // Add the map image with proper positioning
                                doc.addImage(mapEntry.image, 'PNG', xPosition, yPosition, imgWidth, imgHeight);
                                yPosition += imgHeight + 15; // Extra spacing after image

                            } catch (error) {
                                console.error('Error adding map image to PDF:', error);
                                addText(`[Map image could not be embedded: ${mapEntry.name}]`);
                            }
                        });
                    }

                    addText("2. MISSION", 14, true);
                    addText(missionStatement);

                    addText("3. EXECUTION", 14, true);
                    addText("");
                    addText("a. Commander's Intent", 12, true);
                    addText(data.execution.commandersIntent);
                    addText("");
                    addText("b. Concept of Operations", 12, true);
                    addText(data.execution.conceptOfOperations);
                    addText("");
                    addText("c. Tasks to Subordinate Units", 12, true);
                    addText(data.execution.tasksToSubordinateUnits);
                    addText("");
                    addText("d. Tasks to Staff", 12, true);
                    addText(data.execution.tasksToStaff);

                    addText("4. SUSTAINMENT", 14, true);
                    addText(data.sustainment);

                    addText("5. COMMAND AND SIGNAL", 14, true);
                    addText(data.commandSignal);

                    addText("ANNEXES:", 14, true);

                    addText("ANNEX A - TASK ORGANIZATION", 12, true);
                    addText(data.annexes.A);

                    addText("ANNEX B - INTELLIGENCE", 12, true);
                    addText(data.annexes.B);

                    addText("ANNEX C - OPERATIONS", 12, true);
                    addText(data.annexes.C);

                    addText("ANNEX D - FIRES", 12, true);
                    addText(data.annexes.D);

                    addText("ANNEX E - PROTECTION", 12, true);
                    addText(data.annexes.E);

                    addText("ANNEX F - SUSTAINMENT", 12, true);
                    addText(data.annexes.F);

                    addText("ANNEX G - ENGINEER", 12, true);
                    addText(data.annexes.G);

                    addText("ANNEX H - SIGNAL", 12, true);
                    addText(data.annexes.H);

                    addText("ANNEX K - CEMA", 12, true);
                    addText(data.annexes.K);

                    addText("ANNEX L - INFORMATION COLLECTION", 12, true);
                    addText(data.annexes.L);

                    addText("MISCELLANEOUS ANNEXES", 12, true);
                    addText(data.annexes.MISC);

                    // Save the PDF
                    doc.save(`OPORD_${data.dtg}.pdf`);

                } catch (error) {
                    console.error('Error generating PDF:', error);
                    throw new Error('Failed to generate PDF document');
                }
            }
        }

        // API Configuration
        const GEOAPIFY_API_KEY = 'd566334dce524de799d78f832ffcea8a';
        const WEATHER_API_KEY = '8a27dc680c3b5e17d8a06560abb76bd1';

        // Check if SunCalc is loaded (optional library for tactical data)
        if (typeof SunCalc === 'undefined') {
            console.warn("SunCalc library not found. Tactical data like BMNT/EENT will be approximate. Include it for better accuracy.");
        }

        // HTTPS/TLS 1.3 Enforcement
        (function enforceHTTPS() {
            // Skip HTTPS enforcement for local file:// protocol and localhost
            if (location.protocol === 'file:' ||
                location.hostname === 'localhost' ||
                location.hostname === '127.0.0.1' ||
                location.hostname === '') {
                console.log('🔧 Local development mode - HTTPS enforcement skipped');
                return;
            }

            // Force HTTPS redirect if not already secure (only for web servers)
            if (location.protocol !== 'https:') {
                console.warn('Redirecting to HTTPS for security...');
                location.replace('https:' + window.location.href.substring(window.location.protocol.length));
                return;
            }

            // Log TLS version if available (for debugging)
            if (window.location.protocol === 'https:') {
                console.log('✅ HTTPS connection established');
                console.log('🔒 TLS encryption active (version determined by server)');
            }
        })();

        // Collapsible Sidebar Functionality
        class SidebarManager {
            constructor() {
                this.sidebar = null;
                this.toggleBtn = null;
                this.mainContent = null;
                this.mobileOverlay = null;
                this.isCollapsed = false;
                this.isMobile = false;
                this.init();
            }

            init() {
                // Wait for DOM to be ready
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', () => this.setupElements());
                } else {
                    this.setupElements();
                }
            }

            setupElements() {
                this.sidebar = document.getElementById('sidebar');
                this.toggleBtn = document.getElementById('sidebar-toggle');
                this.mainContent = document.getElementById('main-content-area');
                this.mobileOverlay = document.getElementById('mobile-overlay');
                this.mobileMenuBtn = document.getElementById('mobile-menu-btn');

                if (!this.sidebar || !this.toggleBtn || !this.mainContent) {
                    console.warn('Sidebar elements not found');
                    return;
                }

                // Check if mobile
                this.checkMobile();

                // Load saved state
                this.loadState();

                // Setup event listeners
                this.setupEventListeners();

                // Initial setup
                this.updateSidebar();

                // Ensure mobile content is visible on load
                if (this.isMobile) {
                    this.ensureMobileContentVisible();
                }
            }

            setupEventListeners() {
                // Toggle button click
                this.toggleBtn.addEventListener('click', () => this.toggle());

                // Mobile overlay click
                if (this.mobileOverlay) {
                    this.mobileOverlay.addEventListener('click', () => this.closeMobile());
                }

                // Mobile menu button click
                if (this.mobileMenuBtn) {
                    this.mobileMenuBtn.addEventListener('click', () => this.openMobile());
                }

                // Window resize
                window.addEventListener('resize', () => {
                    this.checkMobile();
                    this.updateSidebar();
                });

                // Keyboard shortcut (Ctrl + B)
                document.addEventListener('keydown', (e) => {
                    if (e.ctrlKey && e.key === 'b') {
                        e.preventDefault();
                        this.toggle();
                    }
                });

                // ESC key to close on mobile
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && this.isMobile && !this.isCollapsed) {
                        this.closeMobile();
                    }
                });

                // Touch gesture support for mobile
                this.setupTouchGestures();
            }

            checkMobile() {
                const wasMobile = this.isMobile;
                this.isMobile = window.innerWidth <= 768;

                // If switching from mobile to desktop, ensure proper state
                if (wasMobile && !this.isMobile) {
                    this.isCollapsed = this.loadSavedState();
                    this.sidebar?.classList.remove('mobile-open');
                    this.mobileOverlay?.classList.remove('active');
                }

                // If switching from desktop to mobile, close sidebar and ensure content visibility
                if (!wasMobile && this.isMobile) {
                    this.isCollapsed = true;
                    this.ensureMobileContentVisible();
                }
            }

            ensureMobileContentVisible() {
                if (this.isMobile && this.mainContent) {
                    // Force mobile layout
                    this.mainContent.style.display = 'block';
                    this.mainContent.style.width = '100%';
                    this.mainContent.style.marginLeft = '0';
                    this.mainContent.style.position = 'relative';
                    this.mainContent.style.zIndex = '1';

                    // Ensure mobile menu button is visible
                    const mobileMenuHeader = document.querySelector('.mobile-menu-header');
                    if (mobileMenuHeader) {
                        mobileMenuHeader.style.display = 'block';
                        mobileMenuHeader.style.width = '100%';
                    }
                }
            }

            toggle() {
                if (this.isMobile) {
                    this.toggleMobile();
                } else {
                    this.toggleDesktop();
                }
            }

            toggleDesktop() {
                this.isCollapsed = !this.isCollapsed;
                this.saveState();
                this.updateSidebar();
            }

            toggleMobile() {
                this.isCollapsed = !this.isCollapsed;
                this.updateSidebar();
            }

            openMobile() {
                if (this.isMobile) {
                    this.isCollapsed = false;
                    this.updateSidebar();
                }
            }

            closeMobile() {
                if (this.isMobile) {
                    this.isCollapsed = true;
                    this.updateSidebar();
                }
            }

            updateSidebar() {
                if (!this.sidebar || !this.mainContent) return;

                if (this.isMobile) {
                    // Mobile behavior - always show full sidebar when open
                    this.sidebar.classList.remove('collapsed');
                    this.mainContent.classList.remove('sidebar-collapsed');

                    // Ensure main content takes full width on mobile
                    this.mainContent.style.marginLeft = '0';
                    this.mainContent.style.width = '100%';

                    if (this.isCollapsed) {
                        this.sidebar.classList.remove('mobile-open');
                        this.mobileOverlay?.classList.remove('active');
                        // Update mobile menu button icon
                        this.updateMobileMenuButton(false);
                    } else {
                        this.sidebar.classList.add('mobile-open');
                        this.mobileOverlay?.classList.add('active');
                        // Update mobile menu button icon
                        this.updateMobileMenuButton(true);
                        // Auto-close sidebar when clicking navigation items on mobile
                        this.setupMobileNavAutoClose();
                    }
                } else {
                    // Desktop behavior
                    this.sidebar.classList.remove('mobile-open');
                    this.mobileOverlay?.classList.remove('active');

                    // Reset mobile-specific styles
                    this.mainContent.style.marginLeft = '';
                    this.mainContent.style.width = '';

                    if (this.isCollapsed) {
                        this.sidebar.classList.add('collapsed');
                        // Let flexbox handle the layout automatically
                    } else {
                        this.sidebar.classList.remove('collapsed');
                    }
                }

                // Update toggle button tooltip
                const tooltip = this.isCollapsed ? 'Expand Sidebar (Ctrl+B)' : 'Collapse Sidebar (Ctrl+B)';
                this.toggleBtn?.setAttribute('title', tooltip);
            }

            updateMobileMenuButton(isOpen) {
                if (this.mobileMenuBtn) {
                    const icon = this.mobileMenuBtn.querySelector('i.fa-bars, i.fa-times');
                    const chevron = this.mobileMenuBtn.querySelector('i.fa-chevron-right, i.fa-chevron-down');

                    if (icon) {
                        icon.className = isOpen ? 'fas fa-times text-xl mr-3 text-blue-400' : 'fas fa-bars text-xl mr-3 text-blue-400';
                    }

                    if (chevron) {
                        chevron.className = isOpen ? 'fas fa-chevron-down ml-auto text-gray-400' : 'fas fa-chevron-right ml-auto text-gray-400';
                    }
                }
            }

            setupMobileNavAutoClose() {
                if (!this.isMobile) return;

                // Add click listeners to navigation buttons to auto-close on mobile
                const navButtons = this.sidebar.querySelectorAll('.tab-btn');
                navButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        if (this.isMobile && !this.isCollapsed) {
                            setTimeout(() => this.closeMobile(), 300); // Small delay for smooth UX
                        }
                    }, { once: true });
                });
            }

            saveState() {
                if (!this.isMobile) {
                    localStorage.setItem('opord-sidebar-collapsed', this.isCollapsed.toString());
                }
            }

            loadState() {
                if (!this.isMobile) {
                    const saved = localStorage.getItem('opord-sidebar-collapsed');
                    this.isCollapsed = saved === 'true';
                } else {
                    // Mobile always starts collapsed
                    this.isCollapsed = true;
                }
            }

            loadSavedState() {
                const saved = localStorage.getItem('opord-sidebar-collapsed');
                return saved === 'true';
            }

            // Public methods for external use
            expand() {
                this.isCollapsed = false;
                this.updateSidebar();
                if (!this.isMobile) this.saveState();
            }

            collapse() {
                this.isCollapsed = true;
                this.updateSidebar();
                if (!this.isMobile) this.saveState();
            }

            isOpen() {
                return !this.isCollapsed;
            }

            setupTouchGestures() {
                if (!this.isMobile) return;

                let startX = 0;
                let startY = 0;
                let isScrolling = false;

                // Touch start
                document.addEventListener('touchstart', (e) => {
                    if (!this.isMobile) return;

                    startX = e.touches[0].clientX;
                    startY = e.touches[0].clientY;
                    isScrolling = false;
                }, { passive: true });

                // Touch move
                document.addEventListener('touchmove', (e) => {
                    if (!this.isMobile || isScrolling) return;

                    const currentX = e.touches[0].clientX;
                    const currentY = e.touches[0].clientY;
                    const diffX = currentX - startX;
                    const diffY = currentY - startY;

                    // Determine if user is scrolling vertically
                    if (Math.abs(diffY) > Math.abs(diffX)) {
                        isScrolling = true;
                        return;
                    }
                }, { passive: true });

                // Touch end
                document.addEventListener('touchend', (e) => {
                    if (!this.isMobile || isScrolling) return;

                    const endX = e.changedTouches[0].clientX;
                    const diffX = endX - startX;
                    const threshold = 50; // Minimum swipe distance

                    // Swipe right from left edge to open sidebar
                    if (startX < 20 && diffX > threshold && this.isCollapsed) {
                        this.openMobile();
                    }

                    // Swipe left to close sidebar when open
                    if (diffX < -threshold && !this.isCollapsed) {
                        this.closeMobile();
                    }
                }, { passive: true });
            }
        }

        // Initialize sidebar manager
        window.sidebarManager = new SidebarManager();

        // Dynamic Unit Management for Tasks to Subordinate Units
        window.unitCounter = 0;
        window.commonUnits = [
            'unit_1st_div', 'unit_2nd_div', 'unit_3rd_div', 'unit_4th_div', 'unit_5th_div',
            'unit_1st_bde', 'unit_2nd_bde', 'unit_3rd_bde', 'unit_4th_bde', 'unit_5th_bde',
            'unit_alpha_company', 'unit_bravo_company', 'unit_charlie_company', 'unit_delta_company',
            'unit_1st_plt', 'unit_2nd_plt', 'unit_3rd_plt', 'unit_4th_plt',
            'unit_weapons_squad', 'unit_support_squad', 'unit_hq_element',
            'unit_artillery', 'unit_engineers', 'unit_medical', 'unit_supply', 'unit_maintenance'
        ];

        window.addSubordinateUnit = function() {
            console.log('Adding subordinate unit...');
            window.unitCounter++;
            const container = document.getElementById('subordinate-units-container');
            if (!container) {
                console.error('Container not found!');
                return;
            }

            const unitDiv = document.createElement('div');
            unitDiv.className = 'flex gap-2 items-start mb-2';
            unitDiv.id = `unit-entry-${window.unitCounter}`;

            // Get translations for dynamic content
            const getTranslation = (key) => {
                if (window.app && window.app.getTranslation) {
                    return window.app.getTranslation(key);
                }
                return key; // fallback to key if translation not available
            };

            const selectUnitPlaceholder = getTranslation('select_unit_placeholder');
            const customUnitOption = getTranslation('custom_unit_option');
            const customUnitPlaceholder = getTranslation('custom_unit_placeholder');
            const unitTaskPlaceholder = getTranslation('unit_task_placeholder');
            const removeUnitBtn = getTranslation('remove_unit_btn');

            unitDiv.innerHTML = `
                <select class="form-input text-sm p-2 rounded-md w-32 flex-shrink-0" id="unit-select-${window.unitCounter}">
                    <option value="">${selectUnitPlaceholder}</option>
                    ${window.commonUnits.map(unitKey => `<option value="${unitKey}">${getTranslation(unitKey)}</option>`).join('')}
                    <option value="custom">${customUnitOption}</option>
                </select>
                <input type="text" class="form-input text-sm p-2 rounded-md w-32 flex-shrink-0" id="unit-custom-${window.unitCounter}" placeholder="${customUnitPlaceholder}" style="display: none;">
                <textarea class="form-input text-sm p-2 rounded-md flex-grow h-10" id="unit-task-${window.unitCounter}" placeholder="${unitTaskPlaceholder}"></textarea>
                <button type="button" class="bg-red-600 hover:bg-red-700 text-white text-xs px-2 py-1 rounded flex-shrink-0" onclick="window.removeSubordinateUnit(${window.unitCounter})" title="${removeUnitBtn}">
                    <span>−</span>
                </button>
            `;

            container.appendChild(unitDiv);
            console.log(`Unit entry ${window.unitCounter} added successfully`);

            // Add event listener for unit selection
            const unitSelect = document.getElementById(`unit-select-${window.unitCounter}`);
            const customInput = document.getElementById(`unit-custom-${window.unitCounter}`);

            if (unitSelect && customInput) {
                unitSelect.addEventListener('change', function() {
                    if (this.value === 'custom') {
                        customInput.style.display = 'block';
                        customInput.focus();
                    } else {
                        customInput.style.display = 'none';
                        customInput.value = '';
                    }
                });
            }
        };

        window.removeSubordinateUnit = function(id) {
            const unitDiv = document.getElementById(`unit-entry-${id}`);
            if (unitDiv) {
                unitDiv.remove();
            }
        };

        window.getSubordinateUnitsData = function() {
            const container = document.getElementById('subordinate-units-container');
            if (!container) return [];

            const units = [];

            container.querySelectorAll('[id^="unit-entry-"]').forEach(unitDiv => {
                const id = unitDiv.id.split('-')[2];
                const select = document.getElementById(`unit-select-${id}`);
                const customInput = document.getElementById(`unit-custom-${id}`);
                const taskInput = document.getElementById(`unit-task-${id}`);

                if (select && taskInput) {
                    let unitName = select.value;
                    if (unitName === 'custom' && customInput && customInput.value.trim()) {
                        unitName = customInput.value.trim();
                    } else if (unitName && unitName !== 'custom') {
                        // Get translated unit name for export
                        const getTranslation = (key) => {
                            if (window.app && window.app.getTranslation) {
                                return window.app.getTranslation(key);
                            }
                            return key; // fallback to key if translation not available
                        };
                        unitName = getTranslation(unitName);
                    }

                    if (unitName && taskInput.value.trim()) {
                        units.push({
                            unit: unitName,
                            task: taskInput.value.trim()
                        });
                    }
                }
            });

            return units;
        };

        window.formatSubordinateUnitsForExport = function() {
            const units = window.getSubordinateUnitsData();
            return units.map(unit => `${unit.unit}: ${unit.task}`).join('\n');
        };

        // Initialize with default unit entries
        window.initializeSubordinateUnits = function() {
            console.log('Initializing subordinate units...');
            window.addSubordinateUnit();
            window.addSubordinateUnit(); // Start with 2 units
            console.log('Subordinate units initialization complete');
        };

        // Refresh subordinate units interface when language changes
        window.refreshSubordinateUnitsInterface = function() {
            console.log('Refreshing subordinate units interface for language change...');
            const container = document.getElementById('subordinate-units-container');
            if (!container) return;

            // Store current data
            const currentData = window.getSubordinateUnitsData();

            // Clear and rebuild interface
            container.innerHTML = '';

            // Recreate units with current data
            currentData.forEach(unitData => {
                window.addSubordinateUnit();

                // Find the last added unit and populate it
                const lastUnitEntry = container.lastElementChild;
                if (lastUnitEntry) {
                    const id = lastUnitEntry.id.split('-')[2];
                    const select = document.getElementById(`unit-select-${id}`);
                    const customInput = document.getElementById(`unit-custom-${id}`);
                    const taskInput = document.getElementById(`unit-task-${id}`);

                    // Check if unit is in common units list (by translation key)
                    const unitKey = window.commonUnits.find(key => {
                        const getTranslation = (k) => {
                            if (window.app && window.app.getTranslation) {
                                return window.app.getTranslation(k);
                            }
                            return k;
                        };
                        return getTranslation(key) === unitData.unit;
                    });

                    if (unitKey) {
                        select.value = unitKey;
                    } else {
                        select.value = 'custom';
                        customInput.style.display = 'block';
                        customInput.value = unitData.unit;
                    }
                    taskInput.value = unitData.task;
                }
            });

            // If no data, initialize with defaults
            if (currentData.length === 0) {
                window.addSubordinateUnit();
                window.addSubordinateUnit();
            }

            console.log('Subordinate units interface refresh complete');
        };

        // Initialize the application when the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            try {
                console.log('Initializing OPORD application...');

                window.app = new ProfessionalOPORD();

                // Complex debugging functions removed - feedback now uses simple Google Form link
                window.openGoogleFormFeedback = () => window.app.openGoogleFormFeedback();

                // Log available debug functions
                console.log('✅ === SIMPLIFIED FEEDBACK SYSTEM ===');
                console.log('');
                console.log('🎯 SOLUTION: Feedback now uses direct Google Form link');
                console.log('');
                console.log('WHAT CHANGED:');
                console.log('• Removed complex entry field ID mapping');
                console.log('• Eliminated problematic form submission logic');
                console.log('• Implemented simple, reliable Google Form link');
                console.log('• Users click 💡 button → Google Form opens in new tab');
                console.log('');
                console.log('BENEFITS:');
                console.log('• 100% reliable - no technical issues');
                console.log('• Always works regardless of form changes');
                console.log('• Users see the actual form fields and descriptions');
                console.log('• No complex debugging needed');
                console.log('');
                console.log('FEEDBACK PROCESS:');
                console.log('1. User clicks 💡 feedback button');
                console.log('2. Modal shows feedback categories and description');
                console.log('3. User clicks "Open Feedback Form" button');
                console.log('4. Google Form opens in new tab');
                console.log('5. User submits feedback directly to Google');
                console.log('');
                console.log('🚀 Simple, reliable, and always works!');
                console.log('================================================');

                // Initialize subordinate units with multiple attempts
                let initAttempts = 0;
                const maxAttempts = 10;

                function tryInitializeUnits() {
                    initAttempts++;
                    const addUnitBtn = document.getElementById('add-unit-btn');
                    const container = document.getElementById('subordinate-units-container');

                    if (addUnitBtn && container) {
                        console.log('Initializing subordinate units...');
                        addUnitBtn.addEventListener('click', window.addSubordinateUnit);
                        window.initializeSubordinateUnits();
                        console.log('Subordinate units initialized successfully');
                    } else if (initAttempts < maxAttempts) {
                        console.log(`Attempt ${initAttempts}: Elements not ready, retrying...`);
                        setTimeout(tryInitializeUnits, 200);
                    } else {
                        console.error('Failed to initialize subordinate units after', maxAttempts, 'attempts');
                    }
                }

                setTimeout(tryInitializeUnits, 100);

                // Initialize collapsible functionality
                initializeCollapsibleSections();

                console.log('OPORD application initialized successfully');
            } catch (error) {
                console.error('Error initializing OPORD application:', error);
            }
        });

        // Collapsible Content Functionality
        function initializeCollapsibleSections() {
            console.log('Initializing collapsible sections...');

            // Add event listeners to all collapsible headers
            document.addEventListener('click', function(e) {
                const header = e.target.closest('.collapsible-header');
                if (header) {
                    e.preventDefault();
                    e.stopPropagation();
                    toggleCollapsibleSection(header);
                }
            });

            // Add keyboard support for accessibility
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    const header = e.target.closest('.collapsible-header');
                    if (header) {
                        e.preventDefault();
                        e.stopPropagation();
                        toggleCollapsibleSection(header);
                    }
                }
            });

            console.log('Collapsible sections initialized successfully');
        }

        function toggleCollapsibleSection(header) {
            const targetId = header.getAttribute('data-target');
            const content = document.getElementById(targetId);
            const chevron = header.querySelector('.fa-chevron-right, .fa-chevron-down');
            const isExpanded = header.getAttribute('aria-expanded') === 'true';

            console.log(`Toggling section: ${targetId}, currently expanded: ${isExpanded}`);

            if (!content) {
                console.warn('Collapsible content not found:', targetId);
                return;
            }

            if (isExpanded) {
                // Collapse
                content.classList.remove('expanded');
                content.classList.add('hidden');
                header.setAttribute('aria-expanded', 'false');
                if (chevron) {
                    chevron.classList.remove('fa-chevron-down');
                    chevron.classList.add('fa-chevron-right');
                    chevron.style.transform = 'rotate(0deg)';
                }
                console.log(`Collapsed section: ${targetId}`);
            } else {
                // Expand
                content.classList.remove('hidden');
                content.classList.add('expanded');
                header.setAttribute('aria-expanded', 'true');
                if (chevron) {
                    chevron.classList.remove('fa-chevron-right');
                    chevron.classList.add('fa-chevron-down');
                    chevron.style.transform = 'rotate(90deg)';
                }
                console.log(`Expanded section: ${targetId}`);
            }

            // Smooth animation by temporarily setting max-height
            if (!isExpanded) {
                setTimeout(() => {
                    content.style.maxHeight = content.scrollHeight + 'px';
                }, 10);
            } else {
                content.style.maxHeight = '0px';
            }
        }
    </script>
</body>
</html>
